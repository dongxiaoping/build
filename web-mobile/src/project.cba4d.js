window.__require=function e(t,o,n){function i(a,c){if(!o[a]){if(!t[a]){var s=a.split("/");if(s=s[s.length-1],!t[s]){var u="function"==typeof __require&&__require;if(!c&&u)return u(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+a+"'")}}var l=o[a]={exports:{}};t[a][0].call(l.exports,function(e){return i(t[a][1][e]||e)},l,l.exports,e,t,o,n)}return o[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<n.length;a++)i(n[a]);return i}({BetItem:[function(e,t,o){"use strict";cc._RF.push(t,"43100pQBPpDELQ8edI5pb0n","BetItem"),Object.defineProperty(o,"__esModule",{value:!0});cc._decorator.ccclass;var n=e("../../common/EventBus"),i=e("../../common/Const"),r=function(){function e(e){this.userId=null,this.raceNum=null,this._sky=0,this._land=0,this._middle=0,this._bridg=0,this._skyCorner=0,this._landCorner=0,this.raceNum=e.raceNum,this.userId=e.userId,this._sky=e.sky,this._land=e.land,this._middle=e.middle,this._bridg=e.bridg,this._skyCorner=e.skyCorner,this._landCorner=e.landCorner}return Object.defineProperty(e.prototype,"sky",{get:function(){return this._sky},set:function(e){this.valueChangeNotice(i.betLocaion.SKY,this._sky,e),this._sky=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"land",{get:function(){return this._land},set:function(e){this.valueChangeNotice(i.betLocaion.LAND,this._land,e),this._land=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"middle",{get:function(){return this._middle},set:function(e){this.valueChangeNotice(i.betLocaion.MIDDLE,this._middle,e),this._middle=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bridg",{get:function(){return this._bridg},set:function(e){this.valueChangeNotice(i.betLocaion.BRIDG,this._bridg,e),this._bridg=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skyCorner",{get:function(){return this._skyCorner},set:function(e){this.valueChangeNotice(i.betLocaion.SKY_CORNER,this._skyCorner,e),this._skyCorner=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"landCorner",{get:function(){return this._landCorner},set:function(e){this.valueChangeNotice(i.betLocaion.LAND_CORNER,this._landCorner,e),this._landCorner=e},enumerable:!0,configurable:!0}),e.prototype.getXiaZhuVal=function(){return this.sky+this.middle+this.land+this.skyCorner+this.bridg+this.landCorner},e.prototype.valueChangeNotice=function(e,t,o){if(0!==t||0!==o)if(0!==t&&0===o){var r={raceNum:this.raceNum,userId:this.userId,betLocation:e,fromVal:t};n.eventBus.emit(i.EventType.BET_CANCE_NOTICE,r)}else{r={raceNum:this.raceNum,userId:this.userId,betLocation:e,fromVal:t,toValue:o};n.eventBus.emit(i.EventType.BET_CHIP_CHANGE_EVENT,r)}},e.prototype.getScore=function(e,t,o,n,r,a){var c=0;switch(e){case i.CompareDxRe.BIG:c+=this.sky;break;case i.CompareDxRe.SMALL:c-=this.sky;break;case i.CompareDxRe.EQ:}switch(t){case i.CompareDxRe.BIG:c+=this.middle;break;case i.CompareDxRe.SMALL:c-=this.middle;break;case i.CompareDxRe.EQ:}switch(o){case i.CompareDxRe.BIG:c+=this.land;break;case i.CompareDxRe.SMALL:c-=this.land;break;case i.CompareDxRe.EQ:}switch(r){case i.CompareDxRe.BIG:c+=this.bridg;break;case i.CompareDxRe.SMALL:c-=this.bridg;break;case i.CompareDxRe.EQ:}switch(a){case i.CompareDxRe.BIG:c+=this.landCorner;break;case i.CompareDxRe.SMALL:c-=this.landCorner;break;case i.CompareDxRe.EQ:}switch(n){case i.CompareDxRe.BIG:c+=this.skyCorner;break;case i.CompareDxRe.SMALL:c-=this.skyCorner;break;case i.CompareDxRe.EQ:}return c},e}();o.default=r,cc._RF.pop()},{"../../common/Const":"Const","../../common/EventBus":"EventBus"}],BetList:[function(e,t,o){"use strict";cc._RF.push(t,"efa28+zT+5MjpcL5aFD3oLX","BetList"),Object.defineProperty(o,"__esModule",{value:!0}),o.BetList=[{userId:"22",raceNum:0,sky:5,middle:5,land:5,skyCorner:5,landCorner:5,bridg:5},{userId:"23",raceNum:0,sky:5,middle:5,land:5,skyCorner:5,landCorner:5,bridg:5},{userId:"23",raceNum:0,sky:5,middle:5,land:5,skyCorner:5,landCorner:5,bridg:5},{userId:"24",raceNum:1,sky:5,middle:5,land:5,skyCorner:5,landCorner:5,bridg:5}],cc._RF.pop()},{}],BetManage:[function(e,t,o){"use strict";cc._RF.push(t,"e8f16Ejq4NJlbF27MCdjmDb","BetManage"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../common/Config"),i=e("../../common/Const"),r=e("./BetItem"),a=e("axios"),c=function(){function e(){this.betList=[]}return e.prototype.cancelBetByLocation=function(e,t,o,r){return new Promise(function(c){var s=n.config.serverAddress+i.InterfaceUrl.CANCEL_BET;a.default.get(s,{params:{userId:t,roomId:e,raceNum:o,betLocation:r}}).then(function(e){var t=e.data;0!=t.status?c({result:i.ResponseStatus.SUCCESS,extObject:""}):c({result:i.ResponseStatus.FAIL,extObject:t})}).catch(function(e){c({result:i.ResponseStatus.FAIL,extObject:{status:0,message:"net_error",data:""}})})})},e.prototype.clear=function(){this.betList=[]},e.prototype.cancelBet=function(e){try{this.betList[e.raceNum][e.userId][e.betLocation]=0}catch(e){}},e.prototype.getBetByLocation=function(e){try{return this.betList[e.raceNum][e.userId][e.betLocation]}catch(e){return 0}},e.prototype.setBetList=function(e){var t=[];e.forEach(function(e){void 0===t[e.raceNum]&&(t[e.raceNum]=[]),t[e.raceNum][e.userId]=new r.default(e)}),this.betList=t},e.prototype.addBet=function(e,t,o,n){if(void 0===this.betList[e]&&(this.betList[e]=[]),void 0===this.betList[e][t]){var i={userId:t,raceNum:e,sky:0,land:0,middle:0,bridg:0,skyCorner:0,landCorner:0};this.betList[e][t]=new r.default(i)}this.betList[e][t][o]=this.betList[e][t][o]+n},e}();o.default=new c,cc._RF.pop()},{"../../common/Config":"Config","../../common/Const":"Const","./BetItem":"BetItem",axios:2}],1:[function(e,t,o){var n,i,r=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}function u(e){if(i===clearTimeout)return clearTimeout(e);if((i===c||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{return i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{i="function"==typeof clearTimeout?clearTimeout:c}catch(e){i=c}})();var l,p=[],d=!1,h=-1;function f(){d&&l&&(d=!1,l.length?p=l.concat(p):h=-1,p.length&&m())}function m(){if(!d){var e=s(f);d=!0;for(var t=p.length;t;){for(l=p,p=[];++h<t;)l&&l[h].run();h=-1,t=p.length}l=null,d=!1,u(e)}}function y(e,t){this.fun=e,this.array=t}function g(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)t[o-1]=arguments[o];p.push(new y(e,t)),1!==p.length||d||s(m)},y.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],CancelChipAn:[function(e,t,o){"use strict";cc._RF.push(t,"f99afwOQCREVqJO0e+2wuK3","CancelChipAn");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.chip_1_1=null,t.chip_1_2=null,t.chip_2_1=null,t.chip_2_2=null,t.distanceSet=60,t}return n(t,e),t.prototype.start=function(){this.animation()},t.prototype.animation=function(){var e=this.node.getPosition();this.move(this.chip_1_1.node,{x:e.x-this.distanceSet,y:e.y+this.distanceSet}),this.move(this.chip_1_2.node,{x:e.x+this.distanceSet,y:e.y+this.distanceSet}),this.move(this.chip_2_1.node,{x:e.x-this.distanceSet,y:e.y-this.distanceSet}),this.move(this.chip_2_2.node,{x:e.x+this.distanceSet,y:e.y-this.distanceSet})},t.prototype.move=function(e,t){var o=cc.moveTo(.4,t.x,t.y),n=cc.sequence(o,cc.callFunc(function(){e.active=!1,e.destroy()},this));e.runAction(n)},i([c(cc.Sprite)],t.prototype,"chip_1_1",void 0),i([c(cc.Sprite)],t.prototype,"chip_1_2",void 0),i([c(cc.Sprite)],t.prototype,"chip_2_1",void 0),i([c(cc.Sprite)],t.prototype,"chip_2_2",void 0),t=i([a],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],ChairItem:[function(e,t,o){"use strict";cc._RF.push(t,"77445w4W3BBfr+i6pG6rql7","ChairItem"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(e,t,o){this.playUserIcon=null,this.cc=e,this.chairName=t,this.playUserIcon=o}return e.prototype.inChairWithNode=function(e){if(!this.isChairEmputy())return!1;e.parent=this.cc.find("Canvas/"+this.chairName),e.setPosition(0,0);var t=e.getComponent("PlayUserIcon"),o=t.getMemberData();t.changeByUserState(o.state);var n=this.cc.find("Canvas/Desk").getChildByName("user_"+o.userId);n&&n.destroy(),e.name="PlayerIcon"},e.prototype.inChair=function(e){if(!this.isChairEmputy())return!1;var t=this.cc.find("Canvas/"+this.chairName),o=this.cc.instantiate(this.playUserIcon);return o.name="PlayerIcon",o.setPosition(0,0),o.parent=t,o.getComponent("PlayUserIcon").setShow(e),!0},e.prototype.outChair=function(e){var t=this.cc.find("Canvas/"+this.chairName).getChildByName("PlayerIcon");t&&(t.getComponent("PlayUserIcon").onDisable(),t.destroy()),e()},e.prototype.isChairEmputy=function(){return!this.cc.find("Canvas/"+this.chairName).getChildByName("PlayerIcon")},e.prototype.getUserInfo=function(){return this.isChairEmputy()?null:this.cc.find("Canvas/"+this.chairName).getChildByName("PlayerIcon").getComponent("PlayUserIcon").getMemberData()},e.prototype.getChairPosition=function(){var e="Canvas/"+this.chairName;return void 0===this.cc.find(e)?null:this.cc.find(e).getPosition()},e}();o.default=n,cc._RF.pop()},{}],ChairManage:[function(e,t,o){"use strict";cc._RF.push(t,"6bd1fQyLgpL6ZLb0PzRTNeU","ChairManage"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./ChairItem"),i=e("loglevel"),r=function(){function e(e,t){this.chairList=[],this.playUserIcon=null,this.cc=e,this.playUserIcon=t,this.init()}return e.prototype.init=function(){for(var e=[0,1,9,2,8,3,7,4,6,5],t=0;t<e.length;t++){var o="Member_"+e[t],i=new n.default(this.cc,o,this.playUserIcon);this.chairList.push(i)}},e.prototype.getChairPositionByUserId=function(e){for(var t=0;t<this.chairList.length;t++)if(!this.chairList[t].isChairEmputy()){var o=this.chairList[t].getUserInfo();if(null!=o&&o.userId==e)return this.chairList[t].getChairPosition()}return null},e.prototype.inChair=function(e){var t=this.getOneEmputyChair();return!!t&&(t.inChair(e),!0)},e.prototype.outChair=function(e){try{for(var t=0;t<this.chairList.length;t++){if(!this.chairList[t].isChairEmputy())if(this.chairList[t].getUserInfo().userId==e){this.chairList[t].outChair(function(){}),cc.log("\u7528\u6237\u79bb\u5f00\u684c\u4f4d:"+e);break}}}catch(e){}},e.prototype.getOneEmputyChair=function(){for(var e=0;e<this.chairList.length;e++)if(this.chairList[e].isChairEmputy())return this.chairList[e];return!1},e.prototype.inCharByList=function(e){for(var t=0;t<e.length;t++){if(!this.inChair(e[t]))return!1}return!0},e.prototype.clearAllChair=function(){for(var e=0;e<this.chairList.length;e++)this.chairList[e].isChairEmputy()||this.chairList[e].outChair(function(){})},e.prototype.moveToLandlordChair=function(e){var t=this;if(null!=e&&""!=e){var o=this.getChairByUserId(e);if(null!==o)if("Member_0"!==o.chairName){var n=this.chairList[0],r=o.getUserInfo();if(n.isChairEmputy())o.outChair(function(){t.userIconMoveAnimation(r,o.getChairPosition(),n.getChairPosition(),function(e){n.inChairWithNode(e)})});else{var a=n.getUserInfo();n.outChair(function(){t.userIconMoveAnimation(a,n.getChairPosition(),o.getChairPosition(),function(e){o.inChairWithNode(e)})}),o.outChair(function(){t.userIconMoveAnimation(r,o.getChairPosition(),n.getChairPosition(),function(e){n.inChairWithNode(e)})})}}else i.default.info("\u6539\u6210\u5458\u5df2\u7ecf\u5728\u5730\u4e3b\u4f4d\u7f6e\u4e0a");else i.default.info("\u8be5\u6210\u5458\u4e0d\u5728\u5ea7\u6905\u4e0a\uff0c\u65e0\u6cd5\u632a\u52a8\u5230\u5730\u4e3b\u4f4d\u7f6e")}},e.prototype.userIconMoveAnimation=function(e,t,o,n){var i=this.cc.instantiate(this.playUserIcon);i.getComponent("PlayUserIcon").setShow(e);var r=this.cc.find("Canvas/Desk");i.parent=r,i.name="user_"+e.userId,i.setPosition(t.x,t.y);var a=this.cc.moveTo(1,o.x,o.y),c=cc.sequence(a,this.cc.callFunc(function(){n(i)},this));i.runAction(c)},e.prototype.getChairByUserId=function(e){for(var t=0;t<this.chairList.length;t++)if(null!=this.chairList[t].getUserInfo()&&this.chairList[t].getUserInfo().userId===e)return this.chairList[t];return null},e}();o.default=r,cc._RF.pop()},{"./ChairItem":"ChairItem",loglevel:28}],ChatCarton:[function(e,t,o){"use strict";cc._RF.push(t,"15708nyF9dB8qddmreFE6jN","ChatCarton");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../common/Const"),a=e("../../common/WebSocketManage"),c=e("../../store/Room/RoomManage"),s=e("../../store/User/UserManage"),u=e("../../common/EventBus"),l=e("../../common/FaceList"),p=cc._decorator,d=p.ccclass,h=p.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ziItem=null,t.faceItem=null,t.ziButton=null,t.faceButton=null,t.ziPart=null,t.ziContent=null,t.facePart=null,t.faceContent=null,t.closeButton=null,t}return n(t,e),t.prototype.start=function(){this.addFaceIconEvent()},t.prototype.addFaceIconEvent=function(){var e=this;try{this.closeButton.node.on(cc.Node.EventType.TOUCH_END,function(){e.node.destroy()}),this.node.on(cc.Node.EventType.TOUCH_END,function(t){e.node.destroy()}),this.ziButton.on(cc.Node.EventType.TOUCH_END,function(t){e.ziPart.active=!0,e.facePart.active=!1}),this.faceButton.on(cc.Node.EventType.TOUCH_END,function(t){e.ziPart.active=!1,e.facePart.active=!0});for(var t=1,o=function(){var e=cc.instantiate(n.faceItem);e.name=t+"",n.faceContent.addChild(e),e.width=86,e.height=86,cc.loader.loadRes("ChatCarton/"+l.faceList[t].name,function(t,o){var n=new cc.SpriteFrame(o);e.getChildByName("Pic").getComponent(cc.Sprite).spriteFrame=n}),n.addNotice(e,r.ChatMessageType.PIC)},n=this;t<l.faceList.length;t++)o()}catch(e){console.log(e)}},t.prototype.addNotice=function(e,t){var o=this;e.on(cc.Node.EventType.TOUCH_END,function(e){var n=e.currentTarget._name;if(c.default.getEnterRoomParam().model==r.EnterRoomModel.EMULATOR_ROOM){var i={userId:s.default.userInfo.id,type:t,message:n};return u.eventBus.emit(r.EventType.CARTON_MESSAGE_NOTICE,i),void o.node.destroy()}var l={type:r.NoticeType.chatCartonMessage,info:{roomId:c.default.roomItem.id,info:{userId:s.default.userInfo.id,type:t,message:n}}};a.default.send(JSON.stringify(l)),o.node.destroy()})},i([h(cc.Prefab)],t.prototype,"ziItem",void 0),i([h(cc.Prefab)],t.prototype,"faceItem",void 0),i([h(cc.Node)],t.prototype,"ziButton",void 0),i([h(cc.Node)],t.prototype,"faceButton",void 0),i([h(cc.Node)],t.prototype,"ziPart",void 0),i([h(cc.Node)],t.prototype,"ziContent",void 0),i([h(cc.Node)],t.prototype,"facePart",void 0),i([h(cc.Node)],t.prototype,"faceContent",void 0),i([h(cc.Sprite)],t.prototype,"closeButton",void 0),t=i([d],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../common/Const":"Const","../../common/EventBus":"EventBus","../../common/FaceList":"FaceList","../../common/WebSocketManage":"WebSocketManage","../../store/Room/RoomManage":"RoomManage","../../store/User/UserManage":"UserManage"}],Chip:[function(e,t,o){"use strict";cc._RF.push(t,"c023aMw5VNJHLHwBCcfXBSL","Chip");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../common/Const"),a=e("../../store/Room/RoomManage"),c=e("../../store/Races/RaceManage"),s=cc._decorator.ccclass,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.chipInfo=null,t.flyTime=1.2,t}return n(t,e),t.prototype.start=function(){},t.prototype.backChip=function(){var e=this;this.scheduleOnce(function(){e.chipBackAction(!1)},1)},t.prototype.cancelChip=function(e){e.userId===this.chipInfo.userId&&e.betLocation===this.chipInfo.betLocation&&(this.node.active=!1,this.node.destroy())},t.prototype.initData=function(e){this.chipInfo=e},t.prototype.chipBackAction=function(e){var t=this;try{var o=this.chipInfo.userId,n=a.default.roomItem.oningRaceNum,i=this.chipInfo.betLocation,s=c.default.raceList[n].getLocationResult(i);if(s!==r.CompareDxRe.SMALL&&s!==r.CompareDxRe.EQ||e||(o=c.default.raceList[n].landlordId),(i===r.betLocaion.SKY_CORNER||i===r.betLocaion.BRIDG||i===r.betLocaion.LAND_CORNER)&&s===r.CompareDxRe.EQ)return this.node.active=!1,void this.node.destroy();var u=this.getUserChairPosition(o),l=cc.moveTo(this.flyTime,u.x,u.y),p=cc.sequence(l,cc.callFunc(function(){t.node.active=!1,t.node.destroy()},this));this.node.runAction(p)}catch(e){this.node.active=!1,this.node.destroy()}},t.prototype.getUserChairPosition=function(e){return cc.find("Canvas/Desk").getComponent("Desk").chairManage.getChairPositionByUserId(e)},t.prototype.onDisable=function(){},t=i([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../common/Const":"Const","../../store/Races/RaceManage":"RaceManage","../../store/Room/RoomManage":"RoomManage"}],ConfigManage:[function(e,t,o){"use strict";cc._RF.push(t,"38889/qxPhIgr8R4p3cxk10","ConfigManage"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../common/Const"),i=e("../../common/Config"),r=e("../User/UserManage"),a=e("axios"),c=function(){function e(){this.isBackMusic=!0,this.isTxMusic=!0,this.configHasLoad=!1,this.createDiamondConfig=null,this.chipValList=[],this.userIconUrl="",this.audioUrl="",this.gameUrl="",this.informMessage="\u6eda\u7b52\u5b50\u8bda\u62db\u4ee3\u7406\uff0c\u4ee3\u7406\u8bf7\u4e8e\u5ba2\u670d\u8054\u7cfb\uff01\u6587\u660e\u6e38\u620f\uff0c\u7981\u6b62\u8d4c\u535a\uff0c\u4e00\u65e6\u53d1\u73b0\u5229\u7528\u5e73\u53f0\u4ece\u4e8b\u8d4c\u535a\u6d3b\u52a8\u4e00\u5f8b\u5c01\u53f7\u5904\u7406\uff01",this.customerWechat="xxxx",this.cheat=!1,this.rollDiceTime=4,this.betTime=13,this.showDownTime=7,this.showResultKeepTime=4,this.showResultTime=4,this.dealTime=3,this.beginTextShowTime=1.5,this.timeBeforeBeginText=.5;var e=window.localStorage.getItem("isTxMusic");this.isTxMusic=null==e||!!parseInt(e);var t=window.localStorage.getItem("isBackMusic");this.isBackMusic=null==t||!!parseInt(t)}return e.prototype.setBackMusic=function(e){this.isBackMusic=e;var t=e?1:0;window.localStorage.setItem("isBackMusic",t.toString())},e.prototype.setCheat=function(e){this.cheat=e},e.prototype.isCheat=function(){return this.cheat},e.prototype.setTxMusic=function(e){this.isTxMusic=e;var t=e?1:0;window.localStorage.setItem("isTxMusic",t.toString())},e.prototype.isTxMusicOpen=function(){return this.isTxMusic},e.prototype.isBackMusicOpen=function(){return this.isBackMusic},e.prototype.getUserIconUrl=function(){return this.userIconUrl},e.prototype.setUserIconUrl=function(e){this.userIconUrl=e},e.prototype.getAudioUrl=function(){return this.audioUrl},e.prototype.getTimeBeforeBeginText=function(){return this.timeBeforeBeginText},e.prototype.setAudioUrl=function(e){this.audioUrl=e},e.prototype.setRapLandlordTime=function(e){this.rapLandlordTime=e},e.prototype.getRapLandlordTime=function(){return this.rapLandlordTime},e.prototype.isConfigHasLoad=function(){return this.configHasLoad},e.prototype.getCreateDiamondConfig=function(){return this.createDiamondConfig},e.prototype.getBeginTextShowTime=function(){return this.beginTextShowTime},e.prototype.getRollDiceTime=function(){return this.rollDiceTime},e.prototype.getDealTime=function(){return this.dealTime},e.prototype.getBetTime=function(){return this.betTime},e.prototype.getShowDownTime=function(){return this.showDownTime},e.prototype.getShowResultKeepTime=function(){return this.showResultKeepTime},e.prototype.getShowResultTime=function(){return this.showResultTime},e.prototype.loadConfigInfo=function(){var e=this;return new Promise(function(t){var o=i.config.serverAddress+n.InterfaceUrl.GET_CONFIG;a.default.get(o).then(function(o){var i=o.data;e.createDiamondConfig=i.data.createDiamond,e.setChipValList(i.data.roomGame.chipValList),r.default.setSelectChipValue(i.data.roomGame.chipValList[0]),e.configHasLoad=!0,t({result:n.ResponseStatus.SUCCESS,extObject:""})}).catch(function(e){t({result:n.ResponseStatus.FAIL,extObject:{status:0,message:"net_error",data:""}})})})},e.prototype.getChipValList=function(){return this.chipValList},e.prototype.setChipValList=function(e){this.chipValList=e},e.prototype.getCustomerWechatNum=function(){return this.customerWechat},e.prototype.getInformMessage=function(){return this.informMessage},e.prototype.setGameUrl=function(e){this.gameUrl=e},e.prototype.getGameUrl=function(){return this.gameUrl},e.prototype.getSharePageAddr=function(){return"https://www.toplaygame.cn/login/copySharePage"},e.prototype.getZhanjiPageAddr=function(){return"https://www.toplaygame.cn/login/copyZhanjiPage"},e}();o.default=new c,cc._RF.pop()},{"../../common/Config":"Config","../../common/Const":"Const","../User/UserManage":"UserManage",axios:2}],Config:[function(e,t,o){"use strict";cc._RF.push(t,"f6e04x+/ktO5pmIieANBphx","Config"),Object.defineProperty(o,"__esModule",{value:!0}),o.config={serverAddress:"https://www.toplaygame.cn/phpserver/public/index.php",loginPageAddress:"https://www.toplaygame.cn/login/login.html",registerPageAddress:"https://www.toplaygame.cn/login/register.html",websocketAddress:"wss://www.toplaygame.cn/wss",cheatSwitchNumber:34850239,version:"v1.2.2"},cc._RF.pop()},{}],Const:[function(e,t,o){"use strict";cc._RF.push(t,"ad8a5jonKVB1JCOuXUASpiD","Const"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e.SKY="sky",e.MIDDLE="middle",e.LAND="land",e.LANDLORD="landlord"}(o.TableLocationType||(o.TableLocationType={}));var n=function(){return function(){}}();o.PromiseParam=n,o.PromiseResult={SUCCESS:0,ERROR:-1},function(e){e[e.OPEN=1]="OPEN",e[e.PLAYING=2]="PLAYING",e[e.CLOSE=3]="CLOSE"}(o.roomState||(o.roomState={})),function(e){e.SKY="sky",e.LAND="land",e.MIDDLE="middle",e.BRIDG="bridg",e.SKY_CORNER="skyCorner",e.LAND_CORNER="landCorner"}(o.betLocaion||(o.betLocaion={})),function(e){e[e.ROOM_STATE_CHANGE_EVENT=1]="ROOM_STATE_CHANGE_EVENT",e[e.RACE_STATE_CHANGE_EVENT=2]="RACE_STATE_CHANGE_EVENT",e[e.MEMBER_DELETE_FROM_ROOM=3]="MEMBER_DELETE_FROM_ROOM",e[e.LOCAL_NOTICE_EVENT=4]="LOCAL_NOTICE_EVENT",e[e.LANDLORD_CAHNGE_EVENT=5]="LANDLORD_CAHNGE_EVENT",e[e.BET_CHIP_CHANGE_EVENT=6]="BET_CHIP_CHANGE_EVENT",e[e.RACING_NUM_CHANGE_EVENT=7]="RACING_NUM_CHANGE_EVENT",e[e.NEW_MEMBER_IN_ROOM=8]="NEW_MEMBER_IN_ROOM",e[e.MEMBER_STATE_CHANGE=9]="MEMBER_STATE_CHANGE",e[e.BET_CANCE_NOTICE=10]="BET_CANCE_NOTICE",e[e.USER_SCORE_NOTICE=11]="USER_SCORE_NOTICE",e[e.CARTON_MESSAGE_NOTICE=12]="CARTON_MESSAGE_NOTICE"}(o.EventType||(o.EventType={})),function(e){e[e.NOT_BEGIN=1]="NOT_BEGIN",e[e.CHOICE_LANDLORD=2]="CHOICE_LANDLORD",e[e.DEAL=3]="DEAL",e[e.BET=4]="BET",e[e.SHOW_DOWN=5]="SHOW_DOWN",e[e.FINISHED=6]="FINISHED"}(o.RaceState||(o.RaceState={})),function(e){e[e.PLAY_BUTTON_EVENT=1]="PLAY_BUTTON_EVENT",e[e.LOCAL_BE_LANDLORD_RESULT=2]="LOCAL_BE_LANDLORD_RESULT",e[e.ROLL_DICE_FINISHED_NOTICE=3]="ROLL_DICE_FINISHED_NOTICE",e[e.DELIVERY_CARD_FINISHED_NOTICE=4]="DELIVERY_CARD_FINISHED_NOTICE",e[e.OPEN_CARD_FINISHED_NOTICE=5]="OPEN_CARD_FINISHED_NOTICE",e[e.SHOW_DOWN_ANIMATION_FINISHED_NOTICE=6]="SHOW_DOWN_ANIMATION_FINISHED_NOTICE",e[e.OPEN_CARD_REQUEST_NOTICE=7]="OPEN_CARD_REQUEST_NOTICE",e[e.LOCAL_TIME_XIAZHU_FINISHED_NOTICE=8]="LOCAL_TIME_XIAZHU_FINISHED_NOTICE",e[e.TO_LOBBY_EVENT=10]="TO_LOBBY_EVENT",e[e.BACK_MUSIC_STATE_CHANGE_NOTICE=11]="BACK_MUSIC_STATE_CHANGE_NOTICE",e[e.TO_SHOW_START_BUTTON=12]="TO_SHOW_START_BUTTON",e[e.SOCKET_CONNECT_NOTICE=13]="SOCKET_CONNECT_NOTICE",e[e.DIAMOND_COUNT_CHANGE=14]="DIAMOND_COUNT_CHANGE",e[e.PLAY_AUDIO_LOCAL_NOTICE=15]="PLAY_AUDIO_LOCAL_NOTICE",e[e.PLAY_AUDIO_NOT_SUPPORT=16]="PLAY_AUDIO_NOT_SUPPORT",e[e.OPEN_IMMEDIATELY=17]="OPEN_IMMEDIATELY",e[e.VISIT_ENTER_ROOM=18]="VISIT_ENTER_ROOM",e[e.TURN_LANDLORD_LOCAL_NOTICE=19]="TURN_LANDLORD_LOCAL_NOTICE"}(o.LocalNoticeEventType||(o.LocalNoticeEventType={})),o.chipPoint={sky:{left:{x:-277,y:81},right:{x:-151,y:81}},land:{left:{x:151,y:79},right:{x:285,y:79}},middle:{left:{x:-66,y:-64},right:{x:69,y:-64}},bridg:{left:{x:-60,y:79},right:{x:65,y:79}},skyCorner:{left:{x:-246,y:-16},right:{x:-149,y:-16}},landCorner:{left:{x:148,y:-31},right:{x:240,y:-31}}},function(e){e[e.DUI_ZI=1]="DUI_ZI",e[e.BI_SHI=2]="BI_SHI",e[e.DIAN=3]="DIAN",e[e.ER_BA_GANG=4]="ER_BA_GANG"}(o.MajhongValueType||(o.MajhongValueType={})),function(e){e[e.PLAYER=1]="PLAYER",e[e.VISITOR=2]="VISITOR",e[e.LIMIT=3]="LIMIT",e[e.MANAGE=4]="MANAGE"}(o.gameMemberType||(o.gameMemberType={})),function(e){e[e.OnLine=1]="OnLine",e[e.OffLine=2]="OffLine",e[e.KickOut=3]="KickOut"}(o.memberState||(o.memberState={})),function(e){e[e.TURN=1]="TURN",e[e.RAP=2]="RAP"}(o.playMode||(o.playMode={})),function(e){e[e.SUCCESS=1]="SUCCESS",e[e.FAIL=0]="FAIL"}(o.ResponseStatus||(o.ResponseStatus={})),function(e){e[e.AA=1]="AA",e[e.DAI_KAI=2]="DAI_KAI"}(o.CreateRoomPayModel||(o.CreateRoomPayModel={})),function(e){e.BIG="w",e.SMALL="s",e.EQ="e"}(o.CompareDxRe||(o.CompareDxRe={})),function(e){e[e.NUMBER_PANEL=1]="NUMBER_PANEL",e[e.SHARE=2]="SHARE",e[e.CREATE_ROOM=3]="CREATE_ROOM",e[e.EMULATOR_ROOM=4]="EMULATOR_ROOM"}(o.EnterRoomModel||(o.EnterRoomModel={})),function(e){e.param_error="\u53c2\u6570\u9519\u8bef",e.user_not_exist="\u7528\u6237\u4e0d\u5b58\u5728",e.room_not_exist="\u623f\u95f4\u4e0d\u5b58\u5728",e.room_not_open_state="\u6e38\u620f\u5df2\u5f00\u59cb\uff0c\u65e0\u6cd5\u8fdb\u5165",e.diamond_not_enough="\u94bb\u6570\u91cf\u4e0d\u591f\uff0c\u8bf7\u5145\u503c",e.member_count_limit="\u623f\u95f4\u5df2\u6ee1\uff0c\u65e0\u6cd5\u8fdb\u5165",e.room_close="\u623f\u95f4\u5df2\u5173\u95ed",e.in_room_fail="\u8fdb\u5165\u623f\u95f4\u5f02\u5e38",e.interface_fail="\u63a5\u53e3\u8bf7\u6c42\u5f02\u5e38",e.has_kickout="\u65e0\u6cd5\u8fdb\u5165\u8be5\u623f\u95f4",e.has_playing="\u6e38\u620f\u5df2\u5f00\u59cb\uff0c\u65e0\u6cd5\u8fdb\u5165",e.account_error="\u8d26\u53f7\u5f02\u5e38\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55\uff01",e.net_fail_reload="\u7f51\u7edc\u5f02\u5e38\u8bf7\u91cd\u65b0\u52a0\u8f7d\u6e38\u620f\uff01"}(o.EnterRoomFail||(o.EnterRoomFail={})),function(e){e.back_to_lobby="\u9000\u51fa\u5f53\u524d\u6e38\u620f\uff1f",e.over_bet_limit="\u8d85\u51fa\u4e0b\u6ce8\u4e0a\u9650\uff01",e.out_app="\u9000\u51fa\u5f53\u524d\u5e94\u7528\uff1f",e.cheat_open="\u4f5c\u5f0a\u5f00\u5173\u88ab\u6253\u5f00",e.out_action_tip="\u8bf7\u70b9\u51fb\u9875\u9762\u5de6\u4e0b\u65b9\u7684 x \u6216\u8005 -> \u9000\u51fa\u5e94\u7528\uff01",e.login_page_action_tip="\u662f\u5426\u9000\u51fa\u5230\u767b\u5f55\u9875\u9762\uff1f",e.audio_not_support="\u8bed\u97f3\u5931\u8d25\uff0c\u5f55\u97f3\u6743\u9650\u672a\u5f00\u542f\uff01"}(o.WordMessage||(o.WordMessage={})),function(e){e.param_error="\u53c2\u6570\u9519\u8bef",e.interface_fail="\u63a5\u53e3\u8bf7\u6c42\u5f02\u5e38",e.user_not_exist="\u7528\u6237\u4e0d\u5b58\u5728",e.diamond_not_enough="\u94bb\u4f59\u989d\u4e0d\u8db3",e.race_error="\u6bd4\u8d5b\u521b\u5efa\u5931\u8d25",e.cash_error="\u94bb\u6263\u9664\u5931\u8d25",e.faill="\u623f\u95f4\u521b\u5efa\u5931\u8d25"}(o.CreateRoomFail||(o.CreateRoomFail={})),function(e){e.startRoomGame="startRoomGame",e.landlordSelected="landlordSelected",e.voicePlay="audioPlayNotice",e.enterRoom="enterRoom",e.raceBet="raceBet",e.kickOutMemberFromRoom="kickOutMemberFromRoom",e.chatCartonMessage="chatCartonMessage",e.sureBeLandlordInTurn="sureBeLandlordInTurn",e.cancelRaceBet="cancelRaceBet"}(o.NoticeType||(o.NoticeType={})),o.InterfaceUrl={CREATE_ROOM:"/race/room/create_room",LOGIN_IN_ROOM:"/race/room/login_in_room",COST_DIAMOND:"/race/user/cost_diamond_in_room",CREATE_VISIT:"/race/user/create_visit_account",GET_CONFIG:"/race/room/get_config",CANCEL_BET:"/race/betrecord/cancel_bet_by_location",GET_ROOM_RESULT:"/race/room/get_room_result",RECHARGE_DIAMOND:"/race/user/recharge_diamond",AUDIO_UPLOAD:"/race/voice/uploadVoice",GET_USER_DIAMOND:"/race/user/get_user_diamond",GET_USER_INFO:"/race/user/get_user_info_by_id",IS_ROOM_EXIST:"/race/room/is_room_exist"},function(e){e[e.SOCKET_CONNECT=1]="SOCKET_CONNECT",e[e.OUT_ROOM=2]="OUT_ROOM",e[e.RECHARGE=3]="RECHARGE",e[e.OUT_TO_LOGIN=4]="OUT_TO_LOGIN",e[e.OUT_TO_REGISTER=5]="OUT_TO_REGISTER",e[e.RE_IN_GAME=6]="RE_IN_GAME",e[e.OUT_TO_LOBBY=7]="OUT_TO_LOBBY",e[e.KICKOUT_MEMBER=8]="KICKOUT_MEMBER",e[e.OUT_APP=9]="OUT_APP",e[e.TURN_LANDLORD_TRUE=10]="TURN_LANDLORD_TRUE"}(o.TipDialogButtonAction||(o.TipDialogButtonAction={})),function(e){e[e.WEN_ZI=1]="WEN_ZI",e[e.PIC=2]="PIC",e[e.QIANG_ZHUANG=3]="QIANG_ZHUANG"}(o.ChatMessageType||(o.ChatMessageType={})),o.ConsoleType={SOCKET:"_socket_",SOCKET_SEND:"_socket_send_",SOCKET_GET:"_socket_get_",INTERfACE:"_interface_",RACE_SCORE:"_race_score_"},cc._RF.pop()},{}],CreateRoomPanel:[function(e,t,o){"use strict";cc._RF.push(t,"41040oqJ1lKYo/quGg1MPu/","CreateRoomPanel");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function a(e){try{s(n.next(e))}catch(e){r(e)}}function c(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):new o(function(t){t(e.value)}).then(a,c)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../common/Const"),s=e("../../store/Room/RoomManage"),u=e("../../store/User/UserManage"),l=e("../../store/Config/ConfigManage"),p=e("loglevel"),d=cc._decorator,h=d.ccclass,f=d.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.createButton=null,t.cancelButton=null,t.closeButton=null,t.renshu_part_one=null,t.renshu_part_two=null,t.renshu_part_three=null,t.daikai_part=null,t.aa_part=null,t.jushu_part_one=null,t.jushu_part_two=null,t.jushu_part_three=null,t.jushu_part_four=null,t.xiazhu_part_one=null,t.xiazhu_part_two=null,t.xiazhu_part_three=null,t.xiazhu_part_four=null,t.renshu_one=null,t.one_renshu_label=null,t.renshu_two=null,t.two_renshu_label=null,t.renshu_three=null,t.three_renshu_label=null,t.jushu_one=null,t.jushu_two=null,t.jushu_three=null,t.jushu_four=null,t.one_jushu_label=null,t.two_jushu_label=null,t.three_jushu_label=null,t.four_jushu_label=null,t.DaiKai=null,t.AA=null,t.QiangzhuangTurn=null,t.QiangzhuangRap=null,t.xiazhu_one=null,t.xiazhu_two=null,t.xiazhu_three=null,t.xiazhu_four=null,t.one_xiazhu_label=null,t.two_xiazhu_label=null,t.three_xiazhu_label=null,t.four_xiazhu_label=null,t.one_jushu_diamond_label=null,t.two_jushu_diamond_label=null,t.three_jushu_diamond_label=null,t.four_jushu_diamond_label=null,t.one_xiazhu_diamond_label=null,t.two_xiazhu_diamond_label=null,t.three_xiazhu_diamond_label=null,t.four_xiazhu_diamond_label=null,t.tipDialog=null,t}return n(t,e),t.prototype.start=function(){this.renshu_one.isChecked=!0,this.jushu_one.isChecked=!0,this.DaiKai.isChecked=!0,this.xiazhu_one.isChecked=!0,this.QiangzhuangTurn.isChecked=!0},t.prototype.setShow=function(){this.one_renshu_label.string=this.creatDiamondConfig.roomPeople.one.peoplecount+"\u4eba",this.two_renshu_label.string=this.creatDiamondConfig.roomPeople.two.peoplecount+"\u4eba",this.three_renshu_label.string=this.creatDiamondConfig.roomPeople.three.peoplecount+"\u4eba",this.one_jushu_label.string=this.creatDiamondConfig.totalRace.one.raceCount+"\u5c40",this.two_jushu_label.string=this.creatDiamondConfig.totalRace.two.raceCount+"\u5c40",this.three_jushu_label.string=this.creatDiamondConfig.totalRace.three.raceCount+"\u5c40",this.four_jushu_label.string=this.creatDiamondConfig.totalRace.four.raceCount+"\u5c40",this.one_xiazhu_label.string=this.creatDiamondConfig.betLimit.one.limitVal+"",this.two_xiazhu_label.string=this.creatDiamondConfig.betLimit.two.limitVal+"",this.three_xiazhu_label.string=this.creatDiamondConfig.betLimit.three.limitVal+"",this.four_xiazhu_label.string=this.creatDiamondConfig.betLimit.four.limitVal+"",this.setJuShuDiamondShow(c.CreateRoomPayModel.DAI_KAI),this.setXiaZhuDiamondShow(c.CreateRoomPayModel.DAI_KAI)},t.prototype.setJuShuDiamondShow=function(e){e==c.CreateRoomPayModel.AA?(this.one_jushu_diamond_label.string=this.creatDiamondConfig.totalRace.one.aaDiamond+"",this.two_jushu_diamond_label.string=this.creatDiamondConfig.totalRace.two.aaDiamond+"",this.three_jushu_diamond_label.string=this.creatDiamondConfig.totalRace.three.aaDiamond+"",this.four_jushu_diamond_label.string=this.creatDiamondConfig.totalRace.four.aaDiamond+""):(this.one_jushu_diamond_label.string=this.creatDiamondConfig.totalRace.one.daiKaiDiamond+"",this.two_jushu_diamond_label.string=this.creatDiamondConfig.totalRace.two.daiKaiDiamond+"",this.three_jushu_diamond_label.string=this.creatDiamondConfig.totalRace.three.daiKaiDiamond+"",this.four_jushu_diamond_label.string=this.creatDiamondConfig.totalRace.four.daiKaiDiamond+"")},t.prototype.setXiaZhuDiamondShow=function(e){e==c.CreateRoomPayModel.AA?(this.one_xiazhu_diamond_label.string=this.creatDiamondConfig.betLimit.one.aaRate+"\u500d",this.two_xiazhu_diamond_label.string=this.creatDiamondConfig.betLimit.two.aaRate+"\u500d",this.three_xiazhu_diamond_label.string=this.creatDiamondConfig.betLimit.three.aaRate+"\u500d",this.four_xiazhu_diamond_label.string=this.creatDiamondConfig.betLimit.four.aaRate+"\u500d"):(this.one_xiazhu_diamond_label.string=this.creatDiamondConfig.betLimit.one.daiKaiRate+"\u500d",this.two_xiazhu_diamond_label.string=this.creatDiamondConfig.betLimit.two.daiKaiRate+"\u500d",this.three_xiazhu_diamond_label.string=this.creatDiamondConfig.betLimit.three.daiKaiRate+"\u500d",this.four_xiazhu_diamond_label.string=this.creatDiamondConfig.betLimit.four.daiKaiRate+"\u500d")},t.prototype.onEnable=function(){var e=this;this.closeButton.node.on(cc.Node.EventType.TOUCH_END,function(){e.node.destroy()}),this.creatDiamondConfig=l.default.getCreateDiamondConfig(),this.setShow(),this.toggleInit(),this.cancelButton.node.on(cc.Node.EventType.TOUCH_END,function(){e.node.destroy()}),this.node.on(cc.Node.EventType.TOUCH_END,function(){e.node.destroy()}),this.createButton.node.on(cc.Node.EventType.TOUCH_END,function(){var t=null,o=null,n=null,i=null,r=null;if(e.renshu_one.isChecked)t=e.creatDiamondConfig.roomPeople.one.peoplecount;else if(e.renshu_two.isChecked)t=e.creatDiamondConfig.roomPeople.two.peoplecount;else{if(!e.renshu_three.isChecked)return t=null,void p.default.error("\u521b\u5efa\u623f\u95f4\u5931\u8d25\uff0c\u4eba\u6570\u4e0d\u80fd\u4e3a\u7a7a");t=e.creatDiamondConfig.roomPeople.three.peoplecount}if(e.jushu_one.isChecked)o=e.creatDiamondConfig.totalRace.one.raceCount;else if(e.jushu_two.isChecked)o=e.creatDiamondConfig.totalRace.two.raceCount;else if(e.jushu_three.isChecked)o=e.creatDiamondConfig.totalRace.three.raceCount;else{if(!e.jushu_four.isChecked)return o=null,void p.default.error("\u521b\u5efa\u623f\u95f4\u5931\u8d25\uff0c\u5c40\u6570\u4e0d\u80fd\u4e3a\u7a7a");o=e.creatDiamondConfig.totalRace.four.raceCount}if(r=e.QiangzhuangTurn.isChecked?c.playMode.TURN:c.playMode.RAP,e.DaiKai.isChecked)n=c.CreateRoomPayModel.DAI_KAI,e.setJuShuDiamondShow(c.CreateRoomPayModel.DAI_KAI),e.setXiaZhuDiamondShow(c.CreateRoomPayModel.DAI_KAI);else{if(!e.AA.isChecked)return n=null,void p.default.error("\u521b\u5efa\u623f\u95f4\u5931\u8d25\uff0c\u4ed8\u6b3e\u6a21\u5f0f\u4e0d\u80fd\u4e3a\u7a7a");n=c.CreateRoomPayModel.AA,e.setJuShuDiamondShow(c.CreateRoomPayModel.AA),e.setXiaZhuDiamondShow(c.CreateRoomPayModel.AA)}if(e.xiazhu_one.isChecked)i=e.creatDiamondConfig.betLimit.one.limitVal;else if(e.xiazhu_two.isChecked)i=e.creatDiamondConfig.betLimit.two.limitVal;else if(e.xiazhu_three.isChecked)i=e.creatDiamondConfig.betLimit.three.limitVal;else{if(!e.xiazhu_four.isChecked)return i=null,void p.default.error("\u521b\u5efa\u623f\u95f4\u5931\u8d25\uff0c\u4e0b\u6ce8\u4e0a\u9650\u4e0d\u80fd\u4e3a\u7a7a");i=e.creatDiamondConfig.betLimit.four.limitVal}p.default.info("\u521b\u5efa\u4fe1\u606f\uff1a\u4eba\u6570\uff1a",t,",\u5c40\u6570\uff1a",o,",\u4ed8\u6b3e\u6a21\u5f0f:",n,",\u4e0b\u6ce8\u4e0a\u9650\uff1a",i,",\u62a2\u5e84\u6a21\u5f0f\uff1a",r),e.dealCreateRoom(u.default.userInfo.id,t,o,n,i,r)})},t.prototype.dealCreateRoom=function(e,t,o,n,i,l){return r(this,void 0,void 0,function(){var r,d;return a(this,function(a){switch(a.label){case 0:return[4,s.default.createRoom(e,t,o,n,i,l)];case 1:return r=a.sent(),p.default.info("\u623f\u95f4\u521b\u5efa\u5b8c\u6bd5\u4fe1\u606f\uff1a",r),r.result===c.ResponseStatus.SUCCESS?(d=r.extObject,s.default.setRoomItem(d),this.node.destroy(),s.default.setEnterRoomParam({model:c.EnterRoomModel.CREATE_ROOM,userId:u.default.userInfo.id,roomId:d.id}),p.default.info("start_game_test:\u521b\u5efa\u6210\u529f\uff0c\u8df3\u8f6c\u5230\u623f\u95f4\u9875\u9762\uff0c\u7528\u6237ID:",u.default.userInfo.id,",\u623f\u95f4ID:",d.id),p.default.info("\u8fdb\u5165\u6e38\u620f\u623f\u95f4"),cc.director.loadScene("RollRoomScene"),[2]):(p.default.error("\u623f\u95f4\u521b\u5efa\u5931\u8d25"),this.showCreateRoomFailTip(r.extObject),this.node.destroy(),[2])}})})},t.prototype.showCreateRoomFailTip=function(e){var t=cc.instantiate(this.tipDialog),o=t.getComponent("TipDialog");t.parent=this.node.parent,t.active=!0;var n=c.CreateRoomFail[e.message];"diamond_not_enough"===e.message&&(n="\u94bb\u4f59\u989d\u4e0d\u8db3\uff0c\u8bf7\u70b9\u51fb\u8d2d\u4e70\uff01");var i={sureButtonShow:!0,cancelButtonShow:!0,content:n,cancelButtonAction:null,sureButtonAction:c.TipDialogButtonAction.RECHARGE};o.tipDialogShow(i)},t.prototype.toggleInit=function(){var e=this;this.renshu_one.node.on("toggle",function(){e.renshu_one.isChecked&&(e.renshu_two.isChecked=!1,e.renshu_three.isChecked=!1)},this),this.renshu_two.node.on("toggle",function(){e.renshu_two.isChecked&&(e.renshu_one.isChecked=!1,e.renshu_three.isChecked=!1)},this),this.renshu_three.node.on("toggle",function(){e.renshu_three.isChecked&&(e.renshu_one.isChecked=!1,e.renshu_two.isChecked=!1)},this),this.jushu_one.node.on("toggle",function(){e.jushu_one.isChecked&&(e.jushu_two.isChecked=!1,e.jushu_three.isChecked=!1,e.jushu_four.isChecked=!1)},this),this.jushu_two.node.on("toggle",function(){e.jushu_two.isChecked&&(e.jushu_one.isChecked=!1,e.jushu_three.isChecked=!1,e.jushu_four.isChecked=!1)},this),this.jushu_three.node.on("toggle",function(){e.jushu_three.isChecked&&(e.jushu_one.isChecked=!1,e.jushu_two.isChecked=!1,e.jushu_four.isChecked=!1)},this),this.jushu_four.node.on("toggle",function(){e.jushu_four.isChecked&&(e.jushu_one.isChecked=!1,e.jushu_two.isChecked=!1,e.jushu_three.isChecked=!1)},this),this.DaiKai.node.on("toggle",function(){e.DaiKai.isChecked&&(e.AA.isChecked=!1,e.setJuShuDiamondShow(c.CreateRoomPayModel.DAI_KAI),e.setXiaZhuDiamondShow(c.CreateRoomPayModel.DAI_KAI))},this),this.AA.node.on("toggle",function(){e.AA.isChecked&&(e.DaiKai.isChecked=!1,e.setJuShuDiamondShow(c.CreateRoomPayModel.AA),e.setXiaZhuDiamondShow(c.CreateRoomPayModel.AA))},this),this.xiazhu_one.node.on("toggle",function(){e.xiazhu_one.isChecked&&(e.xiazhu_two.isChecked=!1,e.xiazhu_three.isChecked=!1,e.xiazhu_four.isChecked=!1)},this),this.xiazhu_two.node.on("toggle",function(){e.xiazhu_two.isChecked&&(e.xiazhu_one.isChecked=!1,e.xiazhu_three.isChecked=!1,e.xiazhu_four.isChecked=!1)},this),this.xiazhu_three.node.on("toggle",function(){e.xiazhu_three.isChecked&&(e.xiazhu_one.isChecked=!1,e.xiazhu_two.isChecked=!1,e.xiazhu_four.isChecked=!1)},this),this.xiazhu_four.node.on("toggle",function(){e.xiazhu_four.isChecked&&(e.xiazhu_one.isChecked=!1,e.xiazhu_two.isChecked=!1,e.xiazhu_three.isChecked=!1)},this),this.renshu_part_one.on(cc.Node.EventType.TOUCH_END,function(){e.renshu_one.isChecked=!0,e.renshu_two.isChecked=!1,e.renshu_three.isChecked=!1},this),this.renshu_part_two.on(cc.Node.EventType.TOUCH_END,function(){e.renshu_two.isChecked=!0,e.renshu_one.isChecked=!1,e.renshu_three.isChecked=!1},this),this.renshu_part_three.on(cc.Node.EventType.TOUCH_END,function(){e.renshu_three.isChecked=!0,e.renshu_one.isChecked=!1,e.renshu_two.isChecked=!1},this),this.jushu_part_one.on(cc.Node.EventType.TOUCH_END,function(){e.jushu_one.isChecked=!0,e.jushu_two.isChecked=!1,e.jushu_three.isChecked=!1,e.jushu_four.isChecked=!1},this),this.jushu_part_two.on(cc.Node.EventType.TOUCH_END,function(){e.jushu_two.isChecked=!0,e.jushu_one.isChecked=!1,e.jushu_three.isChecked=!1,e.jushu_four.isChecked=!1},this),this.jushu_part_three.on(cc.Node.EventType.TOUCH_END,function(){e.jushu_three.isChecked=!0,e.jushu_one.isChecked=!1,e.jushu_two.isChecked=!1,e.jushu_four.isChecked=!1},this),this.jushu_part_four.on(cc.Node.EventType.TOUCH_END,function(){e.jushu_four.isChecked=!0,e.jushu_one.isChecked=!1,e.jushu_two.isChecked=!1,e.jushu_three.isChecked=!1},this),this.daikai_part.on(cc.Node.EventType.TOUCH_END,function(){e.DaiKai.isChecked=!0,e.AA.isChecked=!1,e.setJuShuDiamondShow(c.CreateRoomPayModel.DAI_KAI),e.setXiaZhuDiamondShow(c.CreateRoomPayModel.DAI_KAI)},this),this.aa_part.on(cc.Node.EventType.TOUCH_END,function(){e.AA.isChecked=!0,e.DaiKai.isChecked=!1,e.setJuShuDiamondShow(c.CreateRoomPayModel.AA),e.setXiaZhuDiamondShow(c.CreateRoomPayModel.AA)},this),this.xiazhu_part_one.on(cc.Node.EventType.TOUCH_END,function(){e.xiazhu_one.isChecked=!0,e.xiazhu_two.isChecked=!1,e.xiazhu_three.isChecked=!1,e.xiazhu_four.isChecked=!1},this),this.xiazhu_part_two.on(cc.Node.EventType.TOUCH_END,function(){e.xiazhu_two.isChecked=!0,e.xiazhu_one.isChecked=!1,e.xiazhu_three.isChecked=!1,e.xiazhu_four.isChecked=!1},this),this.xiazhu_part_three.on(cc.Node.EventType.TOUCH_END,function(){e.xiazhu_three.isChecked=!0,e.xiazhu_one.isChecked=!1,e.xiazhu_two.isChecked=!1,e.xiazhu_four.isChecked=!1},this),this.xiazhu_part_four.on(cc.Node.EventType.TOUCH_END,function(){e.xiazhu_four.isChecked=!0,e.xiazhu_one.isChecked=!1,e.xiazhu_two.isChecked=!1,e.xiazhu_three.isChecked=!1},this)},i([f(cc.Button)],t.prototype,"createButton",void 0),i([f(cc.Button)],t.prototype,"cancelButton",void 0),i([f(cc.Sprite)],t.prototype,"closeButton",void 0),i([f(cc.Node)],t.prototype,"renshu_part_one",void 0),i([f(cc.Node)],t.prototype,"renshu_part_two",void 0),i([f(cc.Node)],t.prototype,"renshu_part_three",void 0),i([f(cc.Node)],t.prototype,"daikai_part",void 0),i([f(cc.Node)],t.prototype,"aa_part",void 0),i([f(cc.Node)],t.prototype,"jushu_part_one",void 0),i([f(cc.Node)],t.prototype,"jushu_part_two",void 0),i([f(cc.Node)],t.prototype,"jushu_part_three",void 0),i([f(cc.Node)],t.prototype,"jushu_part_four",void 0),i([f(cc.Node)],t.prototype,"xiazhu_part_one",void 0),i([f(cc.Node)],t.prototype,"xiazhu_part_two",void 0),i([f(cc.Node)],t.prototype,"xiazhu_part_three",void 0),i([f(cc.Node)],t.prototype,"xiazhu_part_four",void 0),i([f(cc.Toggle)],t.prototype,"renshu_one",void 0),i([f(cc.Label)],t.prototype,"one_renshu_label",void 0),i([f(cc.Toggle)],t.prototype,"renshu_two",void 0),i([f(cc.Label)],t.prototype,"two_renshu_label",void 0),i([f(cc.Toggle)],t.prototype,"renshu_three",void 0),i([f(cc.Label)],t.prototype,"three_renshu_label",void 0),i([f(cc.Toggle)],t.prototype,"jushu_one",void 0),i([f(cc.Toggle)],t.prototype,"jushu_two",void 0),i([f(cc.Toggle)],t.prototype,"jushu_three",void 0),i([f(cc.Toggle)],t.prototype,"jushu_four",void 0),i([f(cc.Label)],t.prototype,"one_jushu_label",void 0),i([f(cc.Label)],t.prototype,"two_jushu_label",void 0),i([f(cc.Label)],t.prototype,"three_jushu_label",void 0),i([f(cc.Label)],t.prototype,"four_jushu_label",void 0),i([f(cc.Toggle)],t.prototype,"DaiKai",void 0),i([f(cc.Toggle)],t.prototype,"AA",void 0),i([f(cc.Toggle)],t.prototype,"QiangzhuangTurn",void 0),i([f(cc.Toggle)],t.prototype,"QiangzhuangRap",void 0),i([f(cc.Toggle)],t.prototype,"xiazhu_one",void 0),i([f(cc.Toggle)],t.prototype,"xiazhu_two",void 0),i([f(cc.Toggle)],t.prototype,"xiazhu_three",void 0),i([f(cc.Toggle)],t.prototype,"xiazhu_four",void 0),i([f(cc.Label)],t.prototype,"one_xiazhu_label",void 0),i([f(cc.Label)],t.prototype,"two_xiazhu_label",void 0),i([f(cc.Label)],t.prototype,"three_xiazhu_label",void 0),i([f(cc.Label)],t.prototype,"four_xiazhu_label",void 0),i([f(cc.Label)],t.prototype,"one_jushu_diamond_label",void 0),i([f(cc.Label)],t.prototype,"two_jushu_diamond_label",void 0),i([f(cc.Label)],t.prototype,"three_jushu_diamond_label",void 0),i([f(cc.Label)],t.prototype,"four_jushu_diamond_label",void 0),i([f(cc.Label)],t.prototype,"one_xiazhu_diamond_label",void 0),i([f(cc.Label)],t.prototype,"two_xiazhu_diamond_label",void 0),i([f(cc.Label)],t.prototype,"three_xiazhu_diamond_label",void 0),i([f(cc.Label)],t.prototype,"four_xiazhu_diamond_label",void 0),i([f(cc.Prefab)],t.prototype,"tipDialog",void 0),t=i([h],t)}(cc.Component);o.default=m,cc._RF.pop()},{"../../common/Const":"Const","../../store/Config/ConfigManage":"ConfigManage","../../store/Room/RoomManage":"RoomManage","../../store/User/UserManage":"UserManage",loglevel:28}],CustomerPanel:[function(e,t,o){"use strict";cc._RF.push(t,"2aa2cdESx1Gi4gFXepcC9qS","CustomerPanel");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../store/Config/ConfigManage"),a=cc._decorator,c=a.ccclass,s=a.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cutomerWechat=null,t.closeButton=null,t}return n(t,e),t.prototype.start=function(){var e=this;this.closeButton.node.on(cc.Node.EventType.TOUCH_END,function(){e.node.destroy()}),this.cutomerWechat.string="\u5ba2\u670d\u5fae\u4fe1\u53f7\uff1a"+r.default.getCustomerWechatNum(),this.node.on(cc.Node.EventType.TOUCH_START,function(){e.node.destroy()})},i([s(cc.Label)],t.prototype,"cutomerWechat",void 0),i([s(cc.Sprite)],t.prototype,"closeButton",void 0),t=i([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../store/Config/ConfigManage":"ConfigManage"}],2:[function(e,t,o){t.exports=e("./lib/axios")},{"./lib/axios":4}],3:[function(e,t,o){"use strict";var n=e("./../utils"),i=e("./../core/settle"),r=e("./../helpers/buildURL"),a=e("./../helpers/parseHeaders"),c=e("./../helpers/isURLSameOrigin"),s=e("../core/createError");t.exports=function(t){return new Promise(function(o,u){var l=t.data,p=t.headers;n.isFormData(l)&&delete p["Content-Type"];var d=new XMLHttpRequest;if(t.auth){var h=t.auth.username||"",f=t.auth.password||"";p.Authorization="Basic "+btoa(h+":"+f)}if(d.open(t.method.toUpperCase(),r(t.url,t.params,t.paramsSerializer),!0),d.timeout=t.timeout,d.onreadystatechange=function(){if(d&&4===d.readyState&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var e="getAllResponseHeaders"in d?a(d.getAllResponseHeaders()):null,n={data:t.responseType&&"text"!==t.responseType?d.response:d.responseText,status:d.status,statusText:d.statusText,headers:e,config:t,request:d};i(o,u,n),d=null}},d.onabort=function(){d&&(u(s("Request aborted",t,"ECONNABORTED",d)),d=null)},d.onerror=function(){u(s("Network Error",t,null,d)),d=null},d.ontimeout=function(){u(s("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",d)),d=null},n.isStandardBrowserEnv()){var m=e("./../helpers/cookies"),y=(t.withCredentials||c(t.url))&&t.xsrfCookieName?m.read(t.xsrfCookieName):void 0;y&&(p[t.xsrfHeaderName]=y)}if("setRequestHeader"in d&&n.forEach(p,function(e,t){void 0===l&&"content-type"===t.toLowerCase()?delete p[t]:d.setRequestHeader(t,e)}),t.withCredentials&&(d.withCredentials=!0),t.responseType)try{d.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&d.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(e){d&&(d.abort(),u(e),d=null)}),void 0===l&&(l=null),d.send(l)})}},{"../core/createError":10,"./../core/settle":14,"./../helpers/buildURL":18,"./../helpers/cookies":20,"./../helpers/isURLSameOrigin":22,"./../helpers/parseHeaders":24,"./../utils":26}],4:[function(e,t,o){"use strict";var n=e("./utils"),i=e("./helpers/bind"),r=e("./core/Axios"),a=e("./core/mergeConfig");function c(e){var t=new r(e),o=i(r.prototype.request,t);return n.extend(o,r.prototype,t),n.extend(o,t),o}var s=c(e("./defaults"));s.Axios=r,s.create=function(e){return c(a(s.defaults,e))},s.Cancel=e("./cancel/Cancel"),s.CancelToken=e("./cancel/CancelToken"),s.isCancel=e("./cancel/isCancel"),s.all=function(e){return Promise.all(e)},s.spread=e("./helpers/spread"),t.exports=s,t.exports.default=s},{"./cancel/Cancel":5,"./cancel/CancelToken":6,"./cancel/isCancel":7,"./core/Axios":8,"./core/mergeConfig":13,"./defaults":16,"./helpers/bind":17,"./helpers/spread":25,"./utils":26}],5:[function(e,t,o){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,t.exports=n},{}],6:[function(e,t,o){"use strict";var n=e("./Cancel");function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var o=this;e(function(e){o.reason||(o.reason=new n(e),t(o.reason))})}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i(function(t){e=t}),cancel:e}},t.exports=i},{"./Cancel":5}],7:[function(e,t,o){"use strict";t.exports=function(e){return!(!e||!e.__CANCEL__)}},{}],8:[function(e,t,o){"use strict";var n=e("./../utils"),i=e("../helpers/buildURL"),r=e("./InterceptorManager"),a=e("./dispatchRequest"),c=e("./mergeConfig");function s(e){this.defaults=e,this.interceptors={request:new r,response:new r}}s.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=c(this.defaults,e)).method=e.method?e.method.toLowerCase():"get";var t=[a,void 0],o=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)o=o.then(t.shift(),t.shift());return o},s.prototype.getUri=function(e){return e=c(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],function(e){s.prototype[e]=function(t,o){return this.request(n.merge(o||{},{method:e,url:t}))}}),n.forEach(["post","put","patch"],function(e){s.prototype[e]=function(t,o,i){return this.request(n.merge(i||{},{method:e,url:t,data:o}))}}),t.exports=s},{"../helpers/buildURL":18,"./../utils":26,"./InterceptorManager":9,"./dispatchRequest":11,"./mergeConfig":13}],9:[function(e,t,o){"use strict";var n=e("./../utils");function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){n.forEach(this.handlers,function(t){null!==t&&e(t)})},t.exports=i},{"./../utils":26}],10:[function(e,t,o){"use strict";var n=e("./enhanceError");t.exports=function(e,t,o,i,r){var a=new Error(e);return n(a,t,o,i,r)}},{"./enhanceError":12}],11:[function(e,t,o){"use strict";var n=e("./../utils"),i=e("./transformData"),r=e("../cancel/isCancel"),a=e("../defaults"),c=e("./../helpers/isAbsoluteURL"),s=e("./../helpers/combineURLs");function u(e){e.cancelToken&&e.cancelToken.throwIfRequested()}t.exports=function(e){return u(e),e.baseURL&&!c(e.url)&&(e.url=s(e.baseURL,e.url)),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),n.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||a.adapter)(e).then(function(t){return u(e),t.data=i(t.data,t.headers,e.transformResponse),t},function(t){return r(t)||(u(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},{"../cancel/isCancel":7,"../defaults":16,"./../helpers/combineURLs":19,"./../helpers/isAbsoluteURL":21,"./../utils":26,"./transformData":15}],12:[function(e,t,o){"use strict";t.exports=function(e,t,o,n,i){return e.config=t,o&&(e.code=o),e.request=n,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},{}],13:[function(e,t,o){"use strict";var n=e("../utils");t.exports=function(e,t){t=t||{};var o={};return n.forEach(["url","method","params","data"],function(e){void 0!==t[e]&&(o[e]=t[e])}),n.forEach(["headers","auth","proxy"],function(i){n.isObject(t[i])?o[i]=n.deepMerge(e[i],t[i]):void 0!==t[i]?o[i]=t[i]:n.isObject(e[i])?o[i]=n.deepMerge(e[i]):void 0!==e[i]&&(o[i]=e[i])}),n.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],function(n){void 0!==t[n]?o[n]=t[n]:void 0!==e[n]&&(o[n]=e[n])}),o}},{"../utils":26}],14:[function(e,t,o){"use strict";var n=e("./createError");t.exports=function(e,t,o){var i=o.config.validateStatus;!i||i(o.status)?e(o):t(n("Request failed with status code "+o.status,o.config,null,o.request,o))}},{"./createError":10}],15:[function(e,t,o){"use strict";var n=e("./../utils");t.exports=function(e,t,o){return n.forEach(o,function(o){e=o(e,t)}),e}},{"./../utils":26}],16:[function(e,t,o){(function(o){"use strict";var n=e("./utils"),i=e("./helpers/normalizeHeaderName"),r={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var c={adapter:function(){var t;return void 0!==o&&"[object process]"===Object.prototype.toString.call(o)?t=e("./adapters/http"):"undefined"!=typeof XMLHttpRequest&&(t=e("./adapters/xhr")),t}(),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(a(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],function(e){c.headers[e]={}}),n.forEach(["post","put","patch"],function(e){c.headers[e]=n.merge(r)}),t.exports=c}).call(this,e("_process"))},{"./adapters/http":3,"./adapters/xhr":3,"./helpers/normalizeHeaderName":23,"./utils":26,_process:1}],17:[function(e,t,o){"use strict";t.exports=function(e,t){return function(){for(var o=new Array(arguments.length),n=0;n<o.length;n++)o[n]=arguments[n];return e.apply(t,o)}}},{}],18:[function(e,t,o){"use strict";var n=e("./../utils");function i(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(e,t,o){if(!t)return e;var r;if(o)r=o(t);else if(n.isURLSearchParams(t))r=t.toString();else{var a=[];n.forEach(t,function(e,t){null!==e&&void 0!==e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e))}))}),r=a.join("&")}if(r){var c=e.indexOf("#");-1!==c&&(e=e.slice(0,c)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}},{"./../utils":26}],19:[function(e,t,o){"use strict";t.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},{}],20:[function(e,t,o){"use strict";var n=e("./../utils");t.exports=n.isStandardBrowserEnv()?{write:function(e,t,o,i,r,a){var c=[];c.push(e+"="+encodeURIComponent(t)),n.isNumber(o)&&c.push("expires="+new Date(o).toGMTString()),n.isString(i)&&c.push("path="+i),n.isString(r)&&c.push("domain="+r),!0===a&&c.push("secure"),document.cookie=c.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},{"./../utils":26}],21:[function(e,t,o){"use strict";t.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},{}],22:[function(e,t,o){"use strict";var n=e("./../utils");t.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");function i(e){var n=e;return t&&(o.setAttribute("href",n),n=o.href),o.setAttribute("href",n),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}return e=i(window.location.href),function(t){var o=n.isString(t)?i(t):t;return o.protocol===e.protocol&&o.host===e.host}}():function(){return!0}},{"./../utils":26}],23:[function(e,t,o){"use strict";var n=e("../utils");t.exports=function(e,t){n.forEach(e,function(o,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=o,delete e[n])})}},{"../utils":26}],24:[function(e,t,o){"use strict";var n=e("./../utils"),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(e){var t,o,r,a={};return e?(n.forEach(e.split("\n"),function(e){if(r=e.indexOf(":"),t=n.trim(e.substr(0,r)).toLowerCase(),o=n.trim(e.substr(r+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([o]):a[t]?a[t]+", "+o:o}}),a):a}},{"./../utils":26}],25:[function(e,t,o){"use strict";t.exports=function(e){return function(t){return e.apply(null,t)}}},{}],26:[function(e,t,o){"use strict";var n=e("./helpers/bind"),i=e("is-buffer"),r=Object.prototype.toString;function a(e){return"[object Array]"===r.call(e)}function c(e){return null!==e&&"object"==typeof e}function s(e){return"[object Function]"===r.call(e)}function u(e,t){if(null!==e&&void 0!==e)if("object"!=typeof e&&(e=[e]),a(e))for(var o=0,n=e.length;o<n;o++)t.call(null,e[o],o,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}t.exports={isArray:a,isArrayBuffer:function(e){return"[object ArrayBuffer]"===r.call(e)},isBuffer:i,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:c,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===r.call(e)},isFile:function(e){return"[object File]"===r.call(e)},isBlob:function(e){return"[object Blob]"===r.call(e)},isFunction:s,isStream:function(e){return c(e)&&s(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:u,merge:function e(){var t={};function o(o,n){"object"==typeof t[n]&&"object"==typeof o?t[n]=e(t[n],o):t[n]=o}for(var n=0,i=arguments.length;n<i;n++)u(arguments[n],o);return t},deepMerge:function e(){var t={};function o(o,n){"object"==typeof t[n]&&"object"==typeof o?t[n]=e(t[n],o):t[n]="object"==typeof o?e({},o):o}for(var n=0,i=arguments.length;n<i;n++)u(arguments[n],o);return t},extend:function(e,t,o){return u(t,function(t,i){e[i]=o&&"function"==typeof t?n(t,o):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},{"./helpers/bind":17,"is-buffer":27}],27:[function(e,t,o){t.exports=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},{}],28:[function(e,t,o){(function(e,o){"use strict";"function"==typeof define&&define.amd?define(o):"object"==typeof t&&t.exports?t.exports=o():e.log=o()})(this,function(){"use strict";var e=function(){},t="undefined",o=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"];function i(e,t){var o=e[t];if("function"==typeof o.bind)return o.bind(e);try{return Function.prototype.bind.call(o,e)}catch(t){return function(){return Function.prototype.apply.apply(o,[e,arguments])}}}function r(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(n){return"debug"===n&&(n="log"),typeof console!==t&&("trace"===n&&o?r:void 0!==console[n]?i(console,n):void 0!==console.log?i(console,"log"):e)}function c(t,o){for(var i=0;i<n.length;i++){var r=n[i];this[r]=i<t?e:this.methodFactory(r,t,o)}this.log=this.debug}function s(e,o,n){return function(){typeof console!==t&&(c.call(this,o,n),this[e].apply(this,arguments))}}function u(e,t,o){return a(e)||s.apply(this,arguments)}function l(e,o,i){var r,a=this,s="loglevel";function l(e){var o=(n[e]||"silent").toUpperCase();if(typeof window!==t&&s){try{return void(window.localStorage[s]=o)}catch(e){}try{window.document.cookie=encodeURIComponent(s)+"="+o+";"}catch(e){}}}function p(){var e;if(typeof window!==t&&s){try{e=window.localStorage[s]}catch(e){}if(typeof e===t)try{var o=window.document.cookie,n=o.indexOf(encodeURIComponent(s)+"=");-1!==n&&(e=/^([^;]+)/.exec(o.slice(n))[1])}catch(e){}return void 0===a.levels[e]&&(e=void 0),e}}"string"==typeof e?s+=":"+e:"symbol"==typeof e&&(s=void 0),a.name=e,a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=i||u,a.getLevel=function(){return r},a.setLevel=function(o,n){if("string"==typeof o&&void 0!==a.levels[o.toUpperCase()]&&(o=a.levels[o.toUpperCase()]),!("number"==typeof o&&o>=0&&o<=a.levels.SILENT))throw"log.setLevel() called with invalid level: "+o;if(r=o,!1!==n&&l(o),c.call(a,o,e),typeof console===t&&o<a.levels.SILENT)return"No console available for logging"},a.setDefaultLevel=function(e){p()||a.setLevel(e,!1)},a.enableAll=function(e){a.setLevel(a.levels.TRACE,e)},a.disableAll=function(e){a.setLevel(a.levels.SILENT,e)};var d=p();null==d&&(d=null==o?"WARN":o),a.setLevel(d,!1)}var p=new l,d={};p.getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=d[e];return t||(t=d[e]=new l(e,p.getLevel(),p.methodFactory)),t};var h=typeof window!==t?window.log:void 0;return p.noConflict=function(){return typeof window!==t&&window.log===p&&(window.log=h),p},p.getLoggers=function(){return d},p.default=p,p})},{}],DealMachineBase:[function(e,t,o){"use strict";cc._RF.push(t,"a58f14UNl5O27sCylOSqQ0W","DealMachineBase"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../common/Const");o.getLocationByLocaitonType=function(e){var t;switch(e){case n.TableLocationType.LAND:t={x:218,y:136};break;case n.TableLocationType.LANDLORD:t={x:2.5,y:148};break;case n.TableLocationType.MIDDLE:t={x:-2.5,y:-15};break;case n.TableLocationType.SKY:t={x:-216,y:140}}return t},o.getCircleListByLocationType=function(e){switch(e){case n.TableLocationType.LAND:return[n.TableLocationType.LAND,n.TableLocationType.LANDLORD,n.TableLocationType.SKY,n.TableLocationType.MIDDLE];case n.TableLocationType.LANDLORD:return[n.TableLocationType.LANDLORD,n.TableLocationType.SKY,n.TableLocationType.MIDDLE,n.TableLocationType.LAND];case n.TableLocationType.MIDDLE:return[n.TableLocationType.MIDDLE,n.TableLocationType.LAND,n.TableLocationType.LANDLORD,n.TableLocationType.SKY];case n.TableLocationType.SKY:return[n.TableLocationType.SKY,n.TableLocationType.MIDDLE,n.TableLocationType.LAND,n.TableLocationType.LANDLORD]}},cc._RF.pop()},{"../../common/Const":"Const"}],DealMachine:[function(e,t,o){"use strict";cc._RF.push(t,"fffcb+DuS5HK5akxnZAtov3","DealMachine");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,s=e("../../common/Const"),u=e("./DealMachineBase"),l=e("../../common/EventBus"),p=e("../../common/Const"),d=e("../../store/Config/ConfigManage"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mahjongs=null,t.mjDouble=null,t.mahjongList=[],t.mjIndex=-1,t.mahongLong=20,t.mahjongShowKeepTime=.8,t.flyTime={sky:.6,middle:.6,land:.4,landlord:.5},t.mahjongNameList=[],t.fapaiVoice=null,t}return n(t,e),t.prototype.onEnable=function(){this.initTime(),this.initMaj()},t.prototype.initTime=function(){var e=Math.floor(d.default.getDealTime()/(this.mahjongShowKeepTime+this.flyTime.sky+this.flyTime.middle+this.flyTime.land+this.flyTime.landlord)*100)/100;this.mahjongShowKeepTime=e*this.mahjongShowKeepTime,this.flyTime.sky=e*this.flyTime.sky,this.flyTime.middle=e*this.flyTime.middle,this.flyTime.land=e*this.flyTime.land,this.flyTime.landlord=e*this.flyTime.landlord},t.prototype.initMaj=function(){this.mjIndex=-1;for(var e=this.node.getChildByName("Layout"),t=0;t<this.mahongLong;t++){var o=cc.instantiate(this.mahjongs);o.parent=e,o.setPosition(0,0),o.active=!0,this.mahjongList.push(o)}this.mahjongNameList.push({locationType:s.TableLocationType.LAND,name:"MjDouble"+s.TableLocationType.LAND,location:u.getLocationByLocaitonType(s.TableLocationType.LAND)}),this.mahjongNameList.push({locationType:s.TableLocationType.LANDLORD,name:"MjDouble"+s.TableLocationType.LANDLORD,location:u.getLocationByLocaitonType(s.TableLocationType.LANDLORD)}),this.mahjongNameList.push({locationType:s.TableLocationType.SKY,name:"MjDouble"+s.TableLocationType.SKY,location:u.getLocationByLocaitonType(s.TableLocationType.SKY)}),this.mahjongNameList.push({locationType:s.TableLocationType.MIDDLE,name:"MjDouble"+s.TableLocationType.MIDDLE,location:u.getLocationByLocaitonType(s.TableLocationType.MIDDLE)})},t.prototype.deal=function(e){var t=0,o=u.getCircleListByLocationType(e);++this.mjIndex,this.flyAnimation(this.mjIndex,o[t],function e(){++t>=4?this.scheduleOnce(function(){l.eventBus.emit(p.EventType.LOCAL_NOTICE_EVENT,{type:p.LocalNoticeEventType.DELIVERY_CARD_FINISHED_NOTICE})},this.mahjongShowKeepTime):(++this.mjIndex,this.flyAnimation(this.mjIndex,o[t],e))})},t.prototype.reSetMahjong=function(){for(var e=0;e<this.mahongLong;e++){var t=this.mahjongList[e];t.getChildByName("One").active=!0,t.getChildByName("Two").active=!0}this.mjIndex=0},t.prototype.checkAndAddMajong=function(){var e=this;this.mahjongNameList.forEach(function(t){var o=cc.find("Canvas/Desk").getChildByName(t.name);o||((o=cc.instantiate(e.mjDouble)).name=t.name,o.parent=cc.find("Canvas/Desk"),o.setPosition(t.location.x,t.location.y))})},t.prototype.cleanMajong=function(){this.mahjongNameList.forEach(function(e){var t=cc.find("Canvas/Desk").getChildByName(e.name);t&&t.destroy()})},t.prototype.flyAnimation=function(e,t,o){if(!(this.mahjongList.length<=0)){if(this.mjIndex>=this.mahjongList.length-1)return this.reSetMahjong(),void this.flyAnimation(this.mjIndex,t,o);var n="MjDouble"+t,i=cc.find("Canvas/Desk").getChildByName(n);i&&i.destroy();var r=this.mahjongList[this.mjIndex];r.getChildByName("One").active=!1,r.getChildByName("Two").active=!1;var a=cc.instantiate(this.mjDouble);a.name=n,a.parent=cc.find("Canvas/Desk"),a.setPosition(320,207);var c=u.getLocationByLocaitonType(t),s=this.flyTime[t],l=cc.moveTo(s,c.x,c.y),p=cc.sequence(l,cc.callFunc(o,this));d.default.isTxMusicOpen()&&this.fapaiVoice.play(),a.runAction(p)}},t.prototype.start=function(){},i([c(cc.Prefab)],t.prototype,"mahjongs",void 0),i([c(cc.Prefab)],t.prototype,"mjDouble",void 0),i([c(cc.AudioSource)],t.prototype,"fapaiVoice",void 0),t=i([a],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../common/Const":"Const","../../common/EventBus":"EventBus","../../store/Config/ConfigManage":"ConfigManage","./DealMachineBase":"DealMachineBase"}],DeskPart:[function(e,t,o){"use strict";cc._RF.push(t,"f9287FWOLxBfa55Jd60aKTu","DeskPart");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("loglevel"),a=cc._decorator,c=a.ccclass,s=a.property,u=e("../../common/Const"),l=e("../../store/Races/RaceManage"),p=e("../../store/Room/RoomManage"),d=e("../../store/User/UserManage"),h=e("../../store/Bets/BetManage"),f=e("../../common/WebSocketManage"),m=e("../../store/Config/ConfigManage"),y=e("../../common/Util"),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.focus=null,t.cancelChipAn=null,t.typeValue="",t.bg=null,t.scorePanel=null,t.overBetLimitVoice=null,t.chipCancelVoice=null,t.betScore=null,t.ownScore=0,t.allScore=0,t.touchLock=!1,t.overBetLimitLock=!1,t.isBetCanceling=!1,t.scheduleOb=null,t}return n(t,e),t.prototype.start=function(){this.toClearn()},t.prototype.onEnable=function(){this.addClickEvent()},t.prototype.toBet=function(e){var t=e.userId,o=e.betLocation,n=e.toValue-e.fromVal;this.typeValue===o&&(this.allScore=this.allScore+n,d.default.userInfo.id===t&&(this.ownScore=this.ownScore+n),this.isLandlord()?this.betScore.string=this.allScore+"":this.betScore.string=this.ownScore+" / "+this.allScore)},t.prototype.toClearn=function(){this.bg.node.active=!1,this.focus.node.active=!1,this.betScore.string="",this.ownScore=0,this.allScore=0,this.unschedule(this.scheduleOb)},t.prototype.toOpen=function(){this.scorePanel.active=!0,this.bg.node.active=!0,this.focus.node.active=!1,this.ownScore=0,this.allScore=0,this.isLandlord()?this.betScore.string="0":this.betScore.string="0 / 0"},t.prototype.isLandlord=function(){var e=p.default.roomItem.oningRaceNum;return d.default.userInfo.id===l.default.raceList[e].landlordId},t.prototype.winFocusAmination=function(){var e=this,t=this.typeValue+"Result",o=p.default.roomItem.oningRaceNum;if(l.default.raceList[o][t]===u.CompareDxRe.BIG){this.focus.node.active=!0;var n=150;this.focus.node.opacity=n,this.scheduleOb=this.schedule(function(){n=150===n?255:150,e.focus.node.opacity=n},.8)}},t.prototype.getDistance=function(e,t,o,n){var i=e*Math.PI/180,r=o*Math.PI/180,a=i-r,c=t*Math.PI/180-n*Math.PI/180,s=2*Math.asin(Math.sqrt(Math.pow(Math.sin(a/2),2)+Math.cos(i)*Math.cos(r)*Math.pow(Math.sin(c/2),2)));return s*=6378.137,s=Math.round(1e4*s)/1e4},t.prototype.showCancelChipAn=function(){var e=cc.instantiate(this.cancelChipAn);e.parent=this.node,e.setPosition(0,0),e.active=!0},t.prototype.betCancel=function(e){this.typeValue==e.betLocation&&(e.userId==d.default.userInfo.id&&(this.ownScore-=e.fromVal),this.allScore-=e.fromVal,this.isLandlord()?this.betScore.string=this.allScore+"":this.betScore.string=this.ownScore+" / "+this.allScore)},t.prototype.isNeedToCancel=function(e){if(!y.touchMoveEvent(e))return!1;if(this.isBetCanceling||0==this.ownScore)return!1;var t=p.default.roomItem.oningRaceNum;return l.default.raceList[t].state===u.RaceState.BET&&!this.isOverBetTime()},t.prototype.isCanBet=function(){return null==d.default.getUserInfoInRoom()||d.default.getUserInfoInRoom().roleType!=u.gameMemberType.VISITOR||(r.default.error("\u6e38\u5ba2\u4e0d\u80fd\u70b9\u684c\u5b50\u4e0b\u6ce8"),!1)},t.prototype.addClickEvent=function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){if(e.isCanBet()&&e.isNeedToCancel(t)){var o=e.typeValue,n=p.default.roomItem.oningRaceNum,i={userId:d.default.userInfo.id,raceNum:n,betLocation:o},r=h.default.getBetByLocation(i),a=l.default.getClickXiaZhuVal(),c=p.default.getEnterRoomParam(),s=a-r;if(e.isBetCanceling=!0,e.showCancelChipAn(),c.model===u.EnterRoomModel.EMULATOR_ROOM)return h.default.cancelBet(i),m.default.isTxMusicOpen()&&e.chipCancelVoice.play(),l.default.setClickXiaZhuVal(s),void e.scheduleOnce(function(){e.isBetCanceling=!1},.5);var y={roomId:p.default.roomItem.id,raceNum:p.default.roomItem.oningRaceNum,betLocation:e.typeValue,userId:d.default.userInfo.id,betVal:-1*r},g={type:u.NoticeType.raceBet,info:y};f.default.send(JSON.stringify(g)),m.default.isTxMusicOpen()&&e.chipCancelVoice.play(),e.scheduleOnce(function(){e.isBetCanceling=!1},1)}}),this.node.on(cc.Node.EventType.TOUCH_START,function(){if(e.isCanBet()&&!e.touchLock){var t=p.default.roomItem.oningRaceNum;l.default.raceList[t].state===u.RaceState.BET&&l.default.raceList[t].landlordId!==d.default.userInfo.id&&(e.focus.node.active=!0)}}),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(t){e.isCanBet()&&(e.focus.node.active=!1)}),this.node.on(cc.Node.EventType.TOUCH_END,function(t){if(e.isCanBet()&&(e.focus.node.active=!1,!(y.touchMoveEvent(t)||(e.focus.node.active=!1,e.touchLock||e.overBetLimitLock||e.isBetCanceling)))){e.scheduleOnce(function(){e.touchLock=!1},.15);var o=p.default.roomItem.oningRaceNum;if(l.default.raceList[o].state===u.RaceState.BET)if(l.default.raceList[o].landlordId!==d.default.userInfo.id){if(!e.isOverBetTime()){var n=p.default.roomItem.costLimit,i=l.default.getClickXiaZhuVal();if(i+d.default.selectChipValue>n)return e.overBetLimitLock=!0,e.scheduleOnce(function(){e.overBetLimitLock=!1},2),m.default.isTxMusicOpen()&&e.overBetLimitVoice.play(),void cc.find("Canvas/Desk").getComponent("Desk").showDeskMiddleTip(u.WordMessage.over_bet_limit);l.default.setClickXiaZhuVal(i+d.default.selectChipValue);var a=p.default.getEnterRoomParam(),c={roomId:p.default.roomItem.id,raceNum:p.default.roomItem.oningRaceNum,betLocation:e.typeValue,userId:d.default.userInfo.id,betVal:d.default.selectChipValue};if(a.model===u.EnterRoomModel.EMULATOR_ROOM)h.default.addBet(c.raceNum,c.userId,c.betLocation,c.betVal);else{var s={type:u.NoticeType.raceBet,info:c};f.default.send(JSON.stringify(s))}}}else r.default.info("\u5730\u4e3b\u4e0d\u80fd\u4e0b\u6ce8");else r.default.info("\u5f53\u524d\u4e0d\u662f\u4e0b\u6ce8\u73af\u8282\uff0c\u4e0d\u80fd\u4e0b\u6ce8")}})},t.prototype.isOverBetTime=function(){return cc.find("Canvas/Desk/MiddleTopTimePanel").getComponent("MiddleTopTimePanel").getShowTime()<=1},i([s(cc.Sprite)],t.prototype,"focus",void 0),i([s(cc.Prefab)],t.prototype,"cancelChipAn",void 0),i([s],t.prototype,"typeValue",void 0),i([s(cc.Sprite)],t.prototype,"bg",void 0),i([s(cc.Node)],t.prototype,"scorePanel",void 0),i([s(cc.AudioSource)],t.prototype,"overBetLimitVoice",void 0),i([s(cc.AudioSource)],t.prototype,"chipCancelVoice",void 0),i([s(cc.Label)],t.prototype,"betScore",void 0),t=i([c],t)}(cc.Component);o.default=g,cc._RF.pop()},{"../../common/Const":"Const","../../common/Util":"Util","../../common/WebSocketManage":"WebSocketManage","../../store/Bets/BetManage":"BetManage","../../store/Config/ConfigManage":"ConfigManage","../../store/Races/RaceManage":"RaceManage","../../store/Room/RoomManage":"RoomManage","../../store/User/UserManage":"UserManage",loglevel:28}],Desk:[function(e,t,o){"use strict";cc._RF.push(t,"b9807oJkylDGZA88itrud6Y","Desk");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,s=e("../../store/GameMember/GameMemberManage"),u=e("../../common/Const"),l=e("../../common/EventBus"),p=e("../../common/Util"),d=e("../../store/Races/RaceManage"),h=e("../../store/Room/RoomManage"),f=e("./ChairManage"),m=e("../DealMachine/DealMachineBase"),y=e("../../store/Config/ConfigManage"),g=e("loglevel"),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playUserIcon=null,t.deskBg=null,t.middleResultWenZi=null,t.onLandlordSiteUserId=null,t.qingXiaZhu=null,t.chipBetVoice=null,t.majongResultLabel=null,t.qingxiazhuVoice=null,t.mahjongResulNodes=[],t.skyLineSprite=null,t.skyRacecLineSprite=null,t.middleLineSprite=null,t.middleRacecLineSprite=null,t.landLineSprite=null,t.landRacecLineSprite=null,t.erBaGangAnimation=null,t.biShiAnimation=null,t.duiZiAnimation=null,t.scheduleOnceTip=null,t}return n(t,e),t.prototype.start=function(){this.chairManage=new f.default(cc,this.playUserIcon),this.showMembers(),this.addEventListener()},t.prototype.updateTrendLine=function(){for(var e=null===h.default.roomItem.oningRaceNum?0:h.default.roomItem.oningRaceNum,t=0,o=0,n=0,i=0;t<=e;t++){var r=this.getRaceResult(t);r[0]&&(o+=1),r[1]&&(n+=1),r[2]&&(i+=1)}var a=200*(h.default.roomItem.oningRaceNum+1)/h.default.roomItem.playCount;this.skyRacecLineSprite.node.width=a,this.middleRacecLineSprite.node.width=a,this.landRacecLineSprite.node.width=a,this.skyLineSprite.node.width=200*o/h.default.roomItem.playCount,this.middleLineSprite.node.width=200*n/h.default.roomItem.playCount,this.landLineSprite.node.width=200*i/h.default.roomItem.playCount},t.prototype.getRaceResult=function(e){var t=d.default.raceList[e];return[t.getLocationResult(u.betLocaion.SKY)===u.CompareDxRe.BIG,t.getLocationResult(u.betLocaion.MIDDLE)===u.CompareDxRe.BIG,t.getLocationResult(u.betLocaion.LAND)===u.CompareDxRe.BIG]},t.prototype.cleanMahjongResulNodes=function(){this.mahjongResulNodes.forEach(function(e){e.active=!1,e.destroy()}),this.mahjongResulNodes=[]},t.prototype.onLoad=function(){},t.prototype.deskShanDong=function(){var e=this.node.getChildByName("DeskShanDong");this.schedule(function(){e.active=!e.active},.3,3,.1)},t.prototype.showDeskMiddleTip=function(e){var t=this,o=this.node.getChildByName("OverBetLimitTip");o.getComponents(cc.Label)[0].string=e,o.active||(o.active=!0),null!=this.scheduleOnceTip&&(this.unschedule(this.scheduleOnceTip),this.scheduleOnceTip=null),this.scheduleOnceTip=this.scheduleOnce(function(){t.node.getChildByName("OverBetLimitTip").active=!1,t.scheduleOnceTip=null},3)},t.prototype.addEventListener=function(){var e=this;l.eventBus.on(u.EventType.LANDLORD_CAHNGE_EVENT,p.randEventId(),function(t){g.default.info("\u684c\u5b50\u63a5\u6536\u5f53\u524d\u6bd4\u8d5b\u6709\u5e84\u8bbe\u7f6e,\u5c06\u8be5\u7528\u6237\u632a\u52a8\u5230\u5730\u4e3b\u6905\u5b50"),e.chairManage.moveToLandlordChair(t)}),l.eventBus.on(u.EventType.BET_CANCE_NOTICE,p.randEventId(),function(t){e.node.getChildByName("SkyPart").getComponent("DeskPart").betCancel(t),e.node.getChildByName("MiddlePart").getComponent("DeskPart").betCancel(t),e.node.getChildByName("LandPart").getComponent("DeskPart").betCancel(t),e.node.getChildByName("SkyCornerPart").getComponent("DeskPart").betCancel(t),e.node.getChildByName("BridgPart").getComponent("DeskPart").betCancel(t),e.node.getChildByName("LandCornerPart").getComponent("DeskPart").betCancel(t)}),l.eventBus.on(u.EventType.NEW_MEMBER_IN_ROOM,p.randEventId(),function(t){if(null==e.chairManage.getChairByUserId(t.userId)){var o={userId:t.userId,userName:t.nick,state:t.state,xiaZhuVal:0,userIcon:t.icon};e.chairManage.inChair(o)}}),l.eventBus.on(u.EventType.MEMBER_DELETE_FROM_ROOM,p.randEventId(),function(t){g.default.info("\u6211\u662f\u684c\u5b50\uff0c\u6211\u63a5\u5230\u901a\u77e5\u6709\u672c\u5730\u7528\u6237\u7684\u4fe1\u606f\u88ab\u5220\u9664\uff0c\u8fd9\u79cd\u60c5\u51b5\u53ea\u80fd\u51fa\u73b0\u5728\u6e38\u620f\u8fd8\u6ca1\u5f00\u59cb"),h.default.roomItem.roomState===u.roomState.OPEN&&(cc.log("\u6e38\u620f\u8fd8\u6ca1\u5f00\u59cb\uff0c\u5c06\u73a9\u5bb6\u4ece\u4f4d\u7f6e\u4e0a\u79fb\u9664:"+t),e.chairManage.outChair(t))}),l.eventBus.on(u.EventType.LOCAL_NOTICE_EVENT,p.randEventId(),function(t){switch(t.type){case u.LocalNoticeEventType.OPEN_CARD_FINISHED_NOTICE:e.updateTrendLine(),e.winFocusAmination(),e.scheduleOnce(function(){e.playingBiDaXiaAnimation(function(){})},.3);var o=e.node.parent.getChildByName("XiaZhu").getComponent("XiaZhu").backAllChipe();y.default.isTxMusicOpen()&&o&&e.chipBetVoice.play(),e.scheduleOnce(function(){e.node.parent.getChildByName("XiaZhu").getComponent("XiaZhu").destroyDeskChip(),l.eventBus.emit(u.EventType.LOCAL_NOTICE_EVENT,{type:u.LocalNoticeEventType.SHOW_DOWN_ANIMATION_FINISHED_NOTICE})},y.default.getShowResultKeepTime());break;case u.LocalNoticeEventType.OPEN_CARD_REQUEST_NOTICE:var n=t.info,i=d.default.raceList[h.default.roomItem.oningRaceNum].getMahjongScore(n);e.toMahjongValueLabelShow(n,i),e.toPlayResultAnimation(n,i);break;case u.LocalNoticeEventType.PLAY_AUDIO_NOT_SUPPORT:e.showDeskMiddleTip(u.WordMessage.audio_not_support);break;case u.LocalNoticeEventType.TURN_LANDLORD_LOCAL_NOTICE:var r=t.info;g.default.info("\u5c06\u5f53\u524d\u7684\u9009\u5e84\u7528\u6237\u79fb\u52a8\u5230\u5e84\u7684\u4f4d\u7f6e\uff0c\u7528\u6237\uff1a",r),e.chairManage.moveToLandlordChair(r.userId)}}),l.eventBus.on(u.EventType.BET_CHIP_CHANGE_EVENT,p.randEventId(),function(t){e.deskPartToBet(t)})},t.prototype.winFocusAmination=function(){this.node.getChildByName("SkyPart").getComponent("DeskPart").winFocusAmination(),this.node.getChildByName("MiddlePart").getComponent("DeskPart").winFocusAmination(),this.node.getChildByName("LandPart").getComponent("DeskPart").winFocusAmination(),this.node.getChildByName("SkyCornerPart").getComponent("DeskPart").winFocusAmination(),this.node.getChildByName("BridgPart").getComponent("DeskPart").winFocusAmination(),this.node.getChildByName("LandCornerPart").getComponent("DeskPart").winFocusAmination()},t.prototype.toMahjongValueLabelShow=function(e,t){var o=m.getLocationByLocaitonType(e),n=cc.instantiate(this.majongResultLabel);n.parent=cc.find("Canvas/Desk"),n.setPosition(o.x,o.y-20),n.getComponent("MahjongResultLabel").showResultWenZi(t),n.active=!0,this.mahjongResulNodes.push(n)},t.prototype.deskPartToBet=function(e){var t=e.betLocation;t===u.betLocaion.SKY?this.node.getChildByName("SkyPart").getComponent("DeskPart").toBet(e):t===u.betLocaion.MIDDLE?this.node.getChildByName("MiddlePart").getComponent("DeskPart").toBet(e):t===u.betLocaion.LAND?this.node.getChildByName("LandPart").getComponent("DeskPart").toBet(e):t===u.betLocaion.SKY_CORNER?this.node.getChildByName("SkyCornerPart").getComponent("DeskPart").toBet(e):t===u.betLocaion.BRIDG?this.node.getChildByName("BridgPart").getComponent("DeskPart").toBet(e):t===u.betLocaion.LAND_CORNER&&this.node.getChildByName("LandCornerPart").getComponent("DeskPart").toBet(e)},t.prototype.deskPartsToClean=function(){this.node.getChildByName("SkyPart").getComponent("DeskPart").toClearn(),this.node.getChildByName("MiddlePart").getComponent("DeskPart").toClearn(),this.node.getChildByName("LandPart").getComponent("DeskPart").toClearn(),this.node.getChildByName("SkyCornerPart").getComponent("DeskPart").toClearn(),this.node.getChildByName("BridgPart").getComponent("DeskPart").toClearn(),this.node.getChildByName("LandCornerPart").getComponent("DeskPart").toClearn()},t.prototype.deskPartsToOpen=function(){this.node.getChildByName("SkyPart").getComponent("DeskPart").toOpen(),this.node.getChildByName("MiddlePart").getComponent("DeskPart").toOpen(),this.node.getChildByName("LandPart").getComponent("DeskPart").toOpen(),this.node.getChildByName("SkyCornerPart").getComponent("DeskPart").toOpen(),this.node.getChildByName("BridgPart").getComponent("DeskPart").toOpen(),this.node.getChildByName("LandCornerPart").getComponent("DeskPart").toOpen()},t.prototype.playingBiDaXiaAnimation=function(e){var t=h.default.roomItem.oningRaceNum,o=d.default.raceList[t],n=null;(o.skyResult===u.CompareDxRe.BIG&&o.middleResult===u.CompareDxRe.BIG&&o.landResult===u.CompareDxRe.BIG||o.skyResult===u.CompareDxRe.SMALL&&o.middleResult===u.CompareDxRe.SMALL&&o.landResult===u.CompareDxRe.SMALL)&&((n=cc.instantiate(this.middleResultWenZi)).parent=this.node,n.active=!0),this.scheduleOnce(function(){null!==n&&n.destroy(),e()},1.5)},t.prototype.toPlayResultAnimation=function(e,t){var o=null;if(p.getMajhongValueType(t)==u.MajhongValueType.ER_BA_GANG&&(o=this.erBaGangAnimation),p.getMajhongValueType(t)==u.MajhongValueType.BI_SHI&&(o=this.biShiAnimation),p.getMajhongValueType(t)==u.MajhongValueType.DUI_ZI&&(o=this.duiZiAnimation),null!=o){var n=cc.find("Canvas").getComponent("RollRoomScene"),i=cc.instantiate(o);i.parent=n.node;var r={x:0,y:0};e==u.TableLocationType.LAND?(r.x=213,r.y=78):e==u.TableLocationType.LANDLORD?(r.x=11,r.y=85):e==u.TableLocationType.MIDDLE?(r.x=5,r.y=-72):(r.x=-213,r.y=78),i.x=r.x,i.y=r.y,i.active=!0,i.getComponents(cc.Animation)[0].play(),this.scheduleOnce(function(){i.getComponents(cc.Animation)[0].stop(),i.active=!1,i.destroy()},3.5)}},t.prototype.playingXiaZhuAnimation=function(){y.default.isTxMusicOpen()&&this.qingxiazhuVoice.play();var e=cc.instantiate(this.qingXiaZhu);e.parent=this.node,this.scheduleOnce(function(){try{e.destroy()}catch(e){}},1.5)},t.prototype.showMembers=function(){var e=this;try{this.chairManage.clearAllChair();var t=null===s.default.gameMenmberList?[]:s.default.gameMenmberList,o=d.default.raceList[h.default.roomItem.oningRaceNum].landlordId;if(null!=o&&""!=o){var n=s.default.getGameMemberByUserId(o);null!=n&&this.chairManage.inChair({userId:n.userId,userName:n.nick,userIcon:n.icon,state:n.state,xiaZhuVal:0})}t.forEach(function(t){if(t.userId!=o){var n={userId:t.userId,userName:t.nick,userIcon:t.icon,state:t.state,xiaZhuVal:0};e.chairManage.inChair(n)}})}catch(e){}},i([c(cc.Prefab)],t.prototype,"playUserIcon",void 0),i([c(cc.Sprite)],t.prototype,"deskBg",void 0),i([c(cc.Prefab)],t.prototype,"middleResultWenZi",void 0),i([c(cc.Prefab)],t.prototype,"qingXiaZhu",void 0),i([c(cc.AudioSource)],t.prototype,"chipBetVoice",void 0),i([c(cc.Prefab)],t.prototype,"majongResultLabel",void 0),i([c(cc.AudioSource)],t.prototype,"qingxiazhuVoice",void 0),i([c(cc.Sprite)],t.prototype,"skyLineSprite",void 0),i([c(cc.Sprite)],t.prototype,"skyRacecLineSprite",void 0),i([c(cc.Sprite)],t.prototype,"middleLineSprite",void 0),i([c(cc.Sprite)],t.prototype,"middleRacecLineSprite",void 0),i([c(cc.Sprite)],t.prototype,"landLineSprite",void 0),i([c(cc.Sprite)],t.prototype,"landRacecLineSprite",void 0),i([c(cc.Prefab)],t.prototype,"erBaGangAnimation",void 0),i([c(cc.Prefab)],t.prototype,"biShiAnimation",void 0),i([c(cc.Prefab)],t.prototype,"duiZiAnimation",void 0),t=i([a],t)}(cc.Component);o.default=_,cc._RF.pop()},{"../../common/Const":"Const","../../common/EventBus":"EventBus","../../common/Util":"Util","../../store/Config/ConfigManage":"ConfigManage","../../store/GameMember/GameMemberManage":"GameMemberManage","../../store/Races/RaceManage":"RaceManage","../../store/Room/RoomManage":"RoomManage","../DealMachine/DealMachineBase":"DealMachineBase","./ChairManage":"ChairManage",loglevel:28}],EntryBox:[function(e,t,o){"use strict";cc._RF.push(t,"49295AtVrpHS7v9yF7Kk1C2","EntryBox");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function a(e){try{s(n.next(e))}catch(e){r(e)}}function c(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):new o(function(t){t(e.value)}).then(a,c)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../store/Room/RoomManage"),s=e("../../common/Const"),u=e("../../store/User/UserManage"),l=e("../../common/Config"),p=e("loglevel"),d=e("../../store/Config/ConfigManage"),h=cc._decorator,f=h.ccclass,m=h.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.One=null,t.Two=null,t.Three=null,t.Four=null,t.Five=null,t.closeButton=null,t.Six=null,t.Seven=null,t.Eight=null,t.Nine=null,t.Zero=null,t.Delete=null,t.Enter=null,t.tipDialog=null,t.Num=null,t}return n(t,e),t.prototype.onEnable=function(){},t.prototype.start=function(){var e=this;this.closeButton.node.on(cc.Node.EventType.TOUCH_END,function(){e.node.destroy()}),this.node.on(cc.Node.EventType.TOUCH_END,function(){e.node.destroy()}),this.One.node.on(cc.Node.EventType.TOUCH_END,function(){e.Num.string+="1"}),this.Two.node.on(cc.Node.EventType.TOUCH_END,function(){e.Num.string+="2"}),this.Three.node.on(cc.Node.EventType.TOUCH_END,function(){e.Num.string+="3"}),this.Four.node.on(cc.Node.EventType.TOUCH_END,function(){e.Num.string+="4"}),this.Five.node.on(cc.Node.EventType.TOUCH_END,function(){e.Num.string+="5"}),this.Six.node.on(cc.Node.EventType.TOUCH_END,function(){e.Num.string+="6"}),this.Seven.node.on(cc.Node.EventType.TOUCH_END,function(){e.Num.string+="7"}),this.Eight.node.on(cc.Node.EventType.TOUCH_END,function(){e.Num.string+="8"}),this.Nine.node.on(cc.Node.EventType.TOUCH_END,function(){e.Num.string+="9"}),this.Zero.node.on(cc.Node.EventType.TOUCH_END,function(){e.Num.string+="0"}),this.Delete.node.on(cc.Node.EventType.TOUCH_END,function(){e.Num.string=e.Num.string.substring(0,e.Num.string.length-1)}),this.Enter.node.on(cc.Node.EventType.TOUCH_END,function(){var t=parseInt(e.Num.string);if(p.default.info("\u8f93\u5165\u623f\u95f4\u53f7\uff1a",t),t==l.config.cheatSwitchNumber)return p.default.info("\u4f5c\u5f0a\u5f00\u5173\u89e6\u53d1"),d.default.setCheat(!0),e.showCheatTip(),void e.node.destroy();c.default.setEnterRoomParam({model:s.EnterRoomModel.NUMBER_PANEL,userId:u.default.userInfo.id,roomId:t}),e.checkRoom(t)})},t.prototype.checkRoom=function(e){return r(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,c.default.isRoomExist(e)];case 1:return t.sent().result===s.ResponseStatus.FAIL?this.showEnterRoomFailTip():cc.director.loadScene("RollRoomScene"),this.node.destroy(),[2]}})})},t.prototype.showEnterRoomFailTip=function(){var e=cc.instantiate(this.tipDialog),t=e.getComponent("TipDialog");e.parent=this.node.parent,e.active=!0;t.tipDialogShow({sureButtonShow:!0,cancelButtonShow:!1,content:"\u623f\u95f4\u4e0d\u5b58\u5728\u6216\u5df2\u5173\u95ed",cancelButtonAction:null,sureButtonAction:null})},t.prototype.showCheatTip=function(){var e=cc.instantiate(this.tipDialog),t=e.getComponent("TipDialog");e.parent=this.node.parent,e.active=!0;t.tipDialogShow({sureButtonShow:!0,cancelButtonShow:!1,content:"\u8d85\u7ea7\u6743\u9650\u5f00\u542f",cancelButtonAction:null,sureButtonAction:null})},t.prototype.onDisable=function(){},i([m(cc.Button)],t.prototype,"One",void 0),i([m(cc.Button)],t.prototype,"Two",void 0),i([m(cc.Button)],t.prototype,"Three",void 0),i([m(cc.Button)],t.prototype,"Four",void 0),i([m(cc.Button)],t.prototype,"Five",void 0),i([m(cc.Sprite)],t.prototype,"closeButton",void 0),i([m(cc.Button)],t.prototype,"Six",void 0),i([m(cc.Button)],t.prototype,"Seven",void 0),i([m(cc.Button)],t.prototype,"Eight",void 0),i([m(cc.Button)],t.prototype,"Nine",void 0),i([m(cc.Button)],t.prototype,"Zero",void 0),i([m(cc.Button)],t.prototype,"Delete",void 0),i([m(cc.Button)],t.prototype,"Enter",void 0),i([m(cc.Prefab)],t.prototype,"tipDialog",void 0),i([m(cc.Label)],t.prototype,"Num",void 0),t=i([f],t)}(cc.Component);o.default=y,cc._RF.pop()},{"../../common/Config":"Config","../../common/Const":"Const","../../store/Config/ConfigManage":"ConfigManage","../../store/Room/RoomManage":"RoomManage","../../store/User/UserManage":"UserManage",loglevel:28}],EventBus:[function(e,t,o){"use strict";cc._RF.push(t,"461c01qG7hPeICLU6L4pdCc","EventBus"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this.listeners={}}return e.prototype.on=function(e,t,o,n){void 0===n&&(n=!1),t&&"function"==typeof o&&(this.listeners[e]||(this.listeners[e]={}),this.listeners[e][t]={once:n,fn:o})},e.prototype.off=function(e,t){this.listeners[e]&&delete this.listeners[e][t]},e.prototype.clearAll=function(){this.listeners={}},e.prototype.once=function(e,t,o){this.on(e,t,o,!0)},e.prototype.emit=function(e,t){try{var o=[];if(this.listeners[e])for(var n in this.listeners[e]){var i=this.listeners[e][n];if(i)if(i.once&&o.push({eventType:e,listenerId:n}),"function"==typeof i.fn)try{i.fn(t)}catch(e){}else o.push({eventType:e,listenerId:n});else o.push({eventType:e,listenerId:n})}for(var r=0,a=o.length;r<a;r++){var c=o[r];this.off(c.eventType,c.listenerId)}}catch(e){}},e}();o.eventBus=new n,cc._RF.pop()},{}],FaceList:[function(e,t,o){"use strict";cc._RF.push(t,"fea70KBk5BADb5oVfpeM64e","FaceList"),Object.defineProperty(o,"__esModule",{value:!0}),o.faceList=[{name:"EE0",size:{x:80,y:80}},{name:"EE1",size:{x:80,y:80}},{name:"EE2",size:{x:80,y:80}},{name:"EE3",size:{x:80,y:80}},{name:"EE4",size:{x:80,y:80}},{name:"EE5",size:{x:80,y:80}},{name:"EE6",size:{x:80,y:80}},{name:"EE7",size:{x:80,y:80}},{name:"EE8",size:{x:80,y:80}},{name:"EE9",size:{x:80,y:80}},{name:"EE10",size:{x:80,y:80}},{name:"EE11",size:{x:80,y:80}},{name:"EE12",size:{x:80,y:80}},{name:"EE13",size:{x:80,y:80}},{name:"EE14",size:{x:80,y:80}},{name:"EE15",size:{x:80,y:80}},{name:"EE16",size:{x:80,y:80}},{name:"EE17",size:{x:80,y:80}},{name:"EE18",size:{x:80,y:80}},{name:"EE19",size:{x:80,y:80}},{name:"EE20",size:{x:80,y:80}},{name:"EE21",size:{x:80,y:80}},{name:"EE22",size:{x:80,y:80}},{name:"EE23",size:{x:80,y:80}},{name:"EE24",size:{x:80,y:80}},{name:"EE25",size:{x:80,y:80}},{name:"EE26",size:{x:80,y:80}},{name:"EE27",size:{x:80,y:80}},{name:"EE28",size:{x:80,y:80}},{name:"EE29",size:{x:80,y:80}}],cc._RF.pop()},{}],GameMemberItem:[function(e,t,o){"use strict";cc._RF.push(t,"e55ecSTQfdDS44ZZgqSw0Ey","GameMemberItem"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../common/Const"),i=e("../../common/EventBus"),r=function(){function e(e){this.userId=null,this.roleType=null,this.nick=null,this.icon=null,this.score=null,this._state=null,this.userId=e.userId,this.roleType=e.roleType,this.nick=e.nick,this.icon=e.icon,this.score=e.score,this._state=e.state}return Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(e){this._state=e,i.eventBus.emit(n.EventType.MEMBER_STATE_CHANGE,{userId:this.userId,state:this._state})},enumerable:!0,configurable:!0}),e}();o.default=r,cc._RF.pop()},{"../../common/Const":"Const","../../common/EventBus":"EventBus"}],GameMemberList:[function(e,t,o){"use strict";cc._RF.push(t,"c8318zBaJVFf6+PWveH88AW","GameMemberList"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../common/Const");o.GameMemberList=[{userId:"6666661",roleType:n.gameMemberType.PLAYER,nick:"\u8bdd\u8bed\u6210\u98ce",icon:"renwu/1_1",score:0,state:n.memberState.OnLine},{userId:"6666662",roleType:n.gameMemberType.PLAYER,nick:"\u4f60\u6709\u7406",icon:"renwu/1_2",score:0,state:n.memberState.OnLine},{userId:"6666663",roleType:n.gameMemberType.PLAYER,nick:"\u8d22\u6e90\u6eda\u6eda",icon:"renwu/1_3",score:0,state:n.memberState.OnLine},{userId:"6666664",roleType:n.gameMemberType.PLAYER,nick:"\u5728\u6c34\u4e00\u65b9",icon:"renwu/1_4",score:0,state:n.memberState.OnLine},{userId:"6666665",roleType:n.gameMemberType.PLAYER,nick:"\u98d8",icon:"renwu/1_5",score:0,state:n.memberState.OnLine},{userId:"6666666",roleType:n.gameMemberType.PLAYER,nick:"\u98ce\u5439\u5c41\u5c41\u51c9",icon:"renwu/1_6",score:0,state:n.memberState.OnLine},{userId:"6666667",roleType:n.gameMemberType.PLAYER,nick:"\u8fd9\u91cc\u6709\u773c",icon:"renwu/1_7",score:0,state:n.memberState.OnLine},{userId:"6666668",roleType:n.gameMemberType.PLAYER,nick:"\u5e05\u54e5",icon:"renwu/1_8",score:0,state:n.memberState.OnLine},{userId:"6666669",roleType:n.gameMemberType.PLAYER,nick:"\u8f6c\u89d2\u9047\u5230\u7231",icon:"renwu/1_9",score:0,state:n.memberState.OnLine}],cc._RF.pop()},{"../common/Const":"Const"}],GameMemberManage:[function(e,t,o){"use strict";cc._RF.push(t,"a32ffX9vqVJHIC6JulzPUMc","GameMemberManage"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../common/Const"),i=e("./GameMemberItem"),r=e("../../common/EventBus"),a=function(){function e(){this._gameMenmberList=null}return e.prototype.clear=function(){this._gameMenmberList=null},Object.defineProperty(e.prototype,"gameMenmberList",{get:function(){return this._gameMenmberList},set:function(e){this._gameMenmberList=e},enumerable:!0,configurable:!0}),e.prototype.setGameMemberList=function(e){var t=[];e.forEach(function(e){t[e.userId]=new i.default(e)}),this.gameMenmberList=t},e.prototype.outGameMember=function(e){void 0!==this._gameMenmberList[e]&&delete this._gameMenmberList[e],r.eventBus.emit(n.EventType.MEMBER_DELETE_FROM_ROOM,e)},e.prototype.addGameMember=function(e){var t=e.userId;if(void 0!==this.gameMenmberList[t])return this.gameMenmberList[t].state=n.memberState.OnLine,!1;var o=new i.default(e);return this._gameMenmberList[e.userId]=o,r.eventBus.emit(n.EventType.NEW_MEMBER_IN_ROOM,e),!0},e.prototype.requestGameMemberList=function(){var e=this;return new Promise(function(t){t({result:n.PromiseResult.SUCCESS,extObject:e.gameMenmberList})})},e.prototype.requestGameMemberListFromServer=function(){return new Promise(function(e){e({result:n.PromiseResult.SUCCESS,extObject:null})})},e.prototype.updateGameMemberListFromServer=function(){return new Promise(function(e){e({result:n.PromiseResult.SUCCESS,extObject:null})})},e.prototype.getGameMemberByUserId=function(e){return void 0===this._gameMenmberList[e]?null:this._gameMenmberList[e]},e.prototype.checkRoomMember=function(e){for(var t=this.getInvaildMemberIds(e),o=0;o<t.length;o++)this.outGameMember(t[o]);for(var n=this.getNeedAddMemberList(e),i=0;i<n.length;i++)this.addGameMember(n[i])},e.prototype.getInvaildMemberIds=function(e){var t=[];return this.gameMenmberList.forEach(function(o){for(var n=!1,i=0;i<e.length;i++)if(e[i].userId==o.userId){n=!0;break}n||t.push(o.userId)}),t},e.prototype.getNeedAddMemberList=function(e){var t=this,o=[];return e.forEach(function(e){var n=!0;void 0!==t.gameMenmberList[e.userId]&&(n=!1),n&&o.push(e.userId)}),o},e}();o.default=new a,cc._RF.pop()},{"../../common/Const":"Const","../../common/EventBus":"EventBus","./GameMemberItem":"GameMemberItem"}],Http:[function(e,t,o){"use strict";cc._RF.push(t,"ee82dAFtJFJD7dX0fsQYqj0","Http"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.getWithUrl=function(e,t){var o=!1,n=cc.loader.getXMLHttpRequest();n.open("GET",e,!0),n.onloadend=function(){o=!(4==n.readyState&&n.status>=200&&n.status<=207);var e="";try{e=JSON.parse(n.responseText)}catch(e){console.log(e)}t(o,e)},n.send()},e.prototype.sendWithUrl=function(e,t,o){var n=cc.loader.getXMLHttpRequest();n.open("POST",e),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),n.onloadend=function(){var e=-1;4==n.readyState&&n.status>=200&&n.status<=207&&(e=0);var t=JSON.parse(n.responseText),i=parseInt(t.code);o(e,i,t)},n.send(t)},e}();o.Http=n,o.default=new n,cc._RF.pop()},{}],LineTrendMap:[function(e,t,o){"use strict";cc._RF.push(t,"89c9btTZ1hIa4F8IL1VTUDH","LineTrendMap");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../common/Const"),a=e("../../store/Races/RaceManage"),c=e("../../store/Room/RoomManage"),s=e("../../common/Util"),u=e("../../common/EventBus"),l=cc._decorator,p=l.ccclass,d=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.drawPanel=null,t.drawPanelWidth=0,t.drawPanelHeight=0,t.skyResult=[],t.middleResult=[],t.landResult=[],t.colorSet=[cc.Color.GRAY,cc.Color.RED,cc.Color.GREEN],t.lineWith=2,t.eventIdOne=null,t.xMiddlelabel=null,t.yMiddlelabel=null,t.xEndlabel=null,t.yEndlabel=null,t}return n(t,e),t.prototype.start=function(){this.reDraw()},t.prototype.reDraw=function(){this.drawPanel.getComponent(cc.Graphics).clear(),this.drawBase(),this.initResult(),this.drawByResult(this.skyResult,r.betLocaion.SKY),this.drawByResult(this.middleResult,r.betLocaion.MIDDLE),this.drawByResult(this.landResult,r.betLocaion.LAND)},t.prototype.getRaceResult=function(e){var t=a.default.raceList[e];return[t.getLocationResult(r.betLocaion.SKY)===r.CompareDxRe.BIG,t.getLocationResult(r.betLocaion.MIDDLE)===r.CompareDxRe.BIG,t.getLocationResult(r.betLocaion.LAND)===r.CompareDxRe.BIG]},t.prototype.initResult=function(){this.skyResult=[],this.middleResult=[],this.landResult=[];var e=0,t=0;try{e=null===c.default.roomItem.oningRaceNum?0:c.default.roomItem.oningRaceNum,t=a.default.raceList[e].state==r.RaceState.FINISHED||a.default.raceList[e].state==r.RaceState.SHOW_DOWN?e:e-1}catch(e){}for(var o=0;o<=t;o++){var n=this.getRaceResult(o);this.skyResult.push(n[0]),this.middleResult.push(n[1]),this.landResult.push(n[2])}},t.prototype.drawBase=function(){var e=this.drawPanel.getComponent(cc.Graphics);e.lineWidth=this.lineWith,e.moveTo(0,0),e.lineTo(0,this.drawPanelHeight),e.lineTo(4,this.drawPanelHeight-8),e.moveTo(0,this.drawPanelHeight),e.lineTo(-4,this.drawPanelHeight-8),e.strokeColor=cc.Color.WHITE,e.stroke(),e.moveTo(0,0),e.lineTo(this.drawPanelWidth,0),e.lineTo(this.drawPanelWidth-8,4),e.moveTo(this.drawPanelWidth,0),e.lineTo(this.drawPanelWidth-8,-4),e.strokeColor=cc.Color.WHITE,e.stroke(),e.moveTo(this.drawPanelWidth/2,0),e.lineTo(this.drawPanelWidth/2,6),e.strokeColor=cc.Color.WHITE,e.stroke(),e.moveTo(this.drawPanelWidth-12,0),e.lineTo(this.drawPanelWidth-12,6),e.strokeColor=cc.Color.WHITE,e.stroke(),e.moveTo(0,this.drawPanelHeight/2),e.lineTo(6,this.drawPanelHeight/2),e.strokeColor=cc.Color.WHITE,e.stroke(),e.moveTo(0,this.drawPanelHeight-12),e.lineTo(6,this.drawPanelHeight-12),e.strokeColor=cc.Color.WHITE,e.stroke(),e.moveTo(30,this.drawPanelHeight-30),e.lineTo(50,this.drawPanelHeight-30),e.strokeColor=this.colorSet[0],e.lineWidth=this.lineWith,e.stroke(),e.moveTo(30,this.drawPanelHeight-60),e.lineTo(50,this.drawPanelHeight-60),e.strokeColor=this.colorSet[1],e.lineWidth=this.lineWith,e.stroke(),e.moveTo(30,this.drawPanelHeight-90),e.lineTo(50,this.drawPanelHeight-90),e.strokeColor=this.colorSet[2],e.lineWidth=this.lineWith,e.stroke();var t=c.default.roomItem.playCount;this.yEndlabel.string=t+"",this.xEndlabel.string=t+"",this.xMiddlelabel.string=Math.floor(t/2)+"",this.yMiddlelabel.string=Math.floor(t/2)+""},t.prototype.drawByResult=function(e,t){var o=c.default.roomItem.playCount,n=this.drawPanelWidth/o,i=this.drawPanelHeight/o,a=this.drawPanel.getComponent(cc.Graphics),s=0,u=0;t==r.betLocaion.SKY?(a.strokeColor=this.colorSet[0],a.lineWidth=this.lineWith,u=4):t==r.betLocaion.MIDDLE?(a.strokeColor=this.colorSet[1],a.lineWidth=this.lineWith,u=2):(a.strokeColor=this.colorSet[2],a.lineWidth=this.lineWith),a.moveTo(0,0);for(var l=0;l<e.length;l++)s+=n,e[l]&&(u+=i),a.lineTo(s,u);a.stroke()},t.prototype.onDisable=function(){u.eventBus.off(r.EventType.LOCAL_NOTICE_EVENT,this.eventIdOne)},t.prototype.onEnable=function(){var e=this;this.drawPanelWidth=this.drawPanel.width,this.drawPanelHeight=this.drawPanel.height,this.node.on(cc.Node.EventType.TOUCH_START,function(){e.node.destroy()}),this.eventIdOne=s.randEventId(),u.eventBus.on(r.EventType.LOCAL_NOTICE_EVENT,s.randEventId(),function(t){switch(t.type){case r.LocalNoticeEventType.OPEN_CARD_FINISHED_NOTICE:e.reDraw()}})},i([d(cc.Node)],t.prototype,"drawPanel",void 0),i([d(cc.Label)],t.prototype,"xMiddlelabel",void 0),i([d(cc.Label)],t.prototype,"yMiddlelabel",void 0),i([d(cc.Label)],t.prototype,"xEndlabel",void 0),i([d(cc.Label)],t.prototype,"yEndlabel",void 0),t=i([p],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../common/Const":"Const","../../common/EventBus":"EventBus","../../common/Util":"Util","../../store/Races/RaceManage":"RaceManage","../../store/Room/RoomManage":"RoomManage"}],LobbyScene:[function(e,t,o){"use strict";cc._RF.push(t,"3f7ca3y8ahAL5P7XHe5gksv","LobbyScene");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function a(e){try{s(n.next(e))}catch(e){r(e)}}function c(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):new o(function(t){t(e.value)}).then(a,c)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../store/User/UserManage"),s=e("../../common/Util"),u=e("../../store/Room/RoomManage"),l=e("../../common/Const"),p=e("../../common/Config"),d=e("../../common/EventBus"),h=e("../../store/Config/ConfigManage"),f=cc._decorator,m=f.ccclass,y=f.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.EntryBox=null,t.CreateRoomPanel=null,t.CustomerPanel=null,t.JoinPart=null,t.SetPanel=null,t.RulePanel=null,t.ruleButton=null,t.customerButton=null,t.CreateRoomPart=null,t.LianXiChang=null,t.setButton=null,t.exitButton=null,t.diamondBugPart=null,t.rechargePanel=null,t.userName=null,t.userId=null,t.diamond=null,t.chipCount=null,t.informMessageLabel=null,t.versionLabel=null,t.tipDialog=null,t.userIconSprite=null,t.emulatorRoomHasClick=!0,t.eventIdOne=null,t}return n(t,e),t.prototype.onLoad=function(){},t.prototype.onEnable=function(){var e=this;h.default.isConfigHasLoad()||h.default.loadConfigInfo(),this.eventIdOne=s.randEventId(),d.eventBus.on(l.EventType.LOCAL_NOTICE_EVENT,this.eventIdOne,function(t){switch(t.type){case l.LocalNoticeEventType.DIAMOND_COUNT_CHANGE:e.diamond.string=t.info+""}})},t.prototype.closeEntryBox=function(){var e=this.node.getChildByName("EntryBox");null!==e&&(e.active=!1,e.destroy())},t.prototype.closeCreateRoomPanel=function(){var e=this.node.getChildByName("CreateRoomPanel");null!==e&&(e.active=!1,e.destroy())},t.prototype.initUserInfo=function(e){return r(this,void 0,void 0,function(){var t=this;return a(this,function(o){switch(o.label){case 0:return[4,c.default.requestUserInfo(e)];case 1:return o.sent(),this.userName.string=c.default.userInfo.nick,this.userId.string="ID:"+c.default.userInfo.id,this.diamond.string=c.default.userInfo.diamond+"",this.chipCount.string=c.default.userInfo.score+"",cc.loader.load({url:c.default.getUserIconUrl(),type:"png"},function(e,o){var n=new cc.SpriteFrame(o);t.userIconSprite.spriteFrame=n}),[2]}})})},t.prototype.onDisable=function(){this.JoinPart.node.off(cc.Node.EventType.TOUCH_END,function(){}),d.eventBus.off(l.EventType.LOCAL_NOTICE_EVENT,this.eventIdOne)},t.prototype.start=function(){var e=this;this.informMessageLabel.string=h.default.getInformMessage();var t=c.default.getLoginUserId();null!=t?(this.initUserInfo(t),cc.director.preloadScene("RollRoomScene"),this.versionLabel.string=p.config.version,this.scheduleOnce(function(){e.emulatorRoomHasClick=!1},1.5),this.JoinPart.node.on(cc.Node.EventType.TOUCH_END,function(){if(null===e.node.getChildByName("EntryBox")){e.closeCreateRoomPanel();var t=cc.instantiate(e.EntryBox);t.parent=e.node,t.setPosition(3.687,1.474),t.active=!0}}),this.LianXiChang.node.on(cc.Node.EventType.TOUCH_START,function(){e.emulatorRoomHasClick=!0,u.default.setEnterRoomParam({model:l.EnterRoomModel.EMULATOR_ROOM}),cc.director.loadScene("RollRoomScene")}),this.setButton.node.on(cc.Node.EventType.TOUCH_START,function(){var t=cc.instantiate(e.SetPanel);t.parent=e.node,t.setPosition(0,0)}),this.exitButton.node.on(cc.Node.EventType.TOUCH_START,function(){var t={sureButtonShow:!0,cancelButtonShow:!1,content:l.WordMessage.login_page_action_tip,cancelButtonAction:null,sureButtonAction:l.TipDialogButtonAction.OUT_TO_LOGIN};e.dialogShow(t)}),this.ruleButton.node.on(cc.Node.EventType.TOUCH_START,function(){cc.instantiate(e.RulePanel).parent=e.node}),this.diamondBugPart.on(cc.Node.EventType.TOUCH_START,function(){cc.instantiate(e.rechargePanel).parent=e.node}),this.customerButton.node.on(cc.Node.EventType.TOUCH_START,function(){e.node.getChildByName("CustomerPanel")}),this.CreateRoomPart.node.on(cc.Node.EventType.TOUCH_END,function(){if(null===e.node.getChildByName("CreateRoomPanel")){e.closeEntryBox();var t=cc.instantiate(e.CreateRoomPanel);t.parent=e.node,t.active=!0}})):window.location.replace(p.config.loginPageAddress)},t.prototype.dialogShow=function(e){var t=cc.instantiate(this.tipDialog),o=t.getComponent("TipDialog");t.parent=this.node,o.tipDialogShow(e)},i([y(cc.Prefab)],t.prototype,"EntryBox",void 0),i([y(cc.Prefab)],t.prototype,"CreateRoomPanel",void 0),i([y(cc.Prefab)],t.prototype,"CustomerPanel",void 0),i([y(cc.Sprite)],t.prototype,"JoinPart",void 0),i([y(cc.Prefab)],t.prototype,"SetPanel",void 0),i([y(cc.Prefab)],t.prototype,"RulePanel",void 0),i([y(cc.Sprite)],t.prototype,"ruleButton",void 0),i([y(cc.Sprite)],t.prototype,"customerButton",void 0),i([y(cc.Sprite)],t.prototype,"CreateRoomPart",void 0),i([y(cc.Sprite)],t.prototype,"LianXiChang",void 0),i([y(cc.Sprite)],t.prototype,"setButton",void 0),i([y(cc.Sprite)],t.prototype,"exitButton",void 0),i([y(cc.Node)],t.prototype,"diamondBugPart",void 0),i([y(cc.Prefab)],t.prototype,"rechargePanel",void 0),i([y(cc.Label)],t.prototype,"userName",void 0),i([y(cc.Label)],t.prototype,"userId",void 0),i([y(cc.Label)],t.prototype,"diamond",void 0),i([y(cc.Label)],t.prototype,"chipCount",void 0),i([y(cc.Label)],t.prototype,"informMessageLabel",void 0),i([y(cc.Label)],t.prototype,"versionLabel",void 0),i([y(cc.Prefab)],t.prototype,"tipDialog",void 0),i([y(cc.Sprite)],t.prototype,"userIconSprite",void 0),t=i([m],t)}(cc.Component);o.default=g,cc._RF.pop()},{"../../common/Config":"Config","../../common/Const":"Const","../../common/EventBus":"EventBus","../../common/Util":"Util","../../store/Config/ConfigManage":"ConfigManage","../../store/Room/RoomManage":"RoomManage","../../store/User/UserManage":"UserManage"}],Log:[function(e,t,o){"use strict";cc._RF.push(t,"21d68ELVfxOubYvJQCcwSO+","Log"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this.levels={e:4,w:3,i:2,d:1},this.level=this.getLevel(),this.logNum=1}return e.prototype.getLevel=function(){return this.levels.e},e.prototype.consoleShow=function(e,t,o,n){var i=JSON.stringify(o);console.log("the-flash:"+n+"(time:"+new Date+",   num:"+this.logNum+++",   type:"+JSON.stringify(e)+",   path:"+t+",   _desc:"+i+")")},e.prototype.e=function(e,t,o){this.level<=this.levels.e&&this.consoleShow(e,t,o,"e")},e.prototype.w=function(e,t,o){this.level<=this.levels.w&&this.consoleShow(e,t,o,"w")},e.prototype.i=function(e,t,o){this.level<=this.levels.i&&this.consoleShow(e,t,o,"i")},e.prototype.d=function(e,t,o){this.level<=this.levels.d&&this.consoleShow(e,t,o,"d")},e}();o.default=new n,cc._RF.pop()},{}],MahjongResultLabel:[function(e,t,o){"use strict";cc._RF.push(t,"8843dlqY8NJm58RFeA9VVFz","MahjongResultLabel");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mahjongReultWenZi=null,t.majValZiHalf=[],t.majValZiZhen=[],t.erbagang=null,t}return n(t,e),t.prototype.start=function(){},t.prototype.showResultWenZi=function(e){var t=this.getZiSpriteFrame(e);this.mahjongReultWenZi.spriteFrame=t},t.prototype.getZiSpriteFrame=function(e){var t=0;return 2===e.one&&8===e.two||8===e.one&&2===e.two?this.erbagang:e.one===e.two?this.majValZiHalf[0]:.5===e.one&&.5===e.two?this.majValZiZhen[1]:.5===e.one||.5===e.two?(t=.5===e.one?e.two:e.one,this.majValZiHalf[t]):((t=e.two+e.one)>=10&&(t-=10),this.majValZiZhen[t])},i([c(cc.Sprite)],t.prototype,"mahjongReultWenZi",void 0),i([c([cc.SpriteFrame])],t.prototype,"majValZiHalf",void 0),i([c([cc.SpriteFrame])],t.prototype,"majValZiZhen",void 0),i([c(cc.SpriteFrame)],t.prototype,"erbagang",void 0),t=i([a],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],MiddleResultAmimation:[function(e,t,o){"use strict";cc._RF.push(t,"adfd0wBwzZK1IH0o1GlDero","MiddleResultAmimation");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../store/Room/RoomManage"),a=e("../../store/Races/RaceManage"),c=e("../../common/Const"),s=e("../../store/User/UserManage"),u=e("../../store/Config/ConfigManage"),l=cc._decorator,p=l.ccclass,d=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bg=null,t.wenZi=null,t.tongsha=null,t.tongpei=null,t.goldWinWenZi=null,t.grayWinWenZi=null,t.goldFailWenZi=null,t.grayFailWenZi=null,t.goldBg=null,t.grayBg=null,t}return n(t,e),t.prototype.start=function(){var e=r.default.roomItem.oningRaceNum,t=a.default.raceList[e],o=a.default.raceList[0].landlordId,n=s.default.userInfo.id,i=null,l=null;t.skyResult===c.CompareDxRe.BIG&&t.middleResult===c.CompareDxRe.BIG&&t.landResult===c.CompareDxRe.BIG?(u.default.isTxMusicOpen()&&this.tongpei.play(),o===n?(i=this.grayBg,l=this.grayFailWenZi):(i=this.goldBg,l=this.goldFailWenZi)):t.skyResult===c.CompareDxRe.SMALL&&t.middleResult===c.CompareDxRe.SMALL&&t.landResult===c.CompareDxRe.SMALL&&(u.default.isTxMusicOpen()&&this.tongsha.play(),o===n?(i=this.goldBg,l=this.goldWinWenZi):(i=this.grayBg,l=this.grayWinWenZi)),this.bg.spriteFrame=i,this.wenZi.spriteFrame=l},t.prototype.onEnable=function(){},i([d(cc.Sprite)],t.prototype,"bg",void 0),i([d(cc.Sprite)],t.prototype,"wenZi",void 0),i([d(cc.AudioSource)],t.prototype,"tongsha",void 0),i([d(cc.AudioSource)],t.prototype,"tongpei",void 0),i([d(cc.SpriteFrame)],t.prototype,"goldWinWenZi",void 0),i([d(cc.SpriteFrame)],t.prototype,"grayWinWenZi",void 0),i([d(cc.SpriteFrame)],t.prototype,"goldFailWenZi",void 0),i([d(cc.SpriteFrame)],t.prototype,"grayFailWenZi",void 0),i([d(cc.SpriteFrame)],t.prototype,"goldBg",void 0),i([d(cc.SpriteFrame)],t.prototype,"grayBg",void 0),t=i([p],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../common/Const":"Const","../../store/Config/ConfigManage":"ConfigManage","../../store/Races/RaceManage":"RaceManage","../../store/Room/RoomManage":"RoomManage","../../store/User/UserManage":"UserManage"}],MiddleTopScorePanel:[function(e,t,o){"use strict";cc._RF.push(t,"c9dfcgBV3FGTIZky2YCYu5K","MiddleTopScorePanel");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../common/EventBus"),a=e("../../common/Const"),c=e("../../common/Util"),s=e("../../store/User/UserManage"),u=e("../../store/Room/RoomManage"),l=e("../../store/Races/RaceManage"),p=cc._decorator,d=p.ccclass,h=p.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.userScore=null,t.totalScore=null,t.landlordTotalScore=null,t.eventIdOne=null,t.eventIdTwo=null,t.totalScoreVal=0,t.userScoreVal=0,t.bg=null,t.bg_icon_1=null,t.bg_icon_2=null,t}return n(t,e),t.prototype.start=function(){},t.prototype.onLoad=function(){this.isLandlord()?(this.bg.spriteFrame=this.bg_icon_2,this.landlordTotalScore.node.active=!0,this.userScore.node.active=!1,this.totalScore.node.active=!1):(this.bg.spriteFrame=this.bg_icon_1,this.landlordTotalScore.node.active=!1,this.userScore.node.active=!0,this.totalScore.node.active=!0)},t.prototype.isLandlord=function(){var e=u.default.roomItem.oningRaceNum;return s.default.userInfo.id===l.default.raceList[e].landlordId},t.prototype.onEnable=function(){var e=this;this.eventIdOne=c.randEventId(),r.eventBus.on(a.EventType.BET_CHIP_CHANGE_EVENT,this.eventIdOne,function(t){var o=t.toValue-t.fromVal;e.totalScoreVal+=o,t.userId==s.default.userInfo.id&&(e.userScoreVal+=o),e.userScore.string=e.userScoreVal+"",e.totalScore.string=e.totalScoreVal+"",e.landlordTotalScore.string=e.totalScoreVal+""}),this.eventIdTwo=c.randEventId(),r.eventBus.on(a.EventType.BET_CANCE_NOTICE,this.eventIdTwo,function(t){t.userId==s.default.userInfo.id&&(e.userScoreVal-=t.fromVal),e.totalScoreVal-=t.fromVal,e.userScore.string=e.userScoreVal+"",e.totalScore.string=e.totalScoreVal+"",e.landlordTotalScore.string=e.totalScoreVal+""})},t.prototype.onDisable=function(){this.totalScoreVal=0,this.userScoreVal=0,r.eventBus.off(a.EventType.BET_CHIP_CHANGE_EVENT,this.eventIdOne),r.eventBus.off(a.EventType.BET_CANCE_NOTICE,this.eventIdTwo)},i([h(cc.Label)],t.prototype,"userScore",void 0),i([h(cc.Label)],t.prototype,"totalScore",void 0),i([h(cc.Label)],t.prototype,"landlordTotalScore",void 0),i([h(cc.Sprite)],t.prototype,"bg",void 0),i([h(cc.SpriteFrame)],t.prototype,"bg_icon_1",void 0),i([h(cc.SpriteFrame)],t.prototype,"bg_icon_2",void 0),t=i([d],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../common/Const":"Const","../../common/EventBus":"EventBus","../../common/Util":"Util","../../store/Races/RaceManage":"RaceManage","../../store/Room/RoomManage":"RoomManage","../../store/User/UserManage":"UserManage"}],MiddleTopTimePanel:[function(e,t,o){"use strict";cc._RF.push(t,"844306HVh1ITKJ0iWgjUUbP","MiddleTopTimePanel");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,s=e("../../common/EventBus"),u=e("../../common/Const"),l=e("../../store/Config/ConfigManage"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.time=null,t.stopBetVoice=null,t.showTime=0,t}return n(t,e),t.prototype.start=function(){},t.prototype.betTimeShow=function(){var e=this,t=l.default.getBetTime();this.showTime=t-1,this.time.string=this.showTime.toString(),this.schedule(function(){e.showTime--,e.time.string=e.showTime.toString(),e.showTime<=0&&(l.default.isTxMusicOpen()&&e.stopBetVoice.play(),s.eventBus.emit(u.EventType.LOCAL_NOTICE_EVENT,{type:u.LocalNoticeEventType.LOCAL_TIME_XIAZHU_FINISHED_NOTICE}),e.unscheduleAllCallbacks())},1,t,1)},t.prototype.waitRaceSync=function(){var e=this;this.showTime=1,this.time.string=this.showTime.toString(),this.schedule(function(){e.showTime++,e.time.string=e.showTime.toString()},1,1e3,1)},t.prototype.waitLandlordSync=function(){var e=this;this.showTime=l.default.getRapLandlordTime(),this.time.string=this.showTime.toString(),this.schedule(function(){e.showTime--,e.time.string=e.showTime.toString()},1,1e3,1)},t.prototype.getShowTime=function(){return this.showTime},i([c(cc.Label)],t.prototype,"time",void 0),i([c(cc.AudioSource)],t.prototype,"stopBetVoice",void 0),t=i([a],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../common/Const":"Const","../../common/EventBus":"EventBus","../../store/Config/ConfigManage":"ConfigManage"}],MjDouble:[function(e,t,o){"use strict";cc._RF.push(t,"feae7kSwatEObXdK/uGiQX6","MjDouble");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../common/Const"),a=cc._decorator,c=a.ccclass,s=a.property,u=e("../../common/EventBus"),l=e("../../common/Const"),p=e("../../common/Util"),d=e("../../store/Room/RoomManage"),h=e("../../store/Races/RaceManage"),f=e("../../store/Config/ConfigManage"),m=e("../../common/Log"),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.one=null,t.two=null,t.oneThirdIcon=null,t.halfIcon=null,t.allIcon=null,t.majongIcons=[],t.singleIntervalTime=.2,t.twoIntervalTime=.1,t.twoLocationIntervalTime=.45,t.majongVoiceZhenDian=[],t.majongVoiceHalf=[],t.kaipaiVoice=null,t.erbagangVoice=null,t.openHeight=23,t}return n(t,e),t.prototype.start=function(){this.initTime()},t.prototype.initTime=function(){var e=Math.floor(f.default.getShowDownTime()/4/(2*this.singleIntervalTime+this.twoIntervalTime+this.twoLocationIntervalTime)*100)/100;this.twoIntervalTime=e*this.twoIntervalTime,this.singleIntervalTime=e*this.singleIntervalTime,this.twoLocationIntervalTime=e*this.twoLocationIntervalTime},t.prototype.open=function(e){var t=this,o=d.default.roomItem.oningRaceNum,n=h.default.raceList[o].getMahjongScore(e);this.openAnimation(this.one,n.one,function(){t.scheduleOnce(function(){t.toVoiceNotice(n),t.openAnimation(t.two,n.two,function(){var o=t.getNextTableLocation(e);o?t.scheduleOnce(function(){u.eventBus.emit(l.EventType.LOCAL_NOTICE_EVENT,{type:l.LocalNoticeEventType.OPEN_CARD_REQUEST_NOTICE,info:o})},t.twoLocationIntervalTime):u.eventBus.emit(l.EventType.LOCAL_NOTICE_EVENT,{type:l.LocalNoticeEventType.OPEN_CARD_FINISHED_NOTICE})})},t.twoIntervalTime)})},t.prototype.toVoiceNotice=function(e){var t=0;if(e.one!==e.two)if(2===e.one&&8===e.two||8===e.one&&2===e.two)f.default.isTxMusicOpen()&&this.erbagangVoice.play();else if(.5!==e.one||.5!==e.two){if(.5===e.one||.5===e.two)return t=.5===e.one?e.two:e.one,void(f.default.isTxMusicOpen()&&this.majongVoiceHalf[t].play());(t=e.two+e.one)>=10&&(t-=10),f.default.isTxMusicOpen()&&this.majongVoiceZhenDian[t].play()}else f.default.isTxMusicOpen()&&this.majongVoiceZhenDian[1].play();else f.default.isTxMusicOpen()&&this.majongVoiceHalf[0].play()},t.prototype.getNextTableLocation=function(e){switch(e){case r.TableLocationType.LANDLORD:return r.TableLocationType.SKY;case r.TableLocationType.SKY:return r.TableLocationType.MIDDLE;case r.TableLocationType.MIDDLE:return r.TableLocationType.LAND;case r.TableLocationType.SKY:return null}return null},t.prototype.openAnimation=function(e,t,o){var n=this,i=e.node.getPosition(),r=this.singleIntervalTime/3*2,a=this.singleIntervalTime/3;e.spriteFrame=this.oneThirdIcon,this.scheduleOnce(function(){f.default.isTxMusicOpen()&&n.kaipaiVoice.play(),e.spriteFrame=n.halfIcon,e.node.setPosition(i.x,i.y+n.openHeight),n.scheduleOnce(function(){n.drawResult(e,t),e.spriteFrame=n.allIcon,e.node.setPosition(i.x,i.y),o()},a)},r)},t.prototype.drawResult=function(e,t){t=.5===t?0:t,e.node.getChildByName("MajongSprite").getComponent(cc.Sprite).spriteFrame=this.majongIcons[t]},t.prototype.randNum=function(e,t){var o=t-e+1;return Math.floor(Math.random()*o+e)},t.prototype.getTableLocationType=function(){return this.node.name==="MjDouble"+r.TableLocationType.LAND?r.TableLocationType.LAND:this.node.name==="MjDouble"+r.TableLocationType.LANDLORD?r.TableLocationType.LANDLORD:this.node.name==="MjDouble"+r.TableLocationType.MIDDLE?r.TableLocationType.MIDDLE:this.node.name==="MjDouble"+r.TableLocationType.SKY?r.TableLocationType.SKY:(m.default.e([],"MjDouble",["\u672a\u77e5\u7684\u724c\u4f4d"]),null)},t.prototype.onEnable=function(){var e=this;this.localEventId=p.randEventId(),u.eventBus.on(l.EventType.LOCAL_NOTICE_EVENT,this.localEventId,function(t){if(t.type===l.LocalNoticeEventType.OPEN_CARD_REQUEST_NOTICE){var o=t.info;e.getTableLocationType()==o&&e.open(o)}else if(t.type===l.LocalNoticeEventType.OPEN_IMMEDIATELY){m.default.d([],"MjDouble",["\u63a5\u53d7\u5230\u4f5c\u5f0a\u7ffb\u724c\u901a\u77e5\uff0c\u5f00\u59cb\u7ffb\u724c"]);try{var n=h.default.raceList[d.default.roomItem.oningRaceNum].getMahjongScore(e.getTableLocationType());m.default.d([],"MjDouble",["\u7ffb\u724c\u70b9\u6570",n]),e.openAnimation(e.one,n.one,function(){}),e.openAnimation(e.two,n.two,function(){})}catch(e){m.default.e([],"MjDouble",["\u5168\u90e8\u7ffb\u724c\u903b\u8f91\u62a5\u9519",e.toLocaleString()])}}})},t.prototype.onDisable=function(){u.eventBus.off(l.EventType.LOCAL_NOTICE_EVENT,this.localEventId)},i([s(cc.Sprite)],t.prototype,"one",void 0),i([s(cc.Sprite)],t.prototype,"two",void 0),i([s(cc.SpriteFrame)],t.prototype,"oneThirdIcon",void 0),i([s(cc.SpriteFrame)],t.prototype,"halfIcon",void 0),i([s(cc.SpriteFrame)],t.prototype,"allIcon",void 0),i([s([cc.SpriteFrame])],t.prototype,"majongIcons",void 0),i([s([cc.AudioSource])],t.prototype,"majongVoiceZhenDian",void 0),i([s([cc.AudioSource])],t.prototype,"majongVoiceHalf",void 0),i([s(cc.AudioSource)],t.prototype,"kaipaiVoice",void 0),i([s(cc.AudioSource)],t.prototype,"erbagangVoice",void 0),t=i([c],t)}(cc.Component);o.default=y,cc._RF.pop()},{"../../common/Const":"Const","../../common/EventBus":"EventBus","../../common/Log":"Log","../../common/Util":"Util","../../store/Config/ConfigManage":"ConfigManage","../../store/Races/RaceManage":"RaceManage","../../store/Room/RoomManage":"RoomManage"}],PlayButton:[function(e,t,o){"use strict";cc._RF.push(t,"21a25h1+h5P5Jn82WKFmUX9","PlayButton");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,s=e("../../common/EventBus"),u=e("../../common/Const"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t}return n(t,e),t.prototype.onEnable=function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){s.eventBus.emit(u.EventType.LOCAL_NOTICE_EVENT,{type:u.LocalNoticeEventType.PLAY_BUTTON_EVENT}),e.node.destroy()})},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,function(){})},t.prototype.start=function(){},i([c(cc.Label)],t.prototype,"label",void 0),i([c],t.prototype,"text",void 0),t=i([a],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../../common/Const":"Const","../../common/EventBus":"EventBus"}],PlayRule:[function(e,t,o){"use strict";cc._RF.push(t,"a9fa2eeHnxNw4qH3Xg3aqH0","PlayRule");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.closeButton=null,t}return n(t,e),t.prototype.start=function(){var e=this;this.closeButton.node.on(cc.Node.EventType.TOUCH_END,function(){e.node.destroy()}),this.node.on(cc.Node.EventType.TOUCH_START,function(){e.node.active=!1})},i([c(cc.RichText)],t.prototype,"label",void 0),i([c(cc.Sprite)],t.prototype,"closeButton",void 0),t=i([a],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],PlayUserIcon:[function(e,t,o){"use strict";cc._RF.push(t,"372b8+rrxVGgqzmziHdELsC","PlayUserIcon");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../common/EventBus"),a=e("../../common/Const"),c=e("../../common/Util"),s=e("../../store/Room/RoomManage"),u=e("../../store/User/UserManage"),l=e("../../store/Races/RaceManage"),p=e("../../common/FaceList"),d=e("../../common/WenZiList"),h=e("../../store/Config/ConfigManage"),f=cc._decorator,m=f.ccclass,y=f.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.userName=null,t.voicePlayAnimation=null,t.userScoreLabel=null,t.userIcon=null,t.kickButton=null,t.offLineIcon=null,t.fangZhuIcon=null,t.eventIdOne="",t.eventIdTwo="",t.eventIdThree="",t.eventIdFour="",t.eventIdFive="",t.eventIdSix="",t.eventIdSeven="",t.memberData=null,t.messageIconPref=null,t.messageZiPref=null,t}return n(t,e),t.prototype.start=function(){var e=this;this.kickButton.node.on(cc.Node.EventType.TOUCH_END,function(){try{e.kickButton.node.active=!1,cc.find("Canvas").getComponent("RollRoomScene").kickoutButtonClick(e.memberData.userId,e.memberData.userName)}catch(e){}}),this.userIcon.node.on(cc.Node.EventType.TOUCH_END,function(){s.default.roomItem.creatUserId==u.default.userInfo.id&&e.memberData.userId!=u.default.userInfo.id&&(e.kickButton.node.active=!e.kickButton.node.active)})},t.prototype.changeByUserState=function(e){switch(this.memberData.state=e,e){case a.memberState.OffLine:this.offLineIcon.node.active=!0;break;case a.memberState.OnLine:this.offLineIcon.node.active=!1}},t.prototype.setShow=function(e){var t=this;if(this.memberData=e,this.memberData.userId==s.default.roomItem.creatUserId&&(this.fangZhuIcon.node.active=!0),this.userIcon.spriteFrame=null,this.userName.string=e.userName,this.changeByUserState(e.state),this.updateScoreShow(e.xiaZhuVal),s.default.getEnterRoomParam().model===a.EnterRoomModel.EMULATOR_ROOM&&this.memberData.userId!=u.default.userInfo.id)cc.loader.loadRes(e.userIcon,function(e,o){var n=new cc.SpriteFrame(o);null!==n&&null!=t.userIcon&&(t.userIcon.spriteFrame=n)});else{var o=h.default.getUserIconUrl()+e.userIcon;cc.loader.load({url:o,type:"png"},function(e,o){var n=new cc.SpriteFrame(o);null!==n&&null!=t.userIcon&&(t.userIcon.spriteFrame=n)})}},t.prototype.updateScoreShow=function(e){this.memberData.xiaZhuVal=e,this.userScoreLabel.string=e+""},t.prototype.getMemberData=function(){return this.memberData},t.prototype.onLoad=function(){},t.prototype.onEnable=function(){var e=this;this.eventIdOne=c.randEventId(),r.eventBus.on(a.EventType.BET_CHIP_CHANGE_EVENT,this.eventIdOne,function(t){if(t.userId==e.memberData.userId){var o=t.toValue-t.fromVal,n=e.memberData.xiaZhuVal-o;e.updateScoreShow(n),t.userId==u.default.userInfo.id&&(cc.find("Canvas").getComponent("RollRoomScene").userScoreLabel.string=e.userScoreLabel.string)}}),this.eventIdTwo=c.randEventId(),r.eventBus.on(a.EventType.USER_SCORE_NOTICE,this.eventIdTwo,function(t){void 0!==t[e.memberData.userId]?e.updateScoreShow(t[e.memberData.userId]):e.updateScoreShow(0)}),this.eventIdThree=c.randEventId(),r.eventBus.on(a.EventType.BET_CANCE_NOTICE,this.eventIdThree,function(t){if(t.userId==e.memberData.userId){var o=t.fromVal,n=e.memberData.xiaZhuVal+o;e.updateScoreShow(n),t.userId==u.default.userInfo.id&&(cc.find("Canvas").getComponent("RollRoomScene").userScoreLabel.string=e.userScoreLabel.string)}}),this.eventIdFour=c.randEventId(),r.eventBus.on(a.EventType.MEMBER_STATE_CHANGE,this.eventIdFour,function(t){t.userId==e.memberData.userId&&e.changeByUserState(t.state)}),this.eventIdFive=c.randEventId(),r.eventBus.on(a.EventType.RACE_STATE_CHANGE_EVENT,this.eventIdFive,function(t){switch(t.toState){case a.RaceState.SHOW_DOWN:if(s.default.getEnterRoomParam().model===a.EnterRoomModel.EMULATOR_ROOM){var o=l.default.getUserScore(e.memberData.userId);e.scheduleOnce(function(){e.updateScoreShow(o),e.memberData.userId==u.default.userInfo.id&&(cc.find("Canvas").getComponent("RollRoomScene").userScoreLabel.string=e.userScoreLabel.string)},h.default.getShowDownTime()+1)}}}),this.eventIdSix=c.randEventId(),r.eventBus.on(a.EventType.CARTON_MESSAGE_NOTICE,this.eventIdSix,function(t){if(t.userId==e.memberData.userId)if(t.type==a.ChatMessageType.PIC){var o=p.faceList[t.message];e.faceShow(o)}else if(t.type==a.ChatMessageType.QIANG_ZHUANG){o={name:"jzhuang",size:{x:80,y:41}};e.faceShow(o)}else e.ziShow(t)}),this.eventIdSeven=c.randEventId(),r.eventBus.on(a.EventType.LOCAL_NOTICE_EVENT,this.eventIdSeven,function(t){switch(t.type){case a.LocalNoticeEventType.PLAY_AUDIO_LOCAL_NOTICE:var o=t.info,n=Math.ceil(o.duration/1e3);o.userId==e.memberData.userId&&(e.voicePlayAnimation.node.active=!0,e.voicePlayAnimation.play(),e.scheduleOnce(function(){e.voicePlayAnimation.node.active=!1,e.voicePlayAnimation.stop()},n))}})},t.prototype.faceShow=function(e){var t=this;cc.loader.loadRes("ChatCarton/"+e.name,function(o,n){var i=cc.instantiate(t.messageIconPref);i.parent=t.node.parent.parent;var r=t.node.parent.position.x+50,a=t.node.parent.position.y+30;i.setPosition(r,a),i.width=e.size.x,i.height=e.size.y;var c=new cc.SpriteFrame(n);i.getChildByName("Pic").getComponents(cc.Sprite)[0].spriteFrame=c,setTimeout(function(){i.destroy()},2e3)})},t.prototype.ziShow=function(e){var t=cc.instantiate(this.messageZiPref);t.parent=this.node.parent.parent;var o=this.node.parent.position.x,n=this.node.parent.position.y-50;t.setPosition(o,n),t.getComponent(cc.Label).string=d.wenZiList[e.message].content,setTimeout(function(){t.destroy()},2e3)},t.prototype.onDisable=function(){r.eventBus.off(a.EventType.BET_CHIP_CHANGE_EVENT,this.eventIdOne),r.eventBus.off(a.EventType.USER_SCORE_NOTICE,this.eventIdTwo),r.eventBus.off(a.EventType.BET_CANCE_NOTICE,this.eventIdThree),r.eventBus.off(a.EventType.MEMBER_STATE_CHANGE,this.eventIdFour),r.eventBus.off(a.EventType.RACE_STATE_CHANGE_EVENT,this.eventIdFive),r.eventBus.off(a.EventType.CARTON_MESSAGE_NOTICE,this.eventIdSix),r.eventBus.off(a.EventType.LOCAL_NOTICE_EVENT,this.eventIdSeven)},t.prototype.update=function(e){},i([y(cc.Label)],t.prototype,"userName",void 0),i([y(cc.Animation)],t.prototype,"voicePlayAnimation",void 0),i([y(cc.Label)],t.prototype,"userScoreLabel",void 0),i([y(cc.Sprite)],t.prototype,"userIcon",void 0),i([y(cc.Sprite)],t.prototype,"kickButton",void 0),i([y(cc.Sprite)],t.prototype,"offLineIcon",void 0),i([y(cc.Sprite)],t.prototype,"fangZhuIcon",void 0),i([y(cc.Prefab)],t.prototype,"messageIconPref",void 0),i([y(cc.Prefab)],t.prototype,"messageZiPref",void 0),t=i([m],t)}(cc.Component);o.default=g,cc._RF.pop()},{"../../common/Const":"Const","../../common/EventBus":"EventBus","../../common/FaceList":"FaceList","../../common/Util":"Util","../../common/WenZiList":"WenZiList","../../store/Config/ConfigManage":"ConfigManage","../../store/Races/RaceManage":"RaceManage","../../store/Room/RoomManage":"RoomManage","../../store/User/UserManage":"UserManage"}],RaceItem:[function(e,t,o){"use strict";cc._RF.push(t,"a3edcuE7yZBxpmdhJ2EHEEL","RaceItem"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../common/EventBus"),i=e("../../common/Const"),r=e("../GameMember/GameMemberManage"),a=e("../../common/Util"),c=function(){function e(e){this.raceId=null,this.num=null,this._state=null,this._landlordId=null,this.landlordScore=null,this.skyScore=null,this.middleScore=null,this.landScore=null,this.points=null,this.landResult=null,this.middleResult=null,this.bridgResult=null,this.landCornerResult=null,this.skyCornerResult=null,this.skyResult=null,this.raceResultList=null,this.raceId=e.id,this.num=e.raceNum,this._state=e.playState,this.landlordScore=e.landlordScore,this.skyScore=e.skyScore,this.middleScore=e.middleScore,this.landScore=e.landScore,this.points=e.points,this._landlordId=e.landlordId,this.landResult=e.landResult,this.middleResult=e.middleResult,this.bridgResult=e.bridgResult,this.landCornerResult=e.landCornerResult,this.skyCornerResult=e.skyCornerResult,this.skyResult=e.skyResult}return e.prototype.getUserRaceScore=function(e){if(null===this.raceResultList)return 0;for(var t=0;t<this.raceResultList.length;t++)if(this.raceResultList[t].userId===e)return this.raceResultList[t].score;return 0},e.prototype.getLocationResult=function(e){switch(e){case i.betLocaion.SKY:return this.skyResult;case i.betLocaion.MIDDLE:return this.middleResult;case i.betLocaion.LAND:return this.landResult;case i.betLocaion.SKY_CORNER:return this.skyCornerResult;case i.betLocaion.BRIDG:return this.bridgResult;case i.betLocaion.LAND_CORNER:return this.landCornerResult}return null},e.prototype.setRaceResultList=function(e){this.raceResultList=a.getMemeberResultScoreList(e,r.default.gameMenmberList)},e.prototype.getMahjongScore=function(e){switch(e){case i.TableLocationType.SKY:return this.skyScore;case i.TableLocationType.MIDDLE:return this.middleScore;case i.TableLocationType.LAND:return this.landScore;case i.TableLocationType.LANDLORD:return this.landlordScore}},Object.defineProperty(e.prototype,"landlordId",{get:function(){return this._landlordId},enumerable:!0,configurable:!0}),e.prototype.setLandlordId=function(e,t){t==this.num&&n.eventBus.emit(i.EventType.LANDLORD_CAHNGE_EVENT,e),this._landlordId=e},Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(e){if(null!=this._state){this._state=e;var t={toState:e,raceId:this.raceId,raceNum:this.num};n.eventBus.emit(i.EventType.RACE_STATE_CHANGE_EVENT,t)}this._state=e},enumerable:!0,configurable:!0}),e}();o.default=c,cc._RF.pop()},{"../../common/Const":"Const","../../common/EventBus":"EventBus","../../common/Util":"Util","../GameMember/GameMemberManage":"GameMemberManage"}],RaceList:[function(e,t,o){"use strict";cc._RF.push(t,"9e961hYkD5CS7a5yxcMWQC4","RaceList"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../common/Const");o.RaceList=[{id:"1",raceNum:0,landlordId:"6666661",playState:n.RaceState.NOT_BEGIN,landlordScore:{one:2,two:8},skyScore:{one:3,two:4},middleScore:{one:4,two:1},landScore:{one:1,two:9},points:{one:6,two:5},landResult:n.CompareDxRe.SMALL,middleResult:n.CompareDxRe.SMALL,bridgResult:n.CompareDxRe.SMALL,landCornerResult:n.CompareDxRe.SMALL,skyCornerResult:n.CompareDxRe.SMALL,skyResult:n.CompareDxRe.SMALL},{id:"2",raceNum:1,landlordId:"6666661",playState:n.RaceState.NOT_BEGIN,landlordScore:{one:.5,two:3},skyScore:{one:3,two:3},middleScore:{one:6,two:1},landScore:{one:2,two:1},points:{one:1,two:1},landResult:n.CompareDxRe.SMALL,middleResult:n.CompareDxRe.BIG,bridgResult:n.CompareDxRe.EQ,landCornerResult:n.CompareDxRe.EQ,skyCornerResult:n.CompareDxRe.BIG,skyResult:n.CompareDxRe.BIG},{id:"3",raceNum:2,landlordId:"6666661",playState:n.RaceState.NOT_BEGIN,landlordScore:{one:2,two:4},skyScore:{one:6,two:1},middleScore:{one:7,two:.5},landScore:{one:8,two:8},points:{one:4,two:4},landResult:n.CompareDxRe.BIG,middleResult:n.CompareDxRe.BIG,bridgResult:n.CompareDxRe.BIG,landCornerResult:n.CompareDxRe.BIG,skyCornerResult:n.CompareDxRe.BIG,skyResult:n.CompareDxRe.BIG},{id:"4",raceNum:3,landlordId:"6666661",playState:n.RaceState.NOT_BEGIN,landlordScore:{one:5,two:5},skyScore:{one:1,two:1},middleScore:{one:3,two:4},landScore:{one:8,two:2},points:{one:2,two:3},landResult:n.CompareDxRe.BIG,middleResult:n.CompareDxRe.SMALL,bridgResult:n.CompareDxRe.EQ,landCornerResult:n.CompareDxRe.EQ,skyCornerResult:n.CompareDxRe.SMALL,skyResult:n.CompareDxRe.SMALL}],cc._RF.pop()},{"../common/Const":"Const"}],RaceMajResult:[function(e,t,o){"use strict";cc._RF.push(t,"e1977sNtsVGVaxkR1TyWNMO","RaceMajResult");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.majResultIcon=null,t}return n(t,e),t.prototype.start=function(){},i([c(cc.Sprite)],t.prototype,"majResultIcon",void 0),t=i([a],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],RaceManage:[function(e,t,o){"use strict";cc._RF.push(t,"ca693/AEmVGO6ROE0M6G/V5","RaceManage"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./RaceItem"),i=e("../../common/Const"),r=e("../../store/Room/RoomManage"),a=e("../Bets/BetManage"),c=e("../GameMember/GameMemberManage"),s=e("../../common/Util"),u=function(){function e(){this.raceList=[],this.clickXiaZhuVal=0}return e.prototype.setRaceList=function(e){var t=this;e.forEach(function(e){t.raceList[e.raceNum]=new n.default(e)})},e.prototype.clear=function(){this.raceList=[],this.gameOverResultList=null},e.prototype.getClickXiaZhuVal=function(){return this.clickXiaZhuVal},e.prototype.setClickXiaZhuVal=function(e){this.clickXiaZhuVal=e},e.prototype.setGameOverResultList=function(e){this.gameOverResultList=s.getMemeberResultScoreList(e,c.default.gameMenmberList)},e.prototype.getUserTheRaceScore=function(e,t){var o=0,n=this.raceList[e];return t===this.raceList[e].landlordId?void 0===a.default.betList[e]?o:(a.default.betList[e].forEach(function(e){o-=e.getScore(n.skyResult,n.middleResult,n.landResult,n.skyCornerResult,n.bridgResult,n.landCornerResult)}),o):void 0===a.default.betList[e]||void 0===a.default.betList[e][t]?o:a.default.betList[e][t].getScore(n.skyResult,n.middleResult,n.landResult,n.skyCornerResult,n.bridgResult,n.landCornerResult)},e.prototype.getUserScore=function(e){for(var t=0,o=0;o<=r.default.roomItem.oningRaceNum;o++)this.raceList[o].state==i.RaceState.BET?void 0!==a.default.betList[o]&&void 0!==a.default.betList[o][e]&&(t-=a.default.betList[o][e].getXiaZhuVal()):t+=this.getUserTheRaceScore(o,e);return t},e.prototype.requestRaceList=function(){var e=this;return new Promise(function(t){t({result:i.PromiseResult.SUCCESS,extObject:e.raceList})})},e.prototype.getPlayingRaceInfo=function(){for(var e=0;e<this.raceList.length;e++)if(this.raceList[e].state!==i.RaceState.NOT_BEGIN&&this.raceList[e].state!==i.RaceState.FINISHED)return this.raceList[e];return null},e.prototype.changeRaceState=function(e){var t=r.default.roomItem.oningRaceNum;this.raceList[t].state=e},e.prototype.changeRaceLandlord=function(e,t,o){for(var n=0,i=r.default.roomItem.oningRaceNum;n<t;)void 0!==this.raceList[o+n]&&this.raceList[o+n].setLandlordId(e,i),n++},e}();o.default=new u,cc._RF.pop()},{"../../common/Const":"Const","../../common/Util":"Util","../../store/Room/RoomManage":"RoomManage","../Bets/BetManage":"BetManage","../GameMember/GameMemberManage":"GameMemberManage","./RaceItem":"RaceItem"}],RaceResultPanel:[function(e,t,o){"use strict";cc._RF.push(t,"f39bbbNl4dPoomoJmZSyLmg","RaceResultPanel");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,s=e("../../store/Races/RaceManage"),u=e("../../store/Room/RoomManage"),l=e("../../store/User/UserManage"),p=e("../../common/Const"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.myScore=null,t.memberScoreItem=null,t.landlordName=null,t.landlordScore=null,t.sky_dian_1=null,t.sky_dian_2=null,t.middle_dian_1=null,t.middle_dian_2=null,t.land_dian_1=null,t.land_dian_2=null,t.landlord_dian_1=null,t.landlord_dian_2=null,t.skyWinOrFail=null,t.middleWinOrFail=null,t.landWinOrFail=null,t.userWinOrFail=null,t.majongWinIcon=null,t.majongFailIcon=null,t.userWinIcon=null,t.userFailIcon=null,t.majongIcons=[],t}return n(t,e),t.prototype.start=function(){var e=this;this.show(),this.node.on(cc.Node.EventType.TOUCH_END,function(t){e.node.destroy()})},t.prototype.drawResult=function(e,t){t=.5===t?0:t,e.node.getChildByName("MajongSprite").getComponent(cc.Sprite).spriteFrame=this.majongIcons[t]},t.prototype.show=function(){var e=this,t=u.default.roomItem.oningRaceNum,o=s.default.raceList[t],n=o.landlordId;this.drawResult(this.sky_dian_1,o.skyScore.one),this.drawResult(this.sky_dian_2,o.skyScore.two),this.drawResult(this.middle_dian_1,o.middleScore.one),this.drawResult(this.middle_dian_2,o.middleScore.two),this.drawResult(this.land_dian_1,o.landScore.one),this.drawResult(this.land_dian_2,o.landScore.two),this.drawResult(this.landlord_dian_1,o.landlordScore.one),this.drawResult(this.landlord_dian_2,o.landlordScore.two),this.showWinOrFailIcon(o);var i=0;(null==s.default.raceList[t].raceResultList?[]:s.default.raceList[t].raceResultList).forEach(function(t){i++;var o=cc.instantiate(e.memberScoreItem),r=o.getChildByName("name").getComponents(cc.Label),a=o.getChildByName("score").getComponents(cc.Label);r[0].string=i+". "+t.nick,t.userId===n&&(e.landlordName.string=t.nick,e.landlordScore.string=t.score+""),t.score>0&&(a[0].node.color=cc.Color.YELLOW),a[0].string=t.score+"",o.parent=e.node.getChildByName("MemberList"),l.default.userInfo.id===t.userId&&(e.myScore.string=t.score+"",e.userWinOrFail.spriteFrame=t.score>=0?e.userWinIcon:e.userFailIcon,0===t.score?e.userWinOrFail.node.active=!1:e.userWinOrFail.node.active=!0)})},t.prototype.showWinOrFailIcon=function(e){try{this.skyWinOrFail.spriteFrame=e.skyResult===p.CompareDxRe.BIG?this.majongWinIcon:this.majongFailIcon,this.middleWinOrFail.spriteFrame=e.middleResult===p.CompareDxRe.BIG?this.majongWinIcon:this.majongFailIcon,this.landWinOrFail.spriteFrame=e.landResult===p.CompareDxRe.BIG?this.majongWinIcon:this.majongFailIcon}catch(e){}},i([c(cc.Label)],t.prototype,"myScore",void 0),i([c(cc.Prefab)],t.prototype,"memberScoreItem",void 0),i([c(cc.Label)],t.prototype,"landlordName",void 0),i([c(cc.Label)],t.prototype,"landlordScore",void 0),i([c(cc.Sprite)],t.prototype,"sky_dian_1",void 0),i([c(cc.Sprite)],t.prototype,"sky_dian_2",void 0),i([c(cc.Sprite)],t.prototype,"middle_dian_1",void 0),i([c(cc.Sprite)],t.prototype,"middle_dian_2",void 0),i([c(cc.Sprite)],t.prototype,"land_dian_1",void 0),i([c(cc.Sprite)],t.prototype,"land_dian_2",void 0),i([c(cc.Sprite)],t.prototype,"landlord_dian_1",void 0),i([c(cc.Sprite)],t.prototype,"landlord_dian_2",void 0),i([c(cc.Sprite)],t.prototype,"skyWinOrFail",void 0),i([c(cc.Sprite)],t.prototype,"middleWinOrFail",void 0),i([c(cc.Sprite)],t.prototype,"landWinOrFail",void 0),i([c(cc.Sprite)],t.prototype,"userWinOrFail",void 0),i([c(cc.SpriteFrame)],t.prototype,"majongWinIcon",void 0),i([c(cc.SpriteFrame)],t.prototype,"majongFailIcon",void 0),i([c(cc.SpriteFrame)],t.prototype,"userWinIcon",void 0),i([c(cc.SpriteFrame)],t.prototype,"userFailIcon",void 0),i([c([cc.SpriteFrame])],t.prototype,"majongIcons",void 0),t=i([a],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../common/Const":"Const","../../store/Races/RaceManage":"RaceManage","../../store/Room/RoomManage":"RoomManage","../../store/User/UserManage":"UserManage"}],RapLandlordButton:[function(e,t,o){"use strict";cc._RF.push(t,"eff0eN8/iFJ3YAok25uOX0N","RapLandlordButton");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../common/EventBus"),a=e("../../common/Const"),c=cc._decorator,s=c.ccclass,u=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.focus=null,t}return n(t,e),t.prototype.start=function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_START,function(){e.node.parent.parent.getComponent("RollRoomScene").playWoQiangVoice(),r.eventBus.emit(a.EventType.LOCAL_NOTICE_EVENT,{type:a.LocalNoticeEventType.LOCAL_BE_LANDLORD_RESULT,info:!0}),e.node.active=!1})},t.prototype.update=function(e){this.focus.node.angle=this.focus.node.angle+.2},i([u(cc.Sprite)],t.prototype,"focus",void 0),t=i([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../../common/Const":"Const","../../common/EventBus":"EventBus"}],RechargePanel:[function(e,t,o){"use strict";cc._RF.push(t,"427d4qR1r5KmYDcFV+NczOD","RechargePanel");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function a(e){try{s(n.next(e))}catch(e){r(e)}}function c(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):new o(function(t){t(e.value)}).then(a,c)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../store/Config/ConfigManage"),s=cc._decorator,u=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.oneRechargePart=null,t.twoRechargePart=null,t.threeRechargePart=null,t.fourRechargePart=null,t.closeButton=null,t.cutomerWechat=null,t}return n(t,e),t.prototype.start=function(){this.cutomerWechat.string="\u8bf7\u8054\u7cfb\u5ba2\u670d\u8d2d\u4e70\uff0c\u5ba2\u670d\u5fae\u4fe1\u53f7"+c.default.getCustomerWechatNum()},t.prototype.onEnable=function(){var e=this;this.closeButton.node.on(cc.Node.EventType.TOUCH_END,function(){e.node.destroy()}),this.oneRechargePart.on(cc.Node.EventType.TOUCH_END,function(){e.buyDiamond(2e3)}),this.twoRechargePart.on(cc.Node.EventType.TOUCH_END,function(){e.buyDiamond(1e3)}),this.threeRechargePart.on(cc.Node.EventType.TOUCH_END,function(){e.buyDiamond(500)}),this.fourRechargePart.on(cc.Node.EventType.TOUCH_END,function(){e.buyDiamond(100)}),this.node.on(cc.Node.EventType.TOUCH_START,function(){e.node.destroy()})},t.prototype.buyDiamond=function(e){return r(this,void 0,void 0,function(){return a(this,function(e){return this.node.destroy(),[2]})})},i([l(cc.Node)],t.prototype,"oneRechargePart",void 0),i([l(cc.Node)],t.prototype,"twoRechargePart",void 0),i([l(cc.Node)],t.prototype,"threeRechargePart",void 0),i([l(cc.Node)],t.prototype,"fourRechargePart",void 0),i([l(cc.Sprite)],t.prototype,"closeButton",void 0),i([l(cc.Label)],t.prototype,"cutomerWechat",void 0),t=i([u],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../store/Config/ConfigManage":"ConfigManage"}],RollControlerBase:[function(e,t,o){"use strict";cc._RF.push(t,"69352EmXJFJbJMSEg+QaVda","RollControlerBase"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./EventBus"),i=e("../store/Room/RoomManage"),r=e("../store/Races/RaceManage"),a=e("../store/Config/ConfigManage"),c=e("./Util"),s=e("./Const"),u=e("../store/Bets/BetManage"),l=e("../store/User/UserManage"),p=e("../common/WebSocketManage"),d=e("../store/GameMember/GameMemberManage"),h=e("loglevel"),f=function(){function e(e,t,o){this.eventIdList=[],this.name="RollController",this.setTimeoutList=[],this.cc=e,this.isEmulatorRoom=t,this.roomScene=o}return e.prototype.execBetAction=function(){this.isEmulatorRoom&&this.emulateBet(),this.roomScene.adjustBeforeRaceStateChange(s.RaceState.BET),this.roomScene.showXiaZhuPanel(),this.cc.find("Canvas").getChildByName("DealMachine").getComponent("DealMachine").checkAndAddMajong(),this.roomScene.showMiddleTopTimePanel(),this.roomScene.showMiddleTopScorePanel()},e.prototype.execDealAction=function(){var e=this;this.roomScene.adjustBeforeRaceStateChange(s.RaceState.DEAL);var t=cc.instantiate(this.roomScene.kaiShipTip);this.roomScene.scheduleOnce(function(){t.parent=e.cc.find("Canvas/Desk"),t.setPosition(0,0),t.active=!0,a.default.isTxMusicOpen()&&e.roomScene.beginVoice.play(),e.roomScene.scheduleOnce(function(){t.destroy(),e.roomScene.beginRollDice(),e.roomScene.showXiaZhuPanel()},a.default.getBeginTextShowTime())},a.default.getTimeBeforeBeginText())},e.prototype.responseLocalBeLandlordDeal=function(e){var t=l.default.userInfo.id,o=i.default.roomItem.oningRaceNum;if(e){var n={type:s.NoticeType.landlordSelected,info:{roomId:i.default.roomItem.id,raceNum:o,landlordId:t}};p.default.send(JSON.stringify(n))}},e.prototype.emulateXiaZhuByUser=function(e){var t=a.default.getChipValList(),o=i.default.roomItem.oningRaceNum;if(r.default.raceList[o].state===s.RaceState.BET){var n=a.default.getBetTime(),l=c.randFloatNum(1,n-1),p=setTimeout(function(){u.default.addBet(o,e,s.betLocaion.LAND_CORNER,t[c.randomRange(0,4)])},1e3*l);this.setTimeoutList.push(p),l=c.randFloatNum(1,n-1);var d=setTimeout(function(){u.default.addBet(o,e,s.betLocaion.SKY,t[c.randomRange(0,4)])},1e3*l);this.setTimeoutList.push(d),l=c.randFloatNum(1,n-1);var h=setTimeout(function(){u.default.addBet(o,e,s.betLocaion.BRIDG,t[c.randomRange(0,4)])},1e3*l);this.setTimeoutList.push(h),l=c.randFloatNum(1,n-1);var f=setTimeout(function(){u.default.addBet(o,e,s.betLocaion.LAND,t[c.randomRange(0,4)])},1e3*l);this.setTimeoutList.push(f),l=c.randFloatNum(1,n-1);var m=setTimeout(function(){u.default.addBet(o,e,s.betLocaion.MIDDLE,t[c.randomRange(0,4)])},1e3*l);this.setTimeoutList.push(m),l=c.randFloatNum(1,n-1);var y=setTimeout(function(){u.default.addBet(o,e,s.betLocaion.SKY_CORNER,t[c.randomRange(0,4)])},1e3*l);this.setTimeoutList.push(y)}},e.prototype.getRoomResultList=function(){for(var e=i.default.roomItem.playCount,t=this.getRaceResultList(0),o=1;o<e;o++){var n=this.getRaceResultList(o);t=c.mergeRaceResult(t,n)}return t},e.prototype.getRaceResultList=function(e){var t=[];return d.default.gameMenmberList.forEach(function(o){var n={userId:o.userId,score:null,nick:o.nick,icon:o.icon};n.score=r.default.getUserTheRaceScore(e,o.userId),t.push(n)}),t},e.prototype.emulateBet=function(){var e=this,t=i.default.roomItem.oningRaceNum,o=r.default.raceList[t].landlordId;d.default.gameMenmberList.forEach(function(t){t.userId!==o&&t.userId!==l.default.userInfo.id&&e.emulateXiaZhuByUser(t.userId)})},e.prototype.enterSocketRoom=function(){if(i.default.roomItem.roomState!==s.roomState.CLOSE){var e={type:s.NoticeType.enterRoom,info:{roomId:i.default.roomItem.id,userId:l.default.userInfo.id}};h.default.getLogger(this.name).info("\u8fdb\u5165\u623f\u95f4socket\u8bf7\u6c42",e),p.default.send(JSON.stringify(e))}},e.prototype.playButtonExec=function(){if(this.isEmulatorRoom)i.default.roomItem.roomState=s.roomState.PLAYING,r.default.changeRaceState(s.RaceState.DEAL);else{var e={type:s.NoticeType.startRoomGame,info:{roomId:i.default.roomItem.id,userId:l.default.userInfo.id}};p.default.send(JSON.stringify(e))}},e.prototype.toStartNextEmulatorRace=function(){var e=this,t=i.default.roomItem.oningRaceNum;if(t+1!==i.default.roomItem.playCount){if(!(t+1>i.default.roomItem.playCount)){var o=t+1;setTimeout(function(){i.default.roomItem.changeOningRaceNum(o),r.default.changeRaceState(s.RaceState.DEAL)},2e3)}}else setTimeout(function(){r.default.setGameOverResultList(e.getRoomResultList()),i.default.roomItem.roomState=s.roomState.CLOSE},1e3)},e.prototype.close=function(){n.eventBus.clearAll(),this.setTimeoutList.forEach(function(e){clearTimeout(e)})},e}();o.RollControlerBase=f,cc._RF.pop()},{"../common/WebSocketManage":"WebSocketManage","../store/Bets/BetManage":"BetManage","../store/Config/ConfigManage":"ConfigManage","../store/GameMember/GameMemberManage":"GameMemberManage","../store/Races/RaceManage":"RaceManage","../store/Room/RoomManage":"RoomManage","../store/User/UserManage":"UserManage","./Const":"Const","./EventBus":"EventBus","./Util":"Util",loglevel:28}],RollControler:[function(e,t,o){"use strict";cc._RF.push(t,"eaa26cuMghPwoT0KyVhUXV+","RollControler");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=e("../common/EventBus"),r=e("../common/Const"),a=e("../common/Util"),c=e("../store/Room/RoomManage"),s=e("../store/User/UserManage"),u=e("../mock/RoomInfo"),l=e("./RollControlerBase"),p=e("../mock/GameMemberList"),d=e("../store/GameMember/GameMemberManage"),h=e("../store/Races/RaceManage"),f=e("../mock/RaceList"),m=e("../store/Config/ConfigManage"),y=e("loglevel"),g=function(e){function t(t,o,n){return e.call(this,t,o,n)||this}return n(t,e),t.prototype.start=function(){this.initData(),this.localNoticeEvent(),this.raceStateChangeEvent()},t.prototype.raceStateChangeEvent=function(){var e=this,t=a.randEventId();this.eventIdList.push(t),i.eventBus.on(r.EventType.RACE_STATE_CHANGE_EVENT,t,function(t){switch(t.toState){case r.RaceState.CHOICE_LANDLORD:y.default.info("\u672c\u5730\u63a5\u5230\u901a\u77e5\u6bd4\u8d5b\u72b6\u6001\u4e3a\u62a2\u5e84\u9636\u6bb5"),c.default.roomItem.playMode==r.playMode.RAP?(y.default.info("\u6267\u884c\u62a2\u5e84\u6a21\u5f0f\u76f8\u5173\u4e1a\u52a1\u903b\u8f91"),e.roomScene.adjustBeforeRaceStateChange(r.RaceState.CHOICE_LANDLORD),e.roomScene.showChoiceLandLordPanel(),e.roomScene.showLandlordSncyTimePanel()):(e.roomScene.adjustBeforeRaceStateChange(r.RaceState.CHOICE_LANDLORD),y.default.info("\u6267\u884c\u8f6e\u5e84\u6a21\u5f0f\u4e1a\u52a1\u903b\u8f91"));break;case r.RaceState.DEAL:e.execDealAction();break;case r.RaceState.BET:e.execBetAction();var o=e.cc.find("Canvas/Desk").getComponent("Desk");o.deskPartsToOpen(),o.playingXiaZhuAnimation(),o.deskShanDong();break;case r.RaceState.SHOW_DOWN:e.roomScene.adjustBeforeRaceStateChange(r.RaceState.SHOW_DOWN),e.cc.find("Canvas").getChildByName("DealMachine").getComponent("DealMachine").checkAndAddMajong(),i.eventBus.emit(r.EventType.LOCAL_NOTICE_EVENT,{type:r.LocalNoticeEventType.OPEN_CARD_REQUEST_NOTICE,info:r.TableLocationType.LANDLORD}),h.default.setClickXiaZhuVal(0);break;case r.RaceState.FINISHED:e.isEmulatorRoom&&e.toStartNextEmulatorRace(),e.roomScene.adjustBeforeRaceStateChange(r.RaceState.FINISHED)}});var o=a.randEventId();this.eventIdList.push(o),i.eventBus.on(r.EventType.ROOM_STATE_CHANGE_EVENT,o,function(t){switch(t){case r.roomState.CLOSE:e.roomScene.showRoomResultPanel()}})},t.prototype.localNoticeEvent=function(){var e=this,t=a.randEventId();this.eventIdList.push(t),i.eventBus.on(r.EventType.LOCAL_NOTICE_EVENT,t,function(t){switch(t.type){case r.LocalNoticeEventType.PLAY_BUTTON_EVENT:e.playButtonExec();break;case r.LocalNoticeEventType.ROLL_DICE_FINISHED_NOTICE:e.roomScene.cleanRollDice(),e.roomScene.beginDeal();break;case r.LocalNoticeEventType.DELIVERY_CARD_FINISHED_NOTICE:m.default.isCheat()&&i.eventBus.emit(r.EventType.LOCAL_NOTICE_EVENT,{type:r.LocalNoticeEventType.OPEN_IMMEDIATELY}),e.isEmulatorRoom&&h.default.changeRaceState(r.RaceState.BET);break;case r.LocalNoticeEventType.LOCAL_BE_LANDLORD_RESULT:e.responseLocalBeLandlordDeal(t.info);break;case r.LocalNoticeEventType.LOCAL_TIME_XIAZHU_FINISHED_NOTICE:e.isEmulatorRoom&&setTimeout(function(){h.default.changeRaceState(r.RaceState.SHOW_DOWN)},2e3);break;case r.LocalNoticeEventType.SHOW_DOWN_ANIMATION_FINISHED_NOTICE:if(e.isEmulatorRoom){var o=e.getRaceResultList(c.default.roomItem.oningRaceNum);h.default.raceList[c.default.roomItem.oningRaceNum].setRaceResultList(o),e.roomScene.scheduleOnce(function(){h.default.changeRaceState(r.RaceState.FINISHED)},m.default.getShowResultTime())}e.roomScene.destroyMiddleTopScorePanel(),e.roomScene.toShowRaceResultPanel(),e.roomScene.closeXiaZhuPanel();break;case r.LocalNoticeEventType.TO_LOBBY_EVENT:e.roomScene.execBackLobby();break;case r.LocalNoticeEventType.BACK_MUSIC_STATE_CHANGE_NOTICE:t.info?e.roomScene.backMusic.play():e.roomScene.backMusic.stop();break;case r.LocalNoticeEventType.TO_SHOW_START_BUTTON:e.roomScene.showStartButton();break;case r.LocalNoticeEventType.SOCKET_CONNECT_NOTICE:t.info?(y.default.getLogger(e.name).info("\u63a5\u5230socket\u8fde\u63a5\u901a\u77e5\uff0c\u8fdb\u5165socket\u623f\u95f4"),e.enterSocketRoom()):(y.default.getLogger(e.name).info("\u63a5\u5230socket\u8fde\u63a5\u5931\u8d25\u901a\u77e5\uff0c\u5f39\u51fa\u63d0\u793a\u6846"),e.roomScene.scoketFailTip())}});var o=a.randEventId();this.eventIdList.push(o),i.eventBus.on(r.EventType.RACING_NUM_CHANGE_EVENT,o,function(t){var o=c.default.roomItem,n=c.default.roomItem.oningRaceNum;e.roomScene.showPlayCountLimit.string="\u5f53\u524d\u724c\u5c40\uff1a"+(n+1)+"/"+o.playCount});var n=a.randEventId();this.eventIdList.push(n),i.eventBus.on(r.EventType.USER_SCORE_NOTICE,n,function(t){void 0!==t[s.default.userInfo.id]?e.roomScene.userScoreLabel.string=t[s.default.userInfo.id]+"":e.roomScene.userScoreLabel.string="0"})},t.prototype.initData=function(){if(this.isEmulatorRoom){var e=s.default.userInfo;c.default.setRoomItem(u.roomInfo),c.default.roomItem.creatUserId=e.id;var t={userId:"",roleType:r.gameMemberType.MANAGE,nick:"",icon:"",score:0,state:r.memberState.OnLine};t.userId=e.id,t.nick=e.nick,t.icon=e.icon,p.GameMemberList.splice(0,0,t);var o=[t];p.GameMemberList.forEach(function(e){o.push(e)}),d.default.setGameMemberList(o),h.default.setRaceList(f.RaceList)}},t}(l.RollControlerBase);o.RollControler=g,o.default=g,cc._RF.pop()},{"../common/Const":"Const","../common/EventBus":"EventBus","../common/Util":"Util","../mock/GameMemberList":"GameMemberList","../mock/RaceList":"RaceList","../mock/RoomInfo":"RoomInfo","../store/Config/ConfigManage":"ConfigManage","../store/GameMember/GameMemberManage":"GameMemberManage","../store/Races/RaceManage":"RaceManage","../store/Room/RoomManage":"RoomManage","../store/User/UserManage":"UserManage","./RollControlerBase":"RollControlerBase",loglevel:28}],RollDice:[function(e,t,o){"use strict";cc._RF.push(t,"bf5272AzrNFs6naMrzqGa31","RollDice");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,s=e("../../common/EventBus"),u=e("../../common/Const"),l=e("../../store/Room/RoomManage"),p=e("../../store/Races/RaceManage"),d=e("../../store/Config/ConfigManage"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.boxBody=null,t.diceOne=null,t.diceTwo=null,t.isAdd=!0,t.oning=!1,t.isFlying=!1,t.firstKeepStopTime=.2,t.rollKeepTime=.3,t.secondKeepStopTime=.2,t.diceShowTime=.3,t.swingVal=15,t.yaosaiziVoice=null,t.dicePicList=[],t}return n(t,e),t.prototype.start=function(){var e=this;this.initTime(),this.scheduleOnce(function(){e.oning=!0,d.default.isTxMusicOpen()&&e.yaosaiziVoice.play(),e.scheduleOnce(function(){e.oning=!1,e.yaosaiziVoice.pause(),e.scheduleOnce(function(){e.showDice()},e.secondKeepStopTime)},e.rollKeepTime)},this.firstKeepStopTime)},t.prototype.initTime=function(){var e=Math.floor(d.default.getRollDiceTime()/(this.firstKeepStopTime+this.rollKeepTime+this.secondKeepStopTime+this.diceShowTime)*100)/100;this.firstKeepStopTime=e*this.firstKeepStopTime,this.rollKeepTime=e*this.rollKeepTime,this.secondKeepStopTime=e*this.secondKeepStopTime,this.diceShowTime=e*this.diceShowTime},t.prototype.showDice=function(){var e=l.default.roomItem.oningRaceNum,t=p.default.raceList[e].points;this.diceOne.spriteFrame=this.dicePicList[t.one-1],this.isFlying=!0,this.diceTwo.spriteFrame=this.dicePicList[t.two-1],this.scheduleOnce(function(){s.eventBus.emit(u.EventType.LOCAL_NOTICE_EVENT,{type:u.LocalNoticeEventType.ROLL_DICE_FINISHED_NOTICE})},this.diceShowTime)},t.prototype.randNum=function(e,t){var o=t-e+1;return Math.floor(Math.random()*o+e)},t.prototype.update=function(e){this.waggle(),this.BoxFlying()},t.prototype.BoxFlying=function(){if(this.isFlying){var e=this.boxBody.node.getPosition().y;if(!(e>600)){var t=this.boxBody.node.getPosition().x;this.boxBody.node.setPosition(t+4,e+20),this.boxBody.node.angle>-10&&(this.boxBody.node.angle=this.boxBody.node.angle-1)}}},t.prototype.waggle=function(){this.node.angle===this.swingVal&&(this.isAdd=!1),this.node.angle===-this.swingVal&&(this.isAdd=!0),(this.oning||0!==this.node.angle)&&(this.isAdd?this.node.angle=this.node.angle+3:this.node.angle=this.node.angle-3)},i([c(cc.Sprite)],t.prototype,"boxBody",void 0),i([c(cc.Sprite)],t.prototype,"diceOne",void 0),i([c(cc.Sprite)],t.prototype,"diceTwo",void 0),i([c(cc.AudioSource)],t.prototype,"yaosaiziVoice",void 0),i([c([cc.SpriteFrame])],t.prototype,"dicePicList",void 0),t=i([a],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../common/Const":"Const","../../common/EventBus":"EventBus","../../store/Config/ConfigManage":"ConfigManage","../../store/Races/RaceManage":"RaceManage","../../store/Room/RoomManage":"RoomManage"}],RollLable:[function(e,t,o){"use strict";cc._RF.push(t,"8fe59ZFGuxATozz7dxzGXaq","RollLable");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.mask=null,t.space="      ",t._strings=[],t._d1=0,t.speed=30,t._d2=0,t}return n(t,e),t.prototype.start=function(){this.addText(this.label.string)},t.prototype.addText=function(e){var t="",o=this.space;if(0===this._strings.length)this.label.node.x=this.mask.node.width,this.label.string=t+e+o,this._d1=this.label.node.width,this._d2=this.label.node.width-this._d1,this._strings.push(t+e+o),this._rollText();else if(this._d2<this.mask.node.width){for(;this.label.node.x+this._d1+this._d2<this.mask.node.width;)this.label.string=this.label.string+" ",this._d2=this.label.node.width-this._d1,t+=" ";this.label.string=this.label.string+e+o,this._d2=this.label.node.width-this._d1,this._strings.push(t+e+o)}else this._strings.push(t+e+o)},t.prototype._rollText=function(){this._strings.length>0&&setTimeout(function(){try{var e=this.label.node.x+this._d1,t=-this._d1,o=e/this.speed;this.label.node.runAction(cc.sequence(cc.moveTo(o,cc.v2(t,this.label.node.y)),cc.callFunc(function(){var e=this;if(this._strings.shift(),this._strings.length>0){this.label.node.x=0,this.label.string=this._strings[0],this._d1=this.label.node.width,this._d2=this.label.node.width-this._d1;for(var t=1;t<this._strings.length&&this.label.node.x+this._d1+this._d2<this.mask.node.width+this._d1;t++)this.label.string=this.label.string+this._strings[t],this._d2=this.label.node.width-this._d1;this._rollText()}else setTimeout(function(){e.addText(e.label.string)},5e3)}.bind(this))))}catch(e){}}.bind(this),800)},i([c(cc.Label)],t.prototype,"label",void 0),i([c(cc.Mask)],t.prototype,"mask",void 0),t=i([a],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],RollRoomScene:[function(e,t,o){"use strict";cc._RF.push(t,"c1d84s4F4pHX7QfsxzeKfUm","RollRoomScene");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function a(e){try{s(n.next(e))}catch(e){r(e)}}function c(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):new o(function(t){t(e.value)}).then(a,c)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,u=c.property,l=e("../../store/User/UserManage"),p=e("../../common/EventBus"),d=e("../../common/Const"),h=e("../../common/Util"),f=e("../../store/Races/RaceManage"),m=e("../../store/Room/RoomManage"),y=e("../../common/RollControler"),g=e("../../store/Config/ConfigManage"),_=e("../../common/WebSocketManage"),v=e("../../store/GameMember/GameMemberManage"),C=e("../../store/Bets/BetManage"),R=e("loglevel"),T=e("../../store/Voice/VoiceManage"),E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.voiceBeginButton=null,t.userIcon=null,t.rollDicePrefab=null,t.desk=null,t.exit=null,t.shareButton=null,t.playButtonPrefab=null,t.dealMachine=null,t.xiaZhu=null,t.raceResultPanel=null,t.roomResultPanel=null,t.middleTopTimePanel=null,t.middleTopScorePanel=null,t.rapLandlordButton=null,t.kaiShipTip=null,t.SetPanel=null,t.tipDialog=null,t.SharePanel=null,t.chatCartonPanel=null,t.chatCartonButton=null,t.trendPanel=null,t.trendButton=null,t.showRoomNum=null,t.showBetLimit=null,t.memberLimit=null,t.playModeShow=null,t.showPlayCountLimit=null,t.showPlayMode=null,t.zhuangIcon=null,t.xianIcon=null,t.userScoreLabel=null,t.diamondScoreLable=null,t.controller=null,t.setButton=null,t.backMusic=null,t.qinQiangZhuangVoice=null,t.woQiangVoice=null,t.TurnLandlordSure=null,t.TurnLandlordCancel=null,t.beginVoice=null,t.eventIdOne=null,t.eventIdTwo=null,t.name="RollRoomScene",t}return n(t,e),t.prototype.start=function(){R.default.info(this.name,"\u542f\u52a8"),this.clear(),this.initVoiceFunction();var e=this.getEnterRoomParam();if(e){if(e.model==d.EnterRoomModel.SHARE&&null==e.userId){h.webCookie.setItem("roomId",e.roomId,.1);var t={sureButtonShow:!0,cancelButtonShow:!1,content:"\u8bf7\u6ce8\u518c\u767b\u5f55\uff01",cancelButtonAction:null,sureButtonAction:d.TipDialogButtonAction.OUT_TO_REGISTER};return void this.dialogShow(t)}this.startByEnterMode(e)}else{R.default.error("url \u6ca1\u6709\u9644\u5e26\u6709\u6548\u7684\u623f\u95f4\u7528\u6237\u4fe1\u606f\uff0c\u63d0\u793a\u623f\u95f4\u4e0d\u5b58\u5728\u6216\u5df2\u5173\u95ed");t={sureButtonShow:!0,cancelButtonShow:!1,content:"\u623f\u95f4\u4e0d\u5b58\u5728\u6216\u5df2\u5173\u95ed\uff01",cancelButtonAction:null,sureButtonAction:d.TipDialogButtonAction.OUT_ROOM};this.dialogShow(t)}},t.prototype.initVoiceFunction=function(){try{var e=this;e.voiceBeginButton.node.on(cc.Node.EventType.TOUCH_START,function(){T.default.recStart(),e.voiceBeginButton.node.width=160,e.voiceBeginButton.node.height=160,T.default.voiceButtonHideTimer=window.setTimeout(function(){e.voiceBeginButton.node.width=80,e.voiceBeginButton.node.height=80,T.default.voiceButtonHideTimer=null,T.default.recStop(),e.voiceBeginButton.node.active=!1,e.scheduleOnce(function(){e.voiceBeginButton.node.active=!0},T.default.beginButtonHideTime)},1e3*T.default.timeLimit)}),e.voiceBeginButton.node.on(cc.Node.EventType.TOUCH_END,function(){e.voiceBeginButton.node.width=80,e.voiceBeginButton.node.height=80,T.default.recStop(),null!=T.default.voiceButtonHideTimer&&(window.clearTimeout(T.default.voiceButtonHideTimer),T.default.voiceButtonHideTimer=null)})}catch(e){}},t.prototype.dialogShow=function(e){var t=cc.instantiate(this.tipDialog),o=t.getComponent("TipDialog");t.parent=this.node,o.tipDialogShow(e)},t.prototype.getEnterRoomParam=function(){return null==m.default.getEnterRoomParam()&&h.isUrlToGameRoom()&&m.default.setEnterRoomParam({model:d.EnterRoomModel.SHARE,userId:l.default.getLoginUserId(),roomId:parseInt(h.getUrlParam("roomId"))}),m.default.getEnterRoomParam()},t.prototype.clear=function(){m.default.clear(),f.default.clear(),v.default.clear(),C.default.clear()},t.prototype.startByEnterMode=function(e){var t=this,o=e.model===d.EnterRoomModel.EMULATOR_ROOM;this.controller=new y.default(cc,o,this),o?this.startEmulatorGame():this.startWebGame(e),this.scheduleOnce(function(){g.default.isBackMusicOpen()&&t.backMusic.play()},.5),this.scheduleOnce(function(){g.default.isBackMusicOpen()&&!t.backMusic.isPlaying&&t.backMusic.play()},4),cc.director.preloadScene("LobbyScene")},t.prototype.onEnable=function(){this.configManageGet(),this.addClickEvent(),this.localNoticeEvent()},t.prototype.configManageGet=function(){return r(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return g.default.isConfigHasLoad()?[3,2]:[4,g.default.loadConfigInfo()];case 1:t.sent().result==d.ResponseStatus.FAIL&&(e={sureButtonShow:!0,cancelButtonShow:!1,content:d.EnterRoomFail.net_fail_reload,cancelButtonAction:null,sureButtonAction:d.TipDialogButtonAction.RE_IN_GAME},this.dialogShow(e)),t.label=2;case 2:return[2]}})})},t.prototype.localNoticeEvent=function(){var e=this;this.eventIdOne=h.randEventId(),p.eventBus.on(d.EventType.LOCAL_NOTICE_EVENT,this.eventIdOne,function(t){var o=t.type,n=t.info;switch(o){case d.LocalNoticeEventType.DIAMOND_COUNT_CHANGE:e.diamondScoreLable.string=n+"";break;case d.LocalNoticeEventType.PLAY_AUDIO_LOCAL_NOTICE:T.default.getAndPlayAudio(cc,n);break;case d.LocalNoticeEventType.VISIT_ENTER_ROOM:if(n.userId==l.default.userInfo.id){R.default.info("\u901a\u77e5\u5f53\u524d\u7528\u6237\u662f\u5426\u9700\u8981\u4ee5\u6e38\u5ba2\u8eab\u4efd\u8fdb\u5165");var i={sureButtonShow:!0,cancelButtonShow:!0,content:"\u623f\u95f4\u5df2\u6ee1\uff0c\u662f\u5426\u4ee5\u6e38\u5ba2\u8eab\u4efd\u8fdb\u5165\u623f\u95f4\uff1f",cancelButtonAction:d.TipDialogButtonAction.OUT_ROOM,sureButtonAction:null};e.dialogShow(i)}break;case d.LocalNoticeEventType.TURN_LANDLORD_LOCAL_NOTICE:e.closeTurnLandlordPanel(),n.userId==l.default.userInfo.id&&(R.default.info("\u8f6e\u5230\u81ea\u5df1\u5f53\u5e84,\u6253\u5f00\u8f6e\u5e84\u9762\u677f"),e.showTurnLandlordPanel())}}),this.eventIdTwo=h.randEventId(),p.eventBus.on(d.EventType.MEMBER_DELETE_FROM_ROOM,this.eventIdTwo,function(t){l.default.userInfo.id==t&&(R.default.info("\u6211\u88ab\u8e22\u51fa\u623f\u95f4"),e.execBackLobby())})},t.prototype.playWoQiangVoice=function(){g.default.isTxMusicOpen()&&this.woQiangVoice.play()},t.prototype.startWebGame=function(e){return r(this,void 0,void 0,function(){var t,o,n,i,r,c,s;return a(this,function(a){switch(a.label){case 0:return t=e.userId,o=e.roomId,e.model!=d.EnterRoomModel.SHARE?[3,2]:[4,l.default.requestUserInfo(t)];case 1:if((n=a.sent()).result==d.ResponseStatus.FAIL)return i=d.EnterRoomFail.account_error,r=d.TipDialogButtonAction.OUT_TO_LOGIN,"net_error"==n.extObject.message?(d.EnterRoomFail.net_fail_reload,d.TipDialogButtonAction.RE_IN_GAME):h.webCookie.removeItem("userId"),c={sureButtonShow:!0,cancelButtonShow:!1,content:i,cancelButtonAction:null,sureButtonAction:r},this.dialogShow(c),[2];a.label=2;case 2:return R.default.info("\u5f00\u59cb\u767b\u5f55\u623f\u95f4",t,o),[4,m.default.loginRoom(t,o)];case 3:return s=a.sent(),R.default.info("\u767b\u5f55\u623f\u95f4\u7ed3\u679c",s),s.result===d.ResponseStatus.FAIL?(R.default.error("\u767b\u5f55\u623f\u95f4\u5931\u8d25"),this.showEnterRoomFailTip(s.extObject),[2]):(this.controller.start(),this.showUserPanel(),this.initXiaZhuPanel(),this.initMahjongPanel(),this.initDesk(),this.showTopLeftRaceInfo(),this.initShowAction(),R.default.info("\u5f00\u59cbsocket\u8fde\u63a5"),_.default.openWs(function(){R.default.info("socket\u8fde\u63a5\u6210\u529f\uff0c\u53d1\u9001\u8fde\u63a5\u6210\u529f\u672c\u5730\u901a\u77e5"),p.eventBus.emit(d.EventType.LOCAL_NOTICE_EVENT,{type:d.LocalNoticeEventType.SOCKET_CONNECT_NOTICE,info:!0})},function(){R.default.error("socket\u8fde\u63a5\u5931\u8d25\uff0c\u53d1\u9001\u8fde\u63a5\u5931\u8d25\u672c\u5730\u901a\u77e5"),p.eventBus.emit(d.EventType.LOCAL_NOTICE_EVENT,{type:d.LocalNoticeEventType.SOCKET_CONNECT_NOTICE,info:!1})}),m.default.roomItem.roomState==d.roomState.PLAYING&&l.default.updateUserDiamond(),[2])}})})},t.prototype.initShowAction=function(){return r(this,void 0,void 0,function(){var e,t;return a(this,function(o){switch(o.label){case 0:return m.default.roomItem.roomState!=d.roomState.CLOSE?[3,2]:[4,m.default.getRoomResult(m.default.roomItem.id,m.default.roomItem.playCount-1)];case 1:return e=o.sent(),t=e.extObject.data,f.default.setGameOverResultList(t),m.default.roomItem.roomState=d.roomState.CLOSE,[2];case 2:return m.default.roomItem.roomState==d.roomState.PLAYING&&this.showRaceSncyTimePanel(),[2]}})})},t.prototype.showEnterRoomFailTip=function(e){var t=d.EnterRoomFail[e.message],o=cc.instantiate(this.tipDialog),n=o.getComponent("TipDialog");o.parent=this.node;var i={sureButtonShow:!0,cancelButtonShow:!1,content:t,cancelButtonAction:null,sureButtonAction:d.TipDialogButtonAction.OUT_ROOM};"diamond_not_enough"===e.message&&(i.cancelButtonShow=!0,i.content="\u94bb\u4f59\u989d\u4e0d\u8db3\uff0c\u8bf7\u70b9\u51fb\u8d2d\u4e70\uff01",i.sureButtonAction=d.TipDialogButtonAction.RECHARGE,i.cancelButtonAction=d.TipDialogButtonAction.OUT_ROOM),n.tipDialogShow(i)},t.prototype.showTopLeftRaceInfo=function(){var e=m.default.roomItem;e.roomPay==d.CreateRoomPayModel.AA?this.showPlayMode.string="AA\u623f\u95f4\uff1a"+e.roomFee:this.showPlayMode.string="\u4ee3\u5f00\u623f\u95f4\uff1a"+e.roomFee,this.showRoomNum.string="\u623f\u95f4\u53f7\uff1a"+e.id,this.showBetLimit.string="\u4e0b\u6ce8\u4e0a\u9650\uff1a"+e.costLimit,this.showPlayCountLimit.string="\u5f53\u524d\u724c\u5c40\uff1a"+(e.oningRaceNum+1)+"/"+e.playCount,this.memberLimit.string="\u73a9\u5bb6\u4e0a\u9650\uff1a"+e.memberLimit,this.playModeShow.string="\u9009\u5e84\u6a21\u5f0f\uff1a"+(e.playMode==d.playMode.TURN?"\u8f6e\u6d41":"\u62a2\u5e84")},t.prototype.startEmulatorGame=function(){this.controller.start(),this.showUserPanel(),this.initXiaZhuPanel(),this.initMahjongPanel(),this.initDesk(),this.showTopLeftRaceInfo(),this.showStartButton();var e=f.default.raceList[0].landlordId;this.scheduleOnce(function(){f.default.changeRaceLandlord(e,8,0)},1)},t.prototype.initDesk=function(){var e=cc.instantiate(this.desk);e.parent=this.node,e.active=!0},t.prototype.addClickEvent=function(){var e=this;this.exit.node.on(cc.Node.EventType.TOUCH_END,function(){var t={sureButtonShow:!0,cancelButtonShow:!0,content:d.WordMessage.back_to_lobby,cancelButtonAction:null,sureButtonAction:d.TipDialogButtonAction.OUT_TO_LOBBY};e.dialogShow(t)}),this.shareButton.node.on(cc.Node.EventType.TOUCH_END,function(){e.showSharePanel()}),this.setButton.node.on(cc.Node.EventType.TOUCH_START,function(){var t=cc.instantiate(e.SetPanel);t.parent=e.node,t.setPosition(0,0),t.active=!0}),this.chatCartonButton.node.on(cc.Node.EventType.TOUCH_START,function(){var t=cc.instantiate(e.chatCartonPanel);t.parent=e.node,t.setPosition(0,0),t.active=!0}),this.trendButton.node.on(cc.Node.EventType.TOUCH_START,function(){var t=cc.instantiate(e.trendPanel);t.parent=e.node,t.setPosition(0,0),t.active=!0}),this.TurnLandlordSure.node.on(cc.Node.EventType.TOUCH_START,function(){R.default.info("\u8f6e\u5e84\u786e\u8ba4\u88ab\u70b9\u51fb"),R.default.info("\u5f53\u524d\u7528\u6237\u5728\u8f6e\u5e84\u4e2d\u786e\u8ba4\u5f53\u5730\u4e3b");var t={type:d.NoticeType.sureBeLandlordInTurn,info:{roomId:m.default.roomItem.id,userId:l.default.userInfo.id,raceNum:m.default.roomItem.oningRaceNum}};R.default.info("\u53d1\u51fasocket\u901a\u77e5\uff0c\u786e\u8ba4\u5728\u8f6e\u5e84\u4e2d\u5f53\u5730\u4e3b"),_.default.send(JSON.stringify(t)),e.closeTurnLandlordPanel()}),this.TurnLandlordCancel.node.on(cc.Node.EventType.TOUCH_START,function(){R.default.info("\u8f6e\u5e84\u653e\u5f03\u88ab\u70b9\u51fb\u88ab\u70b9\u51fb"),e.closeTurnLandlordPanel()})},t.prototype.scoketFailTip=function(){var e=cc.instantiate(this.tipDialog),t=e.getComponent("TipDialog");e.parent=this.node;var o={sureButtonShow:!0,cancelButtonShow:!0,content:"\u623f\u95f4\u8fde\u63a5\u5931\u8d25\uff0c\u662f\u5426\u91cd\u65b0\u8fde\u63a5\uff1f",cancelButtonAction:d.TipDialogButtonAction.OUT_ROOM,sureButtonAction:d.TipDialogButtonAction.SOCKET_CONNECT};t.tipDialogShow(o)},t.prototype.execBackLobby=function(){this.controller&&(this.controller.close(),this.controller=null),cc.director.loadScene("LobbyScene"),this.destroy()},t.prototype.showSharePanel=function(){if(null===this.node.getChildByName("SharePanel")){var e=cc.instantiate(this.SharePanel);e.parent=this.node,e.active=!0}},t.prototype.showRoomResultPanel=function(){this.adjustBeforeRaceStateChange(d.RaceState.FINISHED);var e=cc.instantiate(this.roomResultPanel);e.parent=cc.find("Canvas/Desk"),e.setPosition(0,-70),e.active=!0},t.prototype.adjustBeforeRaceStateChange=function(e){try{this.closeChoiceLandLordPanel(),e!=d.RaceState.SHOW_DOWN&&(cc.find("Canvas/Desk").getComponent("Desk").deskPartsToClean(),cc.find("Canvas/Desk").getComponent("Desk").cleanMahjongResulNodes()),this.destroyRaceResultPanel(),this.closeStartButton(),this.cleanRollDice(),e!=d.RaceState.BET&&e!=d.RaceState.SHOW_DOWN&&cc.find("Canvas/DealMachine").getComponent("DealMachine").cleanMajong(),e!=d.RaceState.SHOW_DOWN&&(this.destroyChild("MiddleTopScorePanel"),this.node.getChildByName("XiaZhu").getComponent("XiaZhu").destroyDeskChip()),this.destroyTimePanel()}catch(e){}},t.prototype.destroyChildNodeByName=function(e){var t=this.node.getChildByName(e);t&&(t.active=!1,t.destroy())},t.prototype.destroyTimePanel=function(){var e=cc.find("Canvas/Desk").getChildByName("MiddleTopTimePanel");null!=e&&e.destroy()},t.prototype.showRaceSncyTimePanel=function(){var e=cc.instantiate(this.middleTopTimePanel);e.name="MiddleTopTimePanel",e.parent=cc.find("Canvas/Desk"),e.setPosition(-215,218),e.getComponent("MiddleTopTimePanel").waitRaceSync()},t.prototype.showLandlordSncyTimePanel=function(){var e=cc.instantiate(this.middleTopTimePanel);e.name="MiddleTopTimePanel",e.parent=cc.find("Canvas/Desk"),e.setPosition(-215,218),e.getComponent("MiddleTopTimePanel").waitLandlordSync()},t.prototype.showMiddleTopTimePanel=function(){var e=cc.instantiate(this.middleTopTimePanel);e.name="MiddleTopTimePanel",e.parent=cc.find("Canvas/Desk"),e.setPosition(-215,218),e.getComponent("MiddleTopTimePanel").betTimeShow()},t.prototype.showMiddleTopScorePanel=function(){var e=cc.instantiate(this.middleTopScorePanel);e.name="MiddleTopScorePanel",e.parent=this.node,e.setPosition(15,258),e.active=!0},t.prototype.destroyMiddleTopScorePanel=function(){var e=this.node.getChildByName("MiddleTopScorePanel");null!=e&&e.destroy()},t.prototype.destroyChild=function(e){for(var t=this.node.children,o=0;o<t.length;o++)t[o].name===e&&t[o].destroy()},t.prototype.toShowRaceResultPanel=function(){var e=cc.instantiate(this.raceResultPanel);e.name="RaceResultPanel",e.parent=cc.find("Canvas/Desk"),e.active=!0},t.prototype.destroyRaceResultPanel=function(){for(var e=cc.find("Canvas/Desk").children,t=0;t<e.length;t++)"RaceResultPanel"===e[t].name&&e[t].destroy()},t.prototype.beginDeal=function(){var e=this.node.getChildByName("DealMachine").getComponent("DealMachine"),t=m.default.roomItem.oningRaceNum,o=h.getFaPaiLocation(f.default.raceList[t].points);e.deal(o)},t.prototype.initMahjongPanel=function(){var e=this.node.getChildByName("DealMachine");e||((e=cc.instantiate(this.dealMachine)).parent=this.node,e.setPosition(300,207),e.active=!0)},t.prototype.beginRollDice=function(){var e=cc.instantiate(this.rollDicePrefab);e.name="RollDice",e.parent=cc.find("Canvas/Desk"),e.setPosition(0,0),e.active=!0},t.prototype.cleanRollDice=function(){for(var e=cc.find("Canvas/Desk").children,t=0;t<e.length;t++)"RollDice"===e[t].name&&e[t].destroy()},t.prototype.showChoiceLandLordPanel=function(){var e=cc.find("Canvas/Desk").getChildByName("RapLandlordButton");e?e.active=!0:((e=cc.instantiate(this.rapLandlordButton)).parent=cc.find("Canvas/Desk"),e.setPosition(308,-220),e.active=!0),g.default.isTxMusicOpen()&&this.qinQiangZhuangVoice.play()},t.prototype.closeChoiceLandLordPanel=function(){cc.find("Canvas/Desk").getChildByName("RapLandlordButton")&&cc.find("Canvas/Desk").getChildByName("RapLandlordButton").destroy()},t.prototype.showUserPanel=function(){var e=this,t=l.default.userInfo;this.userScoreLabel.string=f.default.getUserScore(t.id)+"",this.diamondScoreLable.string=t.diamond+"",cc.loader.load({url:l.default.getUserIconUrl(),type:"png"},function(t,o){var n=new cc.SpriteFrame(o);e.userIcon.spriteFrame=n})},t.prototype.onLoad=function(){},t.prototype.initXiaZhuPanel=function(){var e=cc.instantiate(this.xiaZhu);e.parent=this.node,e.getChildByName("Layout").active=!1,e.active=!0,R.default.info("\u521d\u59cb\u5316\u4e0b\u6ce8\u529f\u80fd")},t.prototype.showXiaZhuPanel=function(){if(this.controller.isEmulatorRoom||l.default.getUserInfoInRoom().roleType!=d.gameMemberType.VISITOR){var e=f.default.raceList[m.default.roomItem.oningRaceNum].landlordId;if(l.default.userInfo.id!==e){var t=this.node.getChildByName("XiaZhu");t.setPosition(250,-260),t.getChildByName("Layout").active=!0,R.default.info("\u663e\u793a\u4e0b\u6ce8\u9762\u677f")}}else R.default.info("\u4e0d\u662f\u6a21\u62df\u623f\u95f4\u5e76\u4e14\u5f53\u524d\u7528\u6237\u662f\u6e38\u5ba2\uff0c\u4e0d\u63d0\u4f9b\u4e0b\u6ce8\u9762\u677f")},t.prototype.closeXiaZhuPanel=function(){this.node.getChildByName("XiaZhu").getChildByName("Layout").active=!1},t.prototype.showStartButton=function(){this.closeStartButton();var e=cc.instantiate(this.playButtonPrefab);e.name="PlayButton",e.parent=this.node,e.setPosition(-124.514,-268.949),e.active=!0},t.prototype.closeStartButton=function(){var e=this.node.getChildByName("PlayButton");e&&e.destroy()},t.prototype.kickoutButtonClick=function(e,t){var o={sureButtonShow:!0,cancelButtonShow:!0,content:"\u786e\u5b9a\u8e22\u51fa\u73a9\u5bb6"+t+"?",cancelButtonAction:null,sureButtonAction:d.TipDialogButtonAction.KICKOUT_MEMBER,otherInfo:{userId:e,nick:t}};this.dialogShow(o)},t.prototype.onDisable=function(){p.eventBus.off(d.EventType.LOCAL_NOTICE_EVENT,this.eventIdOne),p.eventBus.off(d.EventType.MEMBER_DELETE_FROM_ROOM,this.eventIdTwo);try{m.default.getEnterRoomParam().model!==d.EnterRoomModel.EMULATOR_ROOM&&_.default.closeWs()}catch(e){}},t.prototype.showTurnLandlordPanel=function(){R.default.info("\u6253\u5f00\u8f6e\u5e84\u9762\u677f");var e=this.node.getChildByName("TurnLandlordButtons");e&&(e.active=!0)},t.prototype.closeTurnLandlordPanel=function(){R.default.info("\u5173\u95ed\u8f6e\u5e84\u9762\u677f");var e=this.node.getChildByName("TurnLandlordButtons");e&&(e.active=!1)},i([u(cc.Sprite)],t.prototype,"voiceBeginButton",void 0),i([u(cc.Sprite)],t.prototype,"userIcon",void 0),i([u(cc.Prefab)],t.prototype,"rollDicePrefab",void 0),i([u(cc.Prefab)],t.prototype,"desk",void 0),i([u(cc.Sprite)],t.prototype,"exit",void 0),i([u(cc.Sprite)],t.prototype,"shareButton",void 0),i([u(cc.Prefab)],t.prototype,"playButtonPrefab",void 0),i([u(cc.Prefab)],t.prototype,"dealMachine",void 0),i([u(cc.Prefab)],t.prototype,"xiaZhu",void 0),i([u(cc.Prefab)],t.prototype,"raceResultPanel",void 0),i([u(cc.Prefab)],t.prototype,"roomResultPanel",void 0),i([u(cc.Prefab)],t.prototype,"middleTopTimePanel",void 0),i([u(cc.Prefab)],t.prototype,"middleTopScorePanel",void 0),i([u(cc.Prefab)],t.prototype,"rapLandlordButton",void 0),i([u(cc.Prefab)],t.prototype,"kaiShipTip",void 0),i([u(cc.Prefab)],t.prototype,"SetPanel",void 0),i([u(cc.Prefab)],t.prototype,"tipDialog",void 0),i([u(cc.Prefab)],t.prototype,"SharePanel",void 0),i([u(cc.Prefab)],t.prototype,"chatCartonPanel",void 0),i([u(cc.Sprite)],t.prototype,"chatCartonButton",void 0),i([u(cc.Prefab)],t.prototype,"trendPanel",void 0),i([u(cc.Sprite)],t.prototype,"trendButton",void 0),i([u(cc.Label)],t.prototype,"showRoomNum",void 0),i([u(cc.Label)],t.prototype,"showBetLimit",void 0),i([u(cc.Label)],t.prototype,"memberLimit",void 0),i([u(cc.Label)],t.prototype,"playModeShow",void 0),i([u(cc.Label)],t.prototype,"showPlayCountLimit",void 0),i([u(cc.Label)],t.prototype,"showPlayMode",void 0),i([u(cc.SpriteFrame)],t.prototype,"zhuangIcon",void 0),i([u(cc.SpriteFrame)],t.prototype,"xianIcon",void 0),i([u(cc.Label)],t.prototype,"userScoreLabel",void 0),i([u(cc.Label)],t.prototype,"diamondScoreLable",void 0),i([u(cc.Sprite)],t.prototype,"setButton",void 0),i([u(cc.AudioSource)],t.prototype,"backMusic",void 0),i([u(cc.AudioSource)],t.prototype,"qinQiangZhuangVoice",void 0),i([u(cc.AudioSource)],t.prototype,"woQiangVoice",void 0),i([u(cc.Button)],t.prototype,"TurnLandlordSure",void 0),i([u(cc.Button)],t.prototype,"TurnLandlordCancel",void 0),i([u(cc.AudioSource)],t.prototype,"beginVoice",void 0),t=i([s],t)}(cc.Component);o.default=E,cc._RF.pop()},{"../../common/Const":"Const","../../common/EventBus":"EventBus","../../common/RollControler":"RollControler","../../common/Util":"Util","../../common/WebSocketManage":"WebSocketManage","../../store/Bets/BetManage":"BetManage","../../store/Config/ConfigManage":"ConfigManage","../../store/GameMember/GameMemberManage":"GameMemberManage","../../store/Races/RaceManage":"RaceManage","../../store/Room/RoomManage":"RoomManage","../../store/User/UserManage":"UserManage","../../store/Voice/VoiceManage":"VoiceManage",loglevel:28}],RoomGameConfig:[function(e,t,o){"use strict";cc._RF.push(t,"a861cwTXCJP87MQV3FEY/AO","RoomGameConfig"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],RoomInfo:[function(e,t,o){"use strict";cc._RF.push(t,"bbf7cdlg09Dz7pgShy0k/1P","RoomInfo"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../common/Const");o.roomInfo={id:888,creatUserId:"6666660",memberLimit:10,playCount:4,playMode:n.playMode.TURN,roomFee:10,roomPay:n.CreateRoomPayModel.AA,costLimit:400,roomState:n.roomState.OPEN,oningRaceNum:0},cc._RF.pop()},{"../common/Const":"Const"}],RoomItem:[function(e,t,o){"use strict";cc._RF.push(t,"30a00qt+qFFRJ++7FmXH/Q2","RoomItem"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../common/Const"),i=e("../../common/EventBus"),r=function(){function e(e){this.id=null,this.creatUserId=null,this.memberLimit=null,this.playCount=null,this.playMode=null,this.costLimit=null,this.roomFee=null,this.roomPay=null,this._roomState=null,this._oningRaceNum=null,this.id=e.id,this.creatUserId=e.creatUserId,this.memberLimit=e.memberLimit,this.playCount=e.playCount,this.playMode=e.playMode,this.roomFee=e.roomFee,this.roomPay=e.roomPay,this.costLimit=e.costLimit,this._roomState=e.roomState,this._oningRaceNum=e.oningRaceNum}return Object.defineProperty(e.prototype,"oningRaceNum",{get:function(){return this._oningRaceNum},enumerable:!0,configurable:!0}),e.prototype.changeOningRaceNum=function(e){this._oningRaceNum=e,i.eventBus.emit(n.EventType.RACING_NUM_CHANGE_EVENT,e)},Object.defineProperty(e.prototype,"roomState",{get:function(){return this._roomState},set:function(e){null!=this._roomState?(this._roomState=e,i.eventBus.emit(n.EventType.ROOM_STATE_CHANGE_EVENT,e)):this._roomState=e},enumerable:!0,configurable:!0}),e}();o.default=r,cc._RF.pop()},{"../../common/Const":"Const","../../common/EventBus":"EventBus"}],RoomManage:[function(e,t,o){"use strict";cc._RF.push(t,"a7923Ufj9hKVZ6aSBMkiJR0","RoomManage"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../common/Config"),i=e("./RoomItem"),r=e("../../common/Const"),a=e("../../common/Http"),c=e("../Races/RaceManage"),s=e("../GameMember/GameMemberManage"),u=e("../Bets/BetManage"),l=function(){function e(){this.roomItem=null,this.enterRoomParam=null}return e.prototype.requestRoomInfo=function(){var e=this;return new Promise(function(t){t({result:r.PromiseResult.SUCCESS,extObject:e.roomItem})})},e.prototype.clear=function(){this.roomItem=null},e.prototype.getEnterRoomParam=function(){return this.enterRoomParam},e.prototype.setEnterRoomParam=function(e){this.enterRoomParam=e},e.prototype.setRoomItem=function(e){this.roomItem=new i.default(e)},e.prototype.createRoom=function(e,t,o,i,c,s){return new Promise(function(u){var l=n.config.serverAddress+r.InterfaceUrl.CREATE_ROOM;l+="?creatUserId="+e+"&memberLimit="+t+"&playCount="+o+"&roomPay="+i+"&costLimit="+c+"&playMode="+s,a.default.getWithUrl(l,function(e,t){if(e)u({result:r.ResponseStatus.FAIL,extObject:{message:"interface_fail"}});else if(t.status!==r.ResponseStatus.FAIL){var o=t.data;u({result:r.ResponseStatus.SUCCESS,extObject:o})}else u({result:r.ResponseStatus.FAIL,extObject:t})})})},e.prototype.loginRoom=function(e,t){var o=this;return new Promise(function(i){var l=n.config.serverAddress+r.InterfaceUrl.LOGIN_IN_ROOM+"?userId="+e+"&roomId="+t;a.default.getWithUrl(l,function(e,t){if(e)i({result:r.ResponseStatus.FAIL,extObject:{message:r.EnterRoomFail.interface_fail}});else if(t.status!==r.ResponseStatus.FAIL){for(var n=t.data,a=n.room,l=n.races,p=0;p<l.length;p++)l[p].points=JSON.parse(l[p].points),l[p].landlordScore=JSON.parse(l[p].landlordScore),l[p].skyScore=JSON.parse(l[p].skyScore),l[p].landScore=JSON.parse(l[p].landScore),l[p].middleScore=JSON.parse(l[p].middleScore);var d=n.members;o.setRoomItem(a),c.default.setRaceList(l),c.default.setClickXiaZhuVal(0),s.default.setGameMemberList(d);var h=n.betRecords;u.default.setBetList(h),i({result:r.ResponseStatus.SUCCESS,extObject:t})}else i({result:r.ResponseStatus.FAIL,extObject:t})})})},e.prototype.isRoomExist=function(e){return new Promise(function(t){var o=n.config.serverAddress+r.InterfaceUrl.IS_ROOM_EXIST+"?roomId="+e;a.default.getWithUrl(o,function(e,o){e?t({result:r.ResponseStatus.FAIL,extObject:{message:r.EnterRoomFail.interface_fail}}):o.status!==r.ResponseStatus.FAIL?t({result:r.ResponseStatus.SUCCESS,extObject:o}):t({result:r.ResponseStatus.FAIL,extObject:o})})})},e.prototype.getRoomResult=function(e,t){return new Promise(function(o){var i=n.config.serverAddress+r.InterfaceUrl.GET_ROOM_RESULT+"?roomId="+e+"&raceNum="+t;a.default.getWithUrl(i,function(e,t){e?o({result:r.ResponseStatus.FAIL,extObject:{message:r.EnterRoomFail.interface_fail}}):t.status!==r.ResponseStatus.FAIL?o({result:r.ResponseStatus.SUCCESS,extObject:t}):o({result:r.ResponseStatus.FAIL,extObject:t})})})},e}();o.default=new l,cc._RF.pop()},{"../../common/Config":"Config","../../common/Const":"Const","../../common/Http":"Http","../Bets/BetManage":"BetManage","../GameMember/GameMemberManage":"GameMemberManage","../Races/RaceManage":"RaceManage","./RoomItem":"RoomItem"}],RoomResultPanel:[function(e,t,o){"use strict";cc._RF.push(t,"ec3e8bpr2pOppF+JKj3Br/3","RoomResultPanel");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,s=e("../../store/Races/RaceManage"),u=e("../../store/Room/RoomManage"),l=e("../../common/Const"),p=e("../../common/EventBus"),d=e("../../store/Config/ConfigManage"),h=e("../../common/Util"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.webViewPart=null,t.leftList=null,t.rightList=null,t.userItem=null,t.roomNum=null,t.raceCount=null,t.backButton=null,t.leftUserList=[],t.rightUserList=[],t}return n(t,e),t.prototype.start=function(){this.updateShow(),this.backButton.node.on(cc.Node.EventType.TOUCH_END,function(){p.eventBus.emit(l.EventType.LOCAL_NOTICE_EVENT,{type:l.LocalNoticeEventType.TO_LOBBY_EVENT,info:null})})},t.prototype.showZhanjiShare=function(e){var t=this.getShareZhanjiMessage(e);h.webCookie.setItem("zhanji",t,.01),this.webViewPart.url=d.default.getZhanjiPageAddr()},t.prototype.getShareZhanjiMessage=function(e){var t=u.default.roomItem.id+"\u53f7\u623f\u95f4\u6bd4\u8d5b\u7ed3\u679c->";return e.forEach(function(e){var o=e.nick,n=e.score;t=t+o+"\uff1a"+n+"\uff0c"}),t=t+"\u8be6\u7ec6\u6218\u7ee9\u8bf7\u67e5\u770b:"+window.location.href},t.prototype.updateShow=function(){var e=this;try{var t=u.default.roomItem;this.roomNum.string="\u623f\u95f4\u53f7\uff1a"+t.id,this.raceCount.string="\u603b\u5c40\u6570\uff1a"+t.playCount+"\u5c40";var o=s.default.gameOverResultList;this.showZhanjiShare(o);var n=1;o.forEach(function(t){n<=5?e.leftUserList.push(t):e.rightUserList.push(t),n++}),this.leftUserList.forEach(function(t){var o=cc.instantiate(e.userItem);o.getComponent("RoomResultUserItem").initData(t.userId,t.icon,t.nick,t.score),e.leftList.addChild(o)}),this.rightUserList.forEach(function(t){var o=cc.instantiate(e.userItem);o.getComponent("RoomResultUserItem").initData(t.userId,t.icon,t.nick,t.score),e.rightList.addChild(o)})}catch(e){}},i([c(cc.WebView)],t.prototype,"webViewPart",void 0),i([c(cc.Node)],t.prototype,"leftList",void 0),i([c(cc.Node)],t.prototype,"rightList",void 0),i([c(cc.Prefab)],t.prototype,"userItem",void 0),i([c(cc.Label)],t.prototype,"roomNum",void 0),i([c(cc.Label)],t.prototype,"raceCount",void 0),i([c(cc.Sprite)],t.prototype,"backButton",void 0),t=i([a],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../common/Const":"Const","../../common/EventBus":"EventBus","../../common/Util":"Util","../../store/Config/ConfigManage":"ConfigManage","../../store/Races/RaceManage":"RaceManage","../../store/Room/RoomManage":"RoomManage"}],RoomResultUserItem:[function(e,t,o){"use strict";cc._RF.push(t,"3a7e6NT635Bga9znO2M73I5","RoomResultUserItem");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../store/Room/RoomManage"),a=e("../../common/Const"),c=e("../../store/User/UserManage"),s=e("../../store/Config/ConfigManage"),u=cc._decorator,l=u.ccclass,p=u.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.userName=null,t.userIcon=null,t.userScore=null,t}return n(t,e),t.prototype.start=function(){},t.prototype.initData=function(e,t,o,n){var i=this;n>0&&(this.userScore.node.color=cc.Color.YELLOW),this.userScore.string=n+"",this.userName.string=o,r.default.getEnterRoomParam().model===a.EnterRoomModel.EMULATOR_ROOM&&e!==c.default.userInfo.id?cc.loader.loadRes(t,function(e,t){var o=new cc.SpriteFrame(t);i.userIcon.spriteFrame=o}):cc.loader.load({url:s.default.getUserIconUrl()+t,type:"png"},function(e,t){var o=new cc.SpriteFrame(t);i.userIcon.spriteFrame=o})},i([p(cc.Label)],t.prototype,"userName",void 0),i([p(cc.Sprite)],t.prototype,"userIcon",void 0),i([p(cc.Label)],t.prototype,"userScore",void 0),t=i([l],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../common/Const":"Const","../../store/Config/ConfigManage":"ConfigManage","../../store/Room/RoomManage":"RoomManage","../../store/User/UserManage":"UserManage"}],SetPanel:[function(e,t,o){"use strict";cc._RF.push(t,"8e8698ybhhDar6N+ByQTF+o","SetPanel");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../store/Config/ConfigManage"),a=e("../../common/EventBus"),c=e("../../common/Const"),s=cc._decorator,u=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cancel=null,t.bj=null,t.tx=null,t.closeButton=null,t.bjLabel=null,t.txLabel=null,t}return n(t,e),t.prototype.start=function(){var e=this;this.closeButton.node.on(cc.Node.EventType.TOUCH_END,function(){e.node.destroy()}),this.cancel.on(cc.Node.EventType.TOUCH_END,function(){e.node.active=!1,e.node.destroy()}),this.txLabel.node.on(cc.Node.EventType.TOUCH_END,function(){e.tx.isChecked?e.tx.isChecked=!1:e.tx.isChecked=!0}),this.bjLabel.node.on(cc.Node.EventType.TOUCH_END,function(){e.bj.isChecked?e.bj.isChecked=!1:e.bj.isChecked=!0}),this.bj.node.on("toggle",function(){r.default.setBackMusic(e.bj.isChecked),a.eventBus.emit(c.EventType.LOCAL_NOTICE_EVENT,{type:c.LocalNoticeEventType.BACK_MUSIC_STATE_CHANGE_NOTICE,info:e.bj.isChecked})},this),this.tx.node.on("toggle",function(){r.default.setTxMusic(e.tx.isChecked)},this)},t.prototype.onEnable=function(){r.default.isBackMusicOpen()?this.bj.isChecked=!0:this.bj.isChecked=!1,r.default.isTxMusicOpen()?this.tx.isChecked=!0:this.tx.isChecked=!1},i([l(cc.Node)],t.prototype,"cancel",void 0),i([l(cc.Toggle)],t.prototype,"bj",void 0),i([l(cc.Toggle)],t.prototype,"tx",void 0),i([l(cc.Sprite)],t.prototype,"closeButton",void 0),i([l(cc.Label)],t.prototype,"bjLabel",void 0),i([l(cc.Label)],t.prototype,"txLabel",void 0),t=i([u],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../common/Const":"Const","../../common/EventBus":"EventBus","../../store/Config/ConfigManage":"ConfigManage"}],SharePanel:[function(e,t,o){"use strict";cc._RF.push(t,"6fbdcWWt35IMrfhdmdkVQnx","SharePanel");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../store/Room/RoomManage"),a=e("../../store/Config/ConfigManage"),c=e("../../store/User/UserManage"),s=e("../../common/Util"),u=cc._decorator,l=u.ccclass,p=u.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.webViewPart=null,t.closeButton=null,t}return n(t,e),t.prototype.start=function(){var e=this;this.closeButton.node.on(cc.Node.EventType.TOUCH_END,function(){e.node.destroy()}),this.node.on(cc.Node.EventType.TOUCH_END,function(){e.node.destroy()});try{var t=r.default.roomItem.id,o=r.default.roomItem.playCount,n=r.default.roomItem.costLimit,i=r.default.roomItem.memberLimit,u=a.default.getGameUrl(),l=c.default.userInfo.nick+"\u9080\u8bf7\u60a8\u4e00\u8d77\u73a9\uff0c\u4ee3\u5f00\u623f\u95f4\u3010"+t+"\u3011,\u4eba\u6570\u4e0a\u9650"+i+"\uff0c\u5c40\u6570"+o+"\uff0c\u6700\u9ad8\u4e0b"+n+",\u70b9\u51fbURL\u5730\u5740\u8fdb\u5165\u6e38\u620f\uff1a"+u+"?roomId="+t;s.webCookie.setItem("share",l,.01),this.webViewPart.url=a.default.getSharePageAddr()}catch(e){}},i([p(cc.WebView)],t.prototype,"webViewPart",void 0),i([p(cc.Sprite)],t.prototype,"closeButton",void 0),t=i([l],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../common/Util":"Util","../../store/Config/ConfigManage":"ConfigManage","../../store/Room/RoomManage":"RoomManage","../../store/User/UserManage":"UserManage"}],Test:[function(e,t,o){"use strict";cc._RF.push(t,"e8ca8Z5XI9DCabGcNT/L/cH","Test");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startButton=null,t.stopButton=null,t.but=null,t}return n(t,e),t.prototype.start=function(){var e=this;this.but.node.on(cc.Node.EventType.TOUCH_START,function(){e.but.node.width=120,e.but.node.height=120}),this.but.node.on(cc.Node.EventType.TOUCH_END,function(){e.but.node.width=40,e.but.node.height=40})},t.prototype.onEnable=function(){},t.prototype.onLoad=function(){},i([c(cc.Button)],t.prototype,"startButton",void 0),i([c(cc.Button)],t.prototype,"stopButton",void 0),i([c(cc.Sprite)],t.prototype,"but",void 0),t=i([a],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],TipDialog:[function(e,t,o){"use strict";cc._RF.push(t,"e9957fUIdRAla/KIZydTRIZ","TipDialog");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../common/Const"),a=e("../../common/WebSocketManage"),c=e("../../common/EventBus"),s=e("../../common/Config"),u=e("../../store/Room/RoomManage"),l=cc._decorator,p=l.ccclass,d=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=null,t.leftSureButton=null,t.middleSureButton=null,t.cancelButton=null,t.rechargePanel=null,t.sureButton=null,t.middleButtonLocation={x:0,y:-98},t.leftButtonLocation={x:120,y:-98},t.rightButtonLocation={x:120,y:-98},t.tipDialogParam=null,t}return n(t,e),t.prototype.start=function(){var e=this;this.sureButton.on(cc.Node.EventType.TOUCH_END,function(){e.execButtonAction(e.tipDialogParam.sureButtonAction)}),this.cancelButton.on(cc.Node.EventType.TOUCH_END,function(){e.execButtonAction(e.tipDialogParam.cancelButtonAction)})},t.prototype.execButtonAction=function(e){try{switch(e){case r.TipDialogButtonAction.SOCKET_CONNECT:a.default.openWs(function(){c.eventBus.emit(r.EventType.LOCAL_NOTICE_EVENT,{type:r.LocalNoticeEventType.SOCKET_CONNECT_NOTICE,info:!0})},function(){c.eventBus.emit(r.EventType.LOCAL_NOTICE_EVENT,{type:r.LocalNoticeEventType.SOCKET_CONNECT_NOTICE,info:!1})});break;case r.TipDialogButtonAction.OUT_ROOM:cc.director.loadScene("LobbyScene");break;case r.TipDialogButtonAction.OUT_TO_REGISTER:window.location.replace(s.config.registerPageAddress);break;case r.TipDialogButtonAction.OUT_APP:try{-1!=navigator.userAgent.indexOf("Firefox")||-1!=navigator.userAgent.indexOf("Chrome")?(window.location.href="about:blank",window.close()):(window.opener=null,window.open("","_self"),window.close())}catch(e){window.location.replace(s.config.loginPageAddress)}break;case r.TipDialogButtonAction.OUT_TO_LOGIN:window.location.replace(s.config.loginPageAddress);break;case r.TipDialogButtonAction.RE_IN_GAME:window.location.reload();break;case r.TipDialogButtonAction.OUT_TO_LOBBY:c.eventBus.emit(r.EventType.LOCAL_NOTICE_EVENT,{type:r.LocalNoticeEventType.TO_LOBBY_EVENT,info:!1});break;case r.TipDialogButtonAction.RECHARGE:cc.instantiate(this.rechargePanel).parent=this.node.parent;break;case r.TipDialogButtonAction.KICKOUT_MEMBER:var t=this.tipDialogParam.otherInfo.userId;if(u.default.roomItem.roomState==r.roomState.OPEN){var o={type:r.NoticeType.kickOutMemberFromRoom,info:{roomId:u.default.roomItem.id,kickUserId:t}};a.default.send(JSON.stringify(o))}}this.node.active=!1,this.node.destroy()}catch(e){}},t.prototype.tipDialogShow=function(e){this.tipDialogParam=e,e.sureButtonShow&&e.cancelButtonShow?(this.sureButton=this.leftSureButton,this.sureButton.active=!0,this.cancelButton.active=!0):e.sureButtonShow&&(this.sureButton=this.middleSureButton,this.sureButton.active=!0),this.content.string=e.content},i([d(cc.Label)],t.prototype,"content",void 0),i([d(cc.Node)],t.prototype,"leftSureButton",void 0),i([d(cc.Node)],t.prototype,"middleSureButton",void 0),i([d(cc.Node)],t.prototype,"cancelButton",void 0),i([d(cc.Prefab)],t.prototype,"rechargePanel",void 0),t=i([p],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../common/Config":"Config","../../common/Const":"Const","../../common/EventBus":"EventBus","../../common/WebSocketManage":"WebSocketManage","../../store/Room/RoomManage":"RoomManage"}],TrendItem:[function(e,t,o){"use strict";cc._RF.push(t,"7f6bc/A6DNJUJq5QfPkv1pf","TrendItem");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.winSpriteFrame=null,t.failSpriteFrame=null,t.skySprite=null,t.middleSprite=null,t.landSprite=null,t}return n(t,e),t.prototype.start=function(){},t.prototype.setShow=function(e,t,o){this.skySprite.spriteFrame=e?this.winSpriteFrame:this.failSpriteFrame,this.middleSprite.spriteFrame=t?this.winSpriteFrame:this.failSpriteFrame,this.landSprite.spriteFrame=o?this.winSpriteFrame:this.failSpriteFrame},i([c(cc.SpriteFrame)],t.prototype,"winSpriteFrame",void 0),i([c(cc.SpriteFrame)],t.prototype,"failSpriteFrame",void 0),i([c(cc.Sprite)],t.prototype,"skySprite",void 0),i([c(cc.Sprite)],t.prototype,"middleSprite",void 0),i([c(cc.Sprite)],t.prototype,"landSprite",void 0),t=i([a],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],TrendMap:[function(e,t,o){"use strict";cc._RF.push(t,"f17eeBPnC1JSLI39Kr3WEgy","TrendMap");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../store/Room/RoomManage"),a=e("../../store/Races/RaceManage"),c=e("../../common/Const"),s=e("../../common/EventBus"),u=e("../../common/Util"),l=cc._decorator,p=l.ccclass,d=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.raceItemPrefab=null,t.listNodeOb=null,t.eventId=null,t.switchButton=null,t.content=null,t}return n(t,e),t.prototype.start=function(){var e=this;this.eventId=u.randEventId(),this.switchButton.on(cc.Node.EventType.TOUCH_END,function(){e.node.parent.getChildByName("ShowTrendButton").active=!0,e.node.destroy()}),this.show()},t.prototype.getRaceResult=function(e){var t=a.default.raceList[e];return[t.getLocationResult(c.betLocaion.SKY)===c.CompareDxRe.BIG,t.getLocationResult(c.betLocaion.MIDDLE)===c.CompareDxRe.BIG,t.getLocationResult(c.betLocaion.LAND)===c.CompareDxRe.BIG]},t.prototype.show=function(){this.content.removeAllChildren();var e=-1;try{e=null===r.default.roomItem.oningRaceNum?0:r.default.roomItem.oningRaceNum}catch(e){}for(var t=0;t<e;t++){var o=this.getRaceResult(t);this.addItem(o[0],o[1],o[2])}},t.prototype.test=function(){this.addItem(!0,!1,!1),this.addItem(!0,!1,!1),this.addItem(!0,!1,!1),this.addItem(!0,!1,!1),this.addItem(!0,!1,!1),this.addItem(!0,!1,!1),this.addItem(!0,!1,!1)},t.prototype.addItem=function(e,t,o){var n=cc.instantiate(this.raceItemPrefab);n.name="trendItem",n.getComponent("TrendItem").setShow(e,t,o),this.listNodeOb.addChild(n)},t.prototype.onDisable=function(){s.eventBus.off(c.EventType.LOCAL_NOTICE_EVENT,this.eventId)},i([d(cc.Prefab)],t.prototype,"raceItemPrefab",void 0),i([d(cc.Node)],t.prototype,"listNodeOb",void 0),i([d(cc.Node)],t.prototype,"switchButton",void 0),i([d(cc.Node)],t.prototype,"content",void 0),t=i([p],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../common/Const":"Const","../../common/EventBus":"EventBus","../../common/Util":"Util","../../store/Races/RaceManage":"RaceManage","../../store/Room/RoomManage":"RoomManage"}],UserBase:[function(e,t,o){"use strict";var n;cc._RF.push(t,"2c017h7jQ1ORYoA4IYb1ZLw","UserBase"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e[e.NORMAL_USER=1]="NORMAL_USER",e[e.CHEAT_USER=2]="CHEAT_USER"}(n=o.userType||(o.userType={})),o.emptyUserInfo=function(){return{id:"",nick:"",icon:"",type:n.NORMAL_USER,score:0,diamond:0,phone:""}},cc._RF.pop()},{}],UserInfo:[function(e,t,o){"use strict";cc._RF.push(t,"1b10a9ARHlAWIYcyz41gG66","UserInfo"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../store/User/UserBase");o.userInfo={id:"6666660",nick:"\u6211\u7231\u5403\u82f9\u679c",icon:"renwu/1_10",type:n.userType.NORMAL_USER,score:23,diamond:234,phone:"13396080754"},cc._RF.pop()},{"../store/User/UserBase":"UserBase"}],UserItem:[function(e,t,o){"use strict";cc._RF.push(t,"cceafxXUiVNMaljUH7Hy21l","UserItem"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../common/EventBus"),i=e("../../common/Const"),r=function(){function e(e){this.id=null,this.icon=null,this.nick=null,this._type=null,this.score=null,this._diamond=null,this.phone=null,this.type=e.type,this.id=e.id,this.icon=e.icon,this.nick=e.nick,this.score=e.score,this._diamond=e.diamond,this.phone=e.phone}return Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"diamond",{get:function(){return this._diamond},set:function(e){this._diamond=e,n.eventBus.emit(i.EventType.LOCAL_NOTICE_EVENT,{type:i.LocalNoticeEventType.DIAMOND_COUNT_CHANGE,info:e})},enumerable:!0,configurable:!0}),e}();o.default=r,cc._RF.pop()},{"../../common/Const":"Const","../../common/EventBus":"EventBus"}],UserManage:[function(e,t,o){"use strict";cc._RF.push(t,"5f7eeXhr8JInI2M6pFirxjR","UserManage");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function a(e){try{s(n.next(e))}catch(e){r(e)}}function c(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):new o(function(t){t(e.value)}).then(a,c)}s((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../common/Config"),a=e("../../common/Const"),c=e("./UserItem"),s=e("../../common/Http"),u=e("../Config/ConfigManage"),l=e("../../common/Util"),p=e("axios"),d=e("loglevel"),h=function(){function e(){this.userInfo=null,this.selectChipValue=0,this.userInfoInRoom=null}return e.prototype.getSelectChipValue=function(){return this.selectChipValue},e.prototype.getLoginUserId=function(){try{var e=l.getUrlParam("userId");return null!=e?(d.default.info("\u4eceurl\u4e2d\u53d6\u5230\u4e86\u7528\u6237ID\uff0c\u4e3b\u8981\u7528\u4e8e\u5feb\u901f\u6d4b\u8bd5\u4f7f\u7528\uff0c\u7528\u6237ID:",e),e):(e=l.webCookie.getItem("userId"),d.default.info("cookie\u83b7\u53d6\u7528\u6237id",e),null==e&&(e=localStorage.getItem("userId"),d.default.info("localStorage\u83b7\u53d6\u7528\u6237id",e)),e)}catch(e){return d.default.error("\u672c\u5730\u67e5\u627e\u7528\u6237id\u5f02\u5e38",e),null}},e.prototype.setUserInfoInRoom=function(e){this.userInfoInRoom=e},e.prototype.getUserInfoInRoom=function(){return this.userInfoInRoom},e.prototype.setSelectChipValue=function(e){this.selectChipValue=e},e.prototype.getUserIconUrl=function(){return u.default.getUserIconUrl()+this.userInfo.icon},e.prototype.setUserInfo=function(e){this.userInfo=new c.default(e)},e.prototype.requestUserInfo=function(e){var t=this;return new Promise(function(o){if(null===t.userInfo){var n=r.config.serverAddress+a.InterfaceUrl.GET_USER_INFO;p.default.get(n,{params:{id:e}}).then(function(e){var n=e.data;if(0!=n.status){var i=n.data,r=n.config;u.default.setGameUrl(n.gameUrl),u.default.setAudioUrl(n.config.userAudioUrl),u.default.setUserIconUrl(r.userIconUrl),u.default.setRapLandlordTime(r.rapLandlordTime),t.userInfo=new c.default(i),o({result:a.ResponseStatus.SUCCESS,extObject:t.userInfo})}else o({result:a.ResponseStatus.FAIL,extObject:n})}).catch(function(e){o({result:a.ResponseStatus.FAIL,extObject:{status:0,message:"net_error",data:""}})})}else o({result:a.ResponseStatus.SUCCESS,extObject:t.userInfo})})},e.prototype.updateUserDiamond=function(){var e=this;return new Promise(function(t){var o=r.config.serverAddress+a.InterfaceUrl.GET_USER_DIAMOND+"?userId="+e.userInfo.id;s.default.getWithUrl(o,function(t,o){t||o.status==a.ResponseStatus.FAIL||(e.userInfo.diamond=o.data)})})},e.prototype.costDiamondInRoom=function(e,t){return new Promise(function(o){var n=r.config.serverAddress+a.InterfaceUrl.COST_DIAMOND+"?userId="+t+"&roomId="+e;s.default.getWithUrl(n,function(e,t){e?o({result:a.ResponseStatus.FAIL,extObject:{message:"interface_fail"}}):t.status!==a.ResponseStatus.FAIL?o({result:a.ResponseStatus.SUCCESS,extObject:t.data}):o({result:a.ResponseStatus.FAIL,extObject:t})})})},e.prototype.rechargeDiamond=function(e,t){return new Promise(function(o){var n=r.config.serverAddress+a.InterfaceUrl.RECHARGE_DIAMOND+"?userId="+e+"&diamondCount="+t;s.default.getWithUrl(n,function(e,t){e?o({result:a.ResponseStatus.FAIL,extObject:{message:"interface_fail"}}):t.status!==a.ResponseStatus.FAIL?o({result:a.ResponseStatus.SUCCESS,extObject:t.data}):o({result:a.ResponseStatus.FAIL,extObject:t})})})},e.prototype.costDiamond=function(e,t){return n(this,void 0,void 0,function(){var o;return i(this,function(n){switch(n.label){case 0:return[4,this.costDiamondInRoom(e,t)];case 1:return(o=n.sent()).result===a.ResponseStatus.FAIL?[2]:(this.userInfo.diamond=o.extObject,[2])}})})},e}();o.default=new h,cc._RF.pop()},{"../../common/Config":"Config","../../common/Const":"Const","../../common/Http":"Http","../../common/Util":"Util","../Config/ConfigManage":"ConfigManage","./UserItem":"UserItem",axios:2,loglevel:28}],Util:[function(e,t,o){"use strict";cc._RF.push(t,"c5f8dDLbF1L6bf5gepq9Spd","Util"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Const");function i(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),o=window.location.search.substr(1).match(t);return null!=o?unescape(o[2]):null}function r(e,t){for(var o=0;o<t.length;o++)if(t[o].userId===e)return t[o];return null}o.randEventId=function(){return"roll_"+(new Date).getTime()+"_"+Math.ceil(10*Math.random())},o.getMajhongValueType=function(e){return 2==e.one&&8==e.two||8==e.one&&2==e.two?n.MajhongValueType.ER_BA_GANG:e.one===e.two?n.MajhongValueType.DUI_ZI:e.two+e.one==10?n.MajhongValueType.BI_SHI:n.MajhongValueType.DIAN},o.randFloatNum=function(e,t){var o=t-e+1;return Math.random()*o+e},o.getFaPaiLocation=function(e){var t=e.one+e.two;return 2===t||6===t||10===t?n.TableLocationType.SKY:3===t||7===t||11===t?n.TableLocationType.MIDDLE:4===t||8===t||12===t?n.TableLocationType.LAND:n.TableLocationType.LANDLORD},o.getUrlParam=i,o.isUrlToGameRoom=function(){return null!==i("roomId")},o.getDistanceBetweenTwoPoints=function(e,t,o,n){var i=e-o,r=t-n;return Math.sqrt(Math.pow(i,2)+Math.pow(r,2))},o.getItemFromResultDataByUserId=r,o.getMemeberResultScoreList=function(e,t){var o=[];return t.forEach(function(t){var n=t.userId,i=r(n,e);null===i?o.push({userId:n,score:0,nick:t.nick,icon:t.icon}):o.push(i)}),o},o.touchMoveEvent=function(e){var t=Math.abs(e.currentTouch._point.x-e.currentTouch._startPoint.x),o=Math.abs(e.currentTouch._point.y-e.currentTouch._startPoint.y);return!(parseFloat(Math.sqrt(Math.pow(t,2)+Math.pow(o,2)).toFixed(2))<30)},o.mergeRaceResult=function(e,t){for(var o=0;o<e.length;o++){for(var n=e[o],i=!1,r=0;r<t.length;r++)n.userId===t[r].userId&&(i=!0,t[r].score+=n.score);i||t.push(n)}return t},o.randomRange=function(e,t){return Math.floor(Math.random()*(t-e))+e},o.webCookie={setItem:function(e,t,o){var n=new Date;n.setTime(n.getTime()+15552e6),document.cookie=e+"="+escape(t)+";expires="+n.toGMTString()+"; path=/"},getItem:function(e){var t,o=new RegExp("(^| )"+e+"=([^;]*)(;|$)");if(t=document.cookie.match(o)){var n=unescape(t[2]);return this.setItem(e,n),n}return null},removeItem:function(e,t){void 0===t&&(t="/");var o=new Date,n=o.getTime()-1;o.setTime(n);var i,r=o.toGMTString(),a=new RegExp("(^| )"+e+"=([^;]*)(;|$)");if(i=document.cookie.match(a)){var c=unescape(i[2]);document.cookie=e+"="+c+";expires="+r+"; path="+t}}},cc._RF.pop()},{"./Const":"Const"}],VoiceManage:[function(e,t,o){"use strict";cc._RF.push(t,"dadc3s0sE1Go7ZACFxQqsOr","VoiceManage");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function a(e){try{s(n.next(e))}catch(e){r(e)}}function c(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):new o(function(t){t(e.value)}).then(a,c)}s((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var r=e("axios"),a=e("../../common/Const"),c=e("../Room/RoomManage"),s=e("../../common/WebSocketManage"),u=e("../User/UserManage"),l=e("../Config/ConfigManage"),p=e("../../common/Config"),d=e("../../common/EventBus"),h=function(){function e(){this.rec=null,this.timeLimit=6,this.beginButtonHideTime=5,this.scheduleOnceLimit=null,this.voiceButtonHideTimer=null}return e.prototype.recOpen=function(e){this.rec=window.Recorder({type:"mp3",sampleRate:16e3,bitRate:16,onProcess:function(e,t,o,n,i,r){}}),this.rec.open(function(){e&&e()},function(e,t){d.eventBus.emit(a.EventType.LOCAL_NOTICE_EVENT,{type:a.LocalNoticeEventType.PLAY_AUDIO_NOT_SUPPORT,info:""})})},e.prototype.recStart=function(){var e=this;this.recOpen(function(){e.rec.start()})},e.prototype.uploadAndNoticeAudio=function(e,t){return n(this,void 0,void 0,function(){var o,n;return i(this,function(i){switch(i.label){case 0:return[4,this.upLoadVice(e)];case 1:return(o=i.sent()).result==a.ResponseStatus.SUCCESS&&(n={type:a.NoticeType.voicePlay,info:{roomId:c.default.roomItem.id,userId:u.default.userInfo.id,voiceName:o.extObject,duration:t}},s.default.send(JSON.stringify(n))),[2]}})})},e.prototype.getAndPlayAudio=function(e,t){e.loader.load(l.default.getAudioUrl()+t.voiceName,function(t,o){e.audioEngine.play(o,!1,1)})},e.prototype.recStop=function(){var e=this;null!=this.rec&&this.rec.stop(function(t,o){var n=new FileReader;n.readAsDataURL(t),n.onloadend=function(){var t=n.result;e.uploadAndNoticeAudio(t,o)},e.rec.close(),e.rec=null},function(t){e.rec.close(),e.rec=null})},e.prototype.upLoadVice=function(e){return new Promise(function(t){r.default.create({baseURL:p.config.serverAddress,timeout:4e3,headers:{"Content-Type":"application/x-www-form-urlencoded"}})({method:"POST",url:a.InterfaceUrl.AUDIO_UPLOAD,data:{file:e}}).then(function(e){if(e.data.status==a.ResponseStatus.SUCCESS){var o=e.data.data;t({result:a.ResponseStatus.SUCCESS,extObject:o})}else t({result:a.ResponseStatus.FAIL,extObject:""})}).catch(function(e){t({result:a.ResponseStatus.FAIL,extObject:""})})})},e}();o.default=new h,cc._RF.pop()},{"../../common/Config":"Config","../../common/Const":"Const","../../common/EventBus":"EventBus","../../common/WebSocketManage":"WebSocketManage","../Config/ConfigManage":"ConfigManage","../Room/RoomManage":"RoomManage","../User/UserManage":"UserManage",axios:2}],WebSocketManage:[function(e,t,o){"use strict";cc._RF.push(t,"66da4Sl4oZGKZ+ZASFnJ+E7","WebSocketManage"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Const"),i=e("../store/Room/RoomManage"),r=e("../store/User/UserManage"),a=e("../store/GameMember/GameMemberManage"),c=e("./EventBus"),s=e("../store/Races/RaceManage"),u=e("../store/Bets/BetManage"),l=e("./Config"),p=e("../store/Config/ConfigManage"),d=e("loglevel"),h=function(){function e(){this.ws=null}return e.prototype.closeWs=function(){null!==this.ws&&this.ws.close(),this.ws=null},e.prototype.openWs=function(e,t){var o=this;if(null===this.ws){try{this.ws=new WebSocket(l.config.websocketAddress),this.ws.onmessage=this.onmessage,this.ws.onopen=function(){e()},this.ws.onclose=function(){t(),o.ws=null}}catch(e){}return!0}return!1},e.prototype.send=function(e){null!==this.ws&&this.ws.send(e)},e.prototype.onmessage=function(e){var t=JSON.parse(e.data),o=t.type,l=t.info,h=null;switch(d.default.info("\u63a5\u6536\u5230socket\u901a\u77e5",t),o){case"memberInSocketRoom":if(d.default.info("\u63a5\u6536\u5230\u6709\u6210\u5458\u8fdb\u5165\u623f\u95f4\u901a\u77e5",l),l.userId==r.default.userInfo.id&&r.default.setUserInfoInRoom(l),l.roleType==n.gameMemberType.LIMIT||l.state==n.memberState.KickOut)return void d.default.error("\u88ab\u9650\u5236\u8fdb\u5165\u7528\u6237\u6216\u8005\u88ab\u8e22\u51fa\u7528\u6237\uff0c\u4e0d\u80fd\u8fdb\u5165");if(l.roleType==n.gameMemberType.VISITOR){if(d.default.info("\u6e38\u5ba2\u8fdb\u5165,\u53d1\u51fa\u672c\u5730\u901a\u77e5"),l.userId!=r.default.userInfo.id)return void d.default.info("\u6e38\u5ba2\u8fdb\u5165,\u5176\u4ed6\u4eba\u4e0d\u505a\u4efb\u4f55\u5904\u7406");c.eventBus.emit(n.EventType.LOCAL_NOTICE_EVENT,{type:n.LocalNoticeEventType.VISIT_ENTER_ROOM,info:l})}else d.default.info("\u73a9\u5bb6\u8fdb\u5165"),a.default.addGameMember(l),l.userId==r.default.userInfo.id&&i.default.roomItem.creatUserId==l.userId&&i.default.roomItem.roomState==n.roomState.OPEN&&(d.default.info("\u623f\u4e3b\u5728\u623f\u95f4\u8fd8\u6ca1\u5f00\u59cb\u7684\u60c5\u51b5\u4e0b\u8fdb\u5165\u623f\u95f4\uff0c\u672c\u5730\u901a\u77e5\u663e\u793a\u5f00\u59cb\u6309\u94ae"),c.eventBus.emit(n.EventType.LOCAL_NOTICE_EVENT,{type:n.LocalNoticeEventType.TO_SHOW_START_BUTTON,info:null}));break;case"memberOutRoom":l=l.data,d.default.info("\u63a5\u5230\u6210\u5458\u9000\u51fa\u623f\u95f4\u901a\u77e5",l),i.default.roomItem.creatUserId!=l.userId&&i.default.roomItem.roomState==n.roomState.OPEN?(d.default.info("\u6e38\u620f\u8fd8\u6ca1\u5f00\u59cb\uff0c\u5e76\u4e14\u9000\u51fa\u7684\u4e0d\u662f\u623f\u4e3b\uff0c\u5c06\u8be5\u7528\u6237\u7684\u4fe1\u606f\u6e05\u9664\uff0c\u7528\u6237\uff1a",l.userId),a.default.outGameMember(l.userId)):(d.default.info("\u6e38\u620f\u5df2\u7ecf\u5f00\u59cb\uff0c\u5c06\u7528\u6237\u7684\u72b6\u6001\u6539\u4e3a\u79bb\u7ebf"),void 0!==a.default.gameMenmberList[l.userId]&&(d.default.info("\u7528\u6237\u662f\u73a9\u5bb6"),a.default.gameMenmberList[l.userId].state=n.memberState.OffLine));break;case"raceStateChoiceLandlord":if(d.default.info("\u63a5\u6536\u5230\u9009\u5730\u4e3b\u901a\u77e5"),0==l.raceNum&&(d.default.info("\u6e38\u620f\u521a\u5f00\u59cb\uff0c\u5c06\u672c\u5730\u623f\u95f4\u72b6\u6001\u6539\u4e3a\u6e38\u620f\u4e2d"),i.default.roomItem.roomState=n.roomState.PLAYING),i.default.roomItem.changeOningRaceNum(l.raceNum),d.default.info("start_game_test:socket\u6536\u5230\u6e38\u620f\u9009\u5730\u4e3b\u901a\u77e5,\u6211\u5c06\u6bd4\u8d5b\u72b6\u6001\u8bbe\u7f6e\u4e3a\u9009\u5730\u4e3b,\u5f53\u524d\u6bd4\u8d5b\u573a\u6b21:",i.default.roomItem.oningRaceNum),s.default.changeRaceState(n.RaceState.CHOICE_LANDLORD),r.default.getUserInfoInRoom().roleType!=n.gameMemberType.PLAYER)return void d.default.info("\u975e\u73a9\u5bb6\uff0c\u5bf9\u9009\u5730\u4e3b\u4e0d\u54cd\u5e94");break;case"raceStateDeal":i.default.roomItem.changeOningRaceNum(l.raceNum),s.default.changeRaceLandlord(l.landlordId,1,l.raceNum),s.default.changeRaceState(n.RaceState.DEAL);break;case"raceStateBet":i.default.roomItem.changeOningRaceNum(l.raceNum),s.default.changeRaceLandlord(l.landlordId,1,l.raceNum),s.default.changeRaceState(n.RaceState.BET);break;case"raceStateShowDown":d.default.info("\u63a5\u6536\u5230\u6bd4\u5927\u5c0f\u901a\u77e5\uff0c\u5305\u542b\u4e86\u5f53\u524d\u573a\u6b21\u7684\u7ed3\u679c\u4fe1\u606f\uff0c\u4ee5\u53ca\u623f\u95f4\u7684\u6574\u4f53\u7ed3\u679c\u4fe1\u606f",l),i.default.roomItem.changeOningRaceNum(l.raceNum),s.default.changeRaceLandlord(l.landlordId,1,l.raceNum);var f=l.raceResult;setTimeout(function(){c.eventBus.emit(n.EventType.USER_SCORE_NOTICE,l.roomResult)},1e3*(p.default.getShowDownTime()+1)),s.default.raceList[l.raceNum].setRaceResultList(f),s.default.changeRaceState(n.RaceState.SHOW_DOWN);break;case"betNotice":if(l.betVal<0){var m=l.betVal;if(u.default.cancelBet(l),l.userId==r.default.userInfo.id){var y=s.default.getClickXiaZhuVal();s.default.setClickXiaZhuVal(y+m)}}else u.default.addBet(l.raceNum,l.userId,l.betLocation,l.betVal);break;case"allRaceFinished":h=l.roomResult,s.default.setGameOverResultList(h),i.default.roomItem.roomState=n.roomState.CLOSE;break;case"chatCartonMessage":c.eventBus.emit(n.EventType.CARTON_MESSAGE_NOTICE,l);break;case"memberWaitForLandlord":var g={userId:l.userId,type:n.ChatMessageType.QIANG_ZHUANG,message:0};c.eventBus.emit(n.EventType.CARTON_MESSAGE_NOTICE,g);break;case"checkRoomMember":a.default.checkRoomMember(l);break;case"audioPlayNotice":console.log("\u63a5\u53d7\u5230\u8bed\u97f3\u901a\u77e5"),console.log(l),c.eventBus.emit(n.EventType.LOCAL_NOTICE_EVENT,{type:n.LocalNoticeEventType.PLAY_AUDIO_LOCAL_NOTICE,info:l});break;case"turnLandlord":d.default.info("\u63a5\u6536\u5230\u8f6e\u5e84\u901a\u77e5",l),0==l.raceNum&&(d.default.info("\u6e38\u620f\u521a\u5f00\u59cb\uff0c\u5c06\u672c\u5730\u623f\u95f4\u72b6\u6001\u6539\u4e3a\u6e38\u620f\u4e2d"),i.default.roomItem.roomState=n.roomState.PLAYING),i.default.roomItem.changeOningRaceNum(l.raceNum),s.default.changeRaceState(n.RaceState.CHOICE_LANDLORD),c.eventBus.emit(n.EventType.LOCAL_NOTICE_EVENT,{type:n.LocalNoticeEventType.TURN_LANDLORD_LOCAL_NOTICE,info:l});break;case"enterRoomRes":d.default.info("\u8fdb\u5165\u63a5\u53e3\u623f\u95f4\u7ed3\u679c\u901a\u77e5"),0==l.flag&&(d.default.info("\u8fdb\u5165socket\u623f\u95f4\u5931\u8d25,\u9000\u51fa\u5230\u5927\u5385",l),c.eventBus.emit(n.EventType.LOCAL_NOTICE_EVENT,{type:n.LocalNoticeEventType.TO_LOBBY_EVENT,info:!1}))}},e}();o.default=new h,cc._RF.pop()},{"../store/Bets/BetManage":"BetManage","../store/Config/ConfigManage":"ConfigManage","../store/GameMember/GameMemberManage":"GameMemberManage","../store/Races/RaceManage":"RaceManage","../store/Room/RoomManage":"RoomManage","../store/User/UserManage":"UserManage","./Config":"Config","./Const":"Const","./EventBus":"EventBus",loglevel:28}],WenZiList:[function(e,t,o){"use strict";cc._RF.push(t,"f2111z2VydEaoEzxfpDrmfK","WenZiList"),Object.defineProperty(o,"__esModule",{value:!0}),o.wenZiList=[{content:"\u641e\u8d77\u641e\u8d77\u6211\u4eec\u5355\u6311\uff01",voice:"a"},{content:"\u5927\u5bb6\u4e00\u8d77\u55e8\u8d77\uff01",voice:"a"},{content:"\u6d4b\u8bd51",voice:"a"},{content:"\u6d4b\u8bd52",voice:"a"},{content:"\u6d4b\u8bd53",voice:"a"},{content:"\u6d4b\u8bd54",voice:"a"},{content:"\u6d4b\u8bd55",voice:"a"},{content:"\u6d4b\u8bd56",voice:"a"}],cc._RF.pop()},{}],XiaZhu:[function(e,t,o){"use strict";cc._RF.push(t,"c31567Tj2FKhZ2dwnptOZcQ","XiaZhu");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,s=e("../../common/Util"),u=e("../../common/Const"),l=e("../../common/EventBus"),p=e("../../store/User/UserManage"),d=e("../../store/Config/ConfigManage"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.chip_1=null,t.chip_2=null,t.chip_3=null,t.chip_4=null,t.pushEventId="",t.deskChipList=[],t.focus_1=null,t.focus_2=null,t.focus_3=null,t.focus_4=null,t.button_1=null,t.button_2=null,t.button_3=null,t.button_4=null,t.chipValueList=[],t.flyTime=.35,t.ownChipSize=40,t.otherMemberChipSize=25,t.chipBetVoice=null,t.ownChipBetVoice=null,t}return n(t,e),t.prototype.start=function(){},t.prototype.getUserChairPosition=function(e){return cc.find("Canvas/Desk").getComponent("Desk").chairManage.getChairPositionByUserId(e)},t.prototype.closeAllFocus=function(){this.focus_1.node.active=!1,this.focus_2.node.active=!1,this.focus_3.node.active=!1,this.focus_4.node.active=!1},t.prototype.flyAnimation=function(e,t,o,n,i){var r=this,a=this.createChip(e,n,i);a.setPosition(t.x,t.y),a.active=!0;var c=cc.moveTo(this.flyTime,o.x,o.y),s=cc.sequence(c,cc.callFunc(function(){d.default.isTxMusicOpen()&&r.chipBetVoice.play()},this));e&&d.default.isTxMusicOpen()&&this.ownChipBetVoice.play(),a.runAction(s)},t.prototype.createChip=function(e,t,o){var n;n=t===this.chipValueList[0]?this.chip_1:t===this.chipValueList[1]?this.chip_2:t===this.chipValueList[2]?this.chip_3:this.chip_4;var i=cc.instantiate(n);i.name=s.randEventId();var r=i.getChildByName("ValLabel").getComponent(cc.Label);return r.string=t+"",i.getComponent("Chip").initData(o),e?(r.fontSize=14,i.width=this.ownChipSize,i.height=this.ownChipSize):(r.fontSize=10,i.width=this.otherMemberChipSize,i.height=this.otherMemberChipSize),i.parent=cc.find("Canvas/Desk"),this.deskChipList.push(i.name),i},t.prototype.destroyDeskChip=function(){this.deskChipList.forEach(function(e){var t=cc.find("Canvas/Desk").getChildByName(e);t&&t.destroy()}),this.deskChipList=[]},t.prototype.hideLineChip=function(){var e=this.node.getChildByName("Layout");e&&(e.active=!1)},t.prototype.showLineChip=function(e){var t=this.node.getChildByName("Layout");t&&(t.active=!0),this.node.setPosition(e.x,e.y)},t.prototype.backAllChipe=function(){var e=!1;return this.deskChipList.forEach(function(t){var o=cc.find("Canvas/Desk").getChildByName(t);o&&(e=!0,o.getComponent("Chip").backChip())}),e},t.prototype.onEnable=function(){var e=this;this.chipValueList=d.default.getChipValList(),this.button_1.node.getChildByName("Label").getComponent(cc.Label).string=this.chipValueList[0]+"",this.button_2.node.getChildByName("Label").getComponent(cc.Label).string=this.chipValueList[1]+"",this.button_3.node.getChildByName("Label").getComponent(cc.Label).string=this.chipValueList[2]+"",this.button_4.node.getChildByName("Label").getComponent(cc.Label).string=this.chipValueList[3]+"",this.initFocus(),this.pushEventId=s.randEventId(),l.eventBus.on(u.EventType.BET_CHIP_CHANGE_EVENT,this.pushEventId,function(t){e.toXiaZhu(t)}),this.betCancelEventId=s.randEventId(),l.eventBus.on(u.EventType.BET_CANCE_NOTICE,this.betCancelEventId,function(t){e.deskChipList.forEach(function(e){var o=cc.find("Canvas/Desk").getChildByName(e);o&&o.getComponent("Chip").cancelChip(t)})}),this.button_1.node.on(cc.Node.EventType.TOUCH_END,function(){d.default.isTxMusicOpen()&&e.ownChipBetVoice.play(),e.closeAllFocus(),e.focus_1.node.active=!0,p.default.setSelectChipValue(e.chipValueList[0])}),this.button_2.node.on(cc.Node.EventType.TOUCH_END,function(){d.default.isTxMusicOpen()&&e.ownChipBetVoice.play(),e.closeAllFocus(),e.focus_2.node.active=!0,p.default.setSelectChipValue(e.chipValueList[1])}),this.button_3.node.on(cc.Node.EventType.TOUCH_END,function(){d.default.isTxMusicOpen()&&e.ownChipBetVoice.play(),e.closeAllFocus(),e.focus_3.node.active=!0,p.default.setSelectChipValue(e.chipValueList[2])}),this.button_4.node.on(cc.Node.EventType.TOUCH_END,function(){d.default.isTxMusicOpen()&&e.ownChipBetVoice.play(),e.closeAllFocus(),e.focus_4.node.active=!0,p.default.setSelectChipValue(e.chipValueList[3])})},t.prototype.toXiaZhu=function(e){var t,o=this,n=e.toValue-e.fromVal,i=e.userId,r=e.betLocation,a=u.chipPoint[r];if(null!==(t=this.getUserChairPosition(i))){var c=!1;i===p.default.userInfo.id&&(c=!0),this.splitChipList(n).forEach(function(e){c&&(t=o.getChipLocationByChipValue(e));var n={userId:i,chipVal:e,betLocation:r};o.flyAnimation(c,t,o.getXiaZhuLocation(a),e,n)})}},t.prototype.splitChipList=function(e){for(var t=[],o=this.chipValueList.length-1;o>=0;o--){for(var n=this.chipValueList[o];e>=n;)t.push(n),e-=n;if(e<=0)break}return t},t.prototype.getChipLocationByChipValue=function(e){var t={x:127,y:-245};switch(e){case this.chipValueList[0]:t={x:127,y:-245};break;case this.chipValueList[1]:t={x:223,y:-245};break;case this.chipValueList[2]:t={x:318,y:-245};break;case this.chipValueList[3]:t={x:414,y:-245}}return t},t.prototype.initFocus=function(){switch(this.closeAllFocus(),p.default.getSelectChipValue()){case this.chipValueList[0]:this.focus_1.node.active=!0;break;case this.chipValueList[1]:this.focus_2.node.active=!0;break;case this.chipValueList[2]:this.focus_3.node.active=!0;break;case this.chipValueList[3]:this.focus_4.node.active=!0}},t.prototype.getXiaZhuLocation=function(e){var t=e.left,o=e.right;return{x:s.randFloatNum(t.x,o.x),y:o.y+s.randFloatNum(-10,10)}},t.prototype.onDisable=function(){l.eventBus.off(u.EventType.BET_CHIP_CHANGE_EVENT,this.pushEventId),l.eventBus.off(u.EventType.BET_CANCE_NOTICE,this.betCancelEventId)},t.prototype.update=function(e){this.focus_1.node.angle=this.focus_1.node.angle+.2,this.focus_2.node.angle=this.focus_2.node.angle+.2,this.focus_3.node.angle=this.focus_3.node.angle+.2,this.focus_4.node.angle=this.focus_4.node.angle+.2},i([c(cc.Prefab)],t.prototype,"chip_1",void 0),i([c(cc.Prefab)],t.prototype,"chip_2",void 0),i([c(cc.Prefab)],t.prototype,"chip_3",void 0),i([c(cc.Prefab)],t.prototype,"chip_4",void 0),i([c(cc.Sprite)],t.prototype,"focus_1",void 0),i([c(cc.Sprite)],t.prototype,"focus_2",void 0),i([c(cc.Sprite)],t.prototype,"focus_3",void 0),i([c(cc.Sprite)],t.prototype,"focus_4",void 0),i([c(cc.Sprite)],t.prototype,"button_1",void 0),i([c(cc.Sprite)],t.prototype,"button_2",void 0),i([c(cc.Sprite)],t.prototype,"button_3",void 0),i([c(cc.Sprite)],t.prototype,"button_4",void 0),i([c(cc.AudioSource)],t.prototype,"chipBetVoice",void 0),i([c(cc.AudioSource)],t.prototype,"ownChipBetVoice",void 0),t=i([a],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../common/Const":"Const","../../common/EventBus":"EventBus","../../common/Util":"Util","../../store/Config/ConfigManage":"ConfigManage","../../store/User/UserManage":"UserManage"}]},{},["Config","Const","EventBus","FaceList","Http","Log","RollControler","RollControlerBase","RoomGameConfig","Util","WebSocketManage","WenZiList","CancelChipAn","ChatCarton","CreateRoomPanel","CustomerPanel","DealMachine","DealMachineBase","ChairItem","ChairManage","Desk","DeskPart","EntryBox","LineTrendMap","MahjongResultLabel","MiddleResultAmimation","MiddleTopScorePanel","MiddleTopTimePanel","MjDouble","PlayButton","PlayRule","PlayUserIcon","RaceMajResult","RaceResultPanel","RapLandlordButton","RechargePanel","RollDice","RollLable","RoomResultPanel","RoomResultUserItem","SetPanel","SharePanel","TipDialog","TrendItem","TrendMap","Chip","XiaZhu","BetList","GameMemberList","RaceList","RoomInfo","UserInfo","LobbyScene","RollRoomScene","Test","BetItem","BetManage","ConfigManage","GameMemberItem","GameMemberManage","RaceItem","RaceManage","RoomItem","RoomManage","UserBase","UserItem","UserManage","VoiceManage"]);